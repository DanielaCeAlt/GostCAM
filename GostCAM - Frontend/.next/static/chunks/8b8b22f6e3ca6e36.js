(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,63579,(e,t,i)=>{let s=Error("Could not parse module '[project]/src/lib/apiService.ts'\n\nExpression expected");throw s.code="MODULE_UNPARSABLE",s},50244,(e,t,i)=>{let s=Error("Could not parse module '[project]/src/components/LoginScreen.tsx'\n\nExpression expected");throw s.code="MODULE_UNPARSABLE",s},18566,(e,t,i)=>{t.exports=e.r(76562)},34913,88589,32077,e=>{"use strict";let t;e.s(["AppProvider",()=>l,"useApp",()=>c],34913);var i=e.i(43476),s=e.i(71645),a=e.i(63579);let r={isAuthenticated:!1,user:null,token:null,isLoading:!1,error:null,currentSection:"dashboard",dashboardStats:null,equipos:[],movimientos:[],catalogos:null,apiMode:"nextjs"};function n(e,t){switch(t.type){case"SET_LOADING":return{...e,isLoading:t.payload};case"SET_ERROR":return{...e,error:t.payload,isLoading:!1};case"LOGIN_SUCCESS":return{...e,isAuthenticated:!0,user:t.payload.user,token:t.payload.token,error:null,isLoading:!1};case"LOGOUT":return{...r};case"SET_SECTION":return{...e,currentSection:t.payload};case"SET_DASHBOARD_STATS":return{...e,dashboardStats:t.payload};case"SET_EQUIPOS":return{...e,equipos:t.payload};case"SET_MOVIMIENTOS":return{...e,movimientos:t.payload};case"SET_CATALOGOS":return{...e,catalogos:t.payload};case"SET_API_MODE":return{...e,apiMode:t.payload};default:return e}}let o=(0,s.createContext)(void 0);function l(e){let{children:t}=e,[l,c]=(0,s.useReducer)(n,r);(0,s.useEffect)(()=>{let e=localStorage.getItem("gostcam_token"),t=localStorage.getItem("gostcam_user");if(e&&t)try{let i=JSON.parse(t);c({type:"LOGIN_SUCCESS",payload:{user:i,token:e}})}catch(e){console.error("Error parsing saved user data:",e),localStorage.removeItem("gostcam_token"),localStorage.removeItem("gostcam_user")}},[]),(0,s.useEffect)(()=>{a.apiService.setMode(l.apiMode),l.token&&a.apiService.setToken(l.token)},[l.apiMode,l.token]);let d=async(e,t)=>{c({type:"SET_LOADING",payload:!0}),c({type:"SET_ERROR",payload:null});try{a.apiService.setMode(l.apiMode);let i=await a.apiService.login(e,t);if(i.success&&i.user&&i.token)return a.apiService.setToken(i.token),localStorage.setItem("gostcam_token",i.token),localStorage.setItem("gostcam_user",JSON.stringify(i.user)),c({type:"LOGIN_SUCCESS",payload:{user:i.user,token:i.token}}),!0;return c({type:"SET_ERROR",payload:i.message||"Error de autenticaciÃ³n"}),!1}catch(e){return console.error("Login error:",e),c({type:"SET_ERROR",payload:"Error de conexiÃ³n"}),!1}},h=async()=>{if(l.token)try{c({type:"SET_LOADING",payload:!0}),a.apiService.setMode(l.apiMode),a.apiService.setToken(l.token);let e=await a.apiService.getDashboardStats();e.success&&e.data?c({type:"SET_DASHBOARD_STATS",payload:e.data}):c({type:"SET_ERROR",payload:e.error||"Error cargando dashboard"})}catch(e){console.error("Error loading dashboard:",e),c({type:"SET_ERROR",payload:"Error de conexiÃ³n"})}finally{c({type:"SET_LOADING",payload:!1})}},u=async e=>{if(l.token)try{c({type:"SET_LOADING",payload:!0}),a.apiService.setMode(l.apiMode),a.apiService.setToken(l.token);let t=await a.apiService.getEquipos(e);t.success&&t.data?c({type:"SET_EQUIPOS",payload:t.data}):c({type:"SET_ERROR",payload:t.error||"Error cargando equipos"})}catch(e){console.error("Error loading equipos:",e),c({type:"SET_ERROR",payload:"Error de conexiÃ³n"})}finally{c({type:"SET_LOADING",payload:!1})}},g=async e=>{if(l.token)try{c({type:"SET_LOADING",payload:!0}),a.apiService.setMode(l.apiMode),a.apiService.setToken(l.token);let t=await a.apiService.getMovimientos(e);t.success&&t.data?c({type:"SET_MOVIMIENTOS",payload:t.data}):c({type:"SET_ERROR",payload:t.error||"Error cargando movimientos"})}catch(e){console.error("Error loading movimientos:",e),c({type:"SET_ERROR",payload:"Error de conexiÃ³n"})}finally{c({type:"SET_LOADING",payload:!1})}},m=async()=>{if(l.token)try{a.apiService.setMode(l.apiMode),a.apiService.setToken(l.token);let e=await a.apiService.getCatalogos();e.success?c({type:"SET_CATALOGOS",payload:e.data}):c({type:"SET_ERROR",payload:e.error||"Error cargando catÃ¡logos"})}catch(e){console.error("Error loading catalogos:",e)}},p=async()=>{if(!l.token)return console.error("No hay token de autenticaciÃ³n"),!1;try{console.log("ðŸ§ª Iniciando test de alta de equipo..."),a.apiService.setMode(l.apiMode),a.apiService.setToken(l.token);let e={no_serie:"TEST-".concat(Date.now()),nombreEquipo:"Equipo de Prueba ".concat(new Date().toLocaleString()),modelo:"Modelo Test v1.0",idTipoEquipo:1,numeroActivo:"ACT-".concat(Date.now()),idUsuarios:1,idPosicion:1,idEstatus:1};console.log("ðŸ“¦ Datos del equipo:",e);let t=await a.apiService.createEquipo(e);if(t.success)return console.log("âœ… Equipo creado exitosamente:",t.message),await u(),!0;return console.error("âŒ Error creando equipo:",t.error),!1}catch(e){return console.error("ðŸ’¥ Error en test de alta:",e),!1}};return(0,i.jsx)(o.Provider,{value:{state:l,login:d,logout:()=>{localStorage.removeItem("gostcam_token"),localStorage.removeItem("gostcam_user"),c({type:"LOGOUT"})},setSection:e=>{c({type:"SET_SECTION",payload:e})},setApiMode:e=>{c({type:"SET_API_MODE",payload:e})},loadDashboardStats:h,loadEquipos:u,loadMovimientos:g,loadCatalogos:m,testAltaEquipo:p,getStatusColor:e=>({Disponible:"bg-green-100 text-green-800","En uso":"bg-blue-100 text-blue-800",Mantenimiento:"bg-yellow-100 text-yellow-800","En reparaciÃ³n":"bg-yellow-100 text-yellow-800",Baja:"bg-gray-100 text-gray-800",Extraviado:"bg-red-100 text-red-800",DaÃ±ado:"bg-red-100 text-red-800",Obsoleto:"bg-gray-100 text-gray-800",ABIERTO:"bg-blue-100 text-blue-800",CERRADO:"bg-green-100 text-green-800",CANCELADO:"bg-red-100 text-red-800"})[e]||"bg-gray-100 text-gray-800",getUserRoleColor:e=>({1:"bg-purple-100 text-purple-800",2:"bg-blue-100 text-blue-800",3:"bg-green-100 text-green-800",4:"bg-yellow-100 text-yellow-800",5:"bg-gray-100 text-gray-800"})[e]||"bg-gray-100 text-gray-800"},children:t})}function c(){let e=(0,s.useContext)(o);if(void 0===e)throw Error("useApp must be used within an AppProvider");return e}e.s(["default",()=>u],88589),e.i(47167);var d=e.i(99749);let h=new class{formatMessage(e,t,i){let s=new Date().toISOString(),a=this.getLogPrefix(e),r=i?" ".concat(JSON.stringify(i)):"";return"".concat(a," [").concat(s,"] ").concat(t).concat(r)}getLogPrefix(e){return({debug:"ðŸ”",info:"ðŸ“",warn:"âš ï¸",error:"âŒ"})[e]}shouldLog(e){return!!this.isDevelopment||"debug"!==e}sendToExternalService(e,t,i){if(this.isDevelopment||!this.isClient)return}debug(e,t){if(!this.shouldLog("debug"))return;let i=this.formatMessage("debug",e,t);this.isDevelopment&&console.debug(i)}info(e,t){if(!this.shouldLog("info"))return;let i=this.formatMessage("info",e,t);this.isDevelopment&&console.info(i),this.sendToExternalService("info",e,t)}warn(e,t){this.shouldLog("warn")&&(console.warn(this.formatMessage("warn",e,t)),this.sendToExternalService("warn",e,t))}error(e,t,i){let s={...i,error:null==t?void 0:t.message,stack:null==t?void 0:t.stack};console.error(this.formatMessage("error",e,s)),this.sendToExternalService("error",e,s)}apiRequest(e,t,i){this.debug("API ".concat(e," ").concat(t),{method:e,url:t,status:i})}apiError(e,t,i,s){this.error("API ".concat(e," ").concat(t," failed"),i,{method:e,url:t,status:s})}userAction(e,t,i){this.info("User action: ".concat(e),{action:e,userId:t,...i})}performance(e,t){t>1e3?this.warn("Slow operation: ".concat(e," took ").concat(t,"ms"),{operation:e,duration:t}):this.debug("Performance: ".concat(e," took ").concat(t,"ms"),{operation:e,duration:t})}constructor(){(0,d._)(this,"isDevelopment",!1),(0,d._)(this,"isClient",!0)}};function u(){let{state:e,logout:t,setSection:a,getUserRoleColor:r}=c(),[n,o]=(0,s.useState)(!1),[l,d]=(0,s.useState)(!1),u=(0,s.useRef)(null),{focusElement:g}=function(){let e=(0,s.useRef)(null),t=(0,s.useRef)(-1),i='button:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], [tabindex]:not([tabindex="-1"]), [role="button"]:not([disabled]), [role="link"], [role="menuitem"], [role="tab"]',a=(0,s.useCallback)(()=>{e.current=document.querySelectorAll(i)},[i]),r=(0,s.useCallback)(()=>{var i;if(a(),!e.current)return;let s=Array.from(e.current),r=(s.findIndex(e=>e===document.activeElement)+1)%s.length;null==(i=s[r])||i.focus(),t.current=r},[a]),n=(0,s.useCallback)(()=>{var i;if(a(),!e.current)return;let s=Array.from(e.current),r=s.findIndex(e=>e===document.activeElement),n=r<=0?s.length-1:r-1;null==(i=s[n])||i.focus(),t.current=n},[a]),o=(0,s.useCallback)(e=>{let t=document.querySelector(e);null==t||t.focus()},[]),l=(0,s.useCallback)(t=>{var i,s,o;switch(t.key){case"Tab":a();break;case"ArrowDown":case"ArrowRight":t.target&&"menubar"===t.target.getAttribute("role")&&(t.preventDefault(),r());break;case"ArrowUp":case"ArrowLeft":t.target&&"menubar"===t.target.getAttribute("role")&&(t.preventDefault(),n());break;case"Home":t.ctrlKey&&(t.preventDefault(),a(),null==(s=e.current)||null==(i=s[0])||i.focus());break;case"End":if(t.ctrlKey){t.preventDefault(),a();let i=e.current;null==i||null==(o=i[i.length-1])||o.focus()}}},[a,r,n]);return(0,s.useEffect)(()=>(document.addEventListener("keydown",l),a(),()=>{document.removeEventListener("keydown",l)}),[l,a]),{focusNext:r,focusPrevious:n,focusElement:o,updateFocusableElements:a}}(),{announcePageChange:m,announceSuccess:p}=function(){let e=(0,s.useRef)(null),t=(0,s.useCallback)(()=>{if(!e.current){let t=document.createElement("div");t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),t.setAttribute("role","status"),t.style.position="absolute",t.style.left="-10000px",t.style.width="1px",t.style.height="1px",t.style.overflow="hidden",document.body.appendChild(t),e.current=t}return e.current},[]),i=(0,s.useCallback)(function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"polite",s=t();s.setAttribute("aria-live",i),s.textContent="",setTimeout(()=>{s.textContent=e},100),setTimeout(()=>{s.textContent=""},3e3)},[t]),a=(0,s.useCallback)((e,t)=>{i(t?"Navegado a ".concat(e,". ").concat(t):"Navegado a ".concat(e),"polite")},[i]),r=(0,s.useCallback)(e=>{i("Error: ".concat(e),"assertive")},[i]),n=(0,s.useCallback)(e=>{i("Completado: ".concat(e),"polite")},[i]),o=(0,s.useCallback)(e=>{i("Cargando ".concat(e,"..."),"polite")},[i]);return(0,s.useEffect)(()=>(t(),()=>{e.current&&(document.body.removeChild(e.current),e.current=null)}),[t]),{announce:i,announcePageChange:a,announceError:r,announceSuccess:n,announceLoading:o}}();(0,s.useEffect)(()=>{u.current=new AbortController;let{signal:e}=u.current;return window.addEventListener("keydown",e=>{if("/"===e.key&&!e.ctrlKey&&!e.metaKey&&e.target instanceof HTMLElement&&"INPUT"!==e.target.tagName){e.preventDefault(),d(!0),m("Modo bÃºsqueda activado");let t=document.querySelector('input[type="text"]');t&&t.focus(),h.userAction("keyboard_shortcut",void 0,{action:"search"})}if("Escape"===e.key&&(o(!1),d(!1),n&&g('[aria-label="Abrir menÃº"]')),e.altKey&&!e.ctrlKey&&!e.metaKey){let t={h:"dashboard",e:"equipos",s:"sucursales",f:"fallas"}[e.key.toLowerCase()];if(t){e.preventDefault(),a(t);let i=x.find(e=>e.id===t);i&&(m(i.label),h.userAction("keyboard_navigation",void 0,{section:t}))}}e.ctrlKey&&"q"===e.key&&(e.preventDefault(),b())},{signal:e}),()=>{u.current&&u.current.abort()}},[n,g,m,a,h]);let x=useMemo(()=>[{id:"dashboard",label:"Inicio",icon:"fas fa-home",shortcut:"H"},{id:"equipos",label:"Equipos",icon:"fas fa-desktop",shortcut:"E"},{id:"sucursales",label:"Sucursales",icon:"fas fa-building",shortcut:"S"},{id:"fallas",label:"Fallas",icon:"fas fa-exclamation-triangle",shortcut:"F"}],[]),f=e=>{a(e),o(!1);let t=x.find(t=>t.id===e);t&&m(t.label)},b=()=>{p("SesiÃ³n cerrada correctamente"),t()};return(0,i.jsxs)("nav",{className:"bg-white shadow-lg border-b border-gray-200 transition-all duration-200 sticky top-0 z-50",role:"navigation","aria-label":"NavegaciÃ³n principal",children:[(0,i.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,i.jsxs)("div",{className:"flex justify-between h-14 md:h-16",children:[(0,i.jsx)("div",{className:"flex items-center min-w-0",children:(0,i.jsxs)("div",{className:"flex-shrink-0 flex items-center",children:[(0,i.jsx)("div",{className:"w-7 h-7 md:w-8 md:h-8 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center mr-2 md:mr-3 shadow-sm",role:"img","aria-label":"Logo de GostCAM",children:(0,i.jsx)("i",{className:"fas fa-camera text-white text-xs md:text-sm","aria-hidden":"true"})}),(0,i.jsx)("h1",{className:"text-lg md:text-xl font-bold text-gray-900 truncate",children:"GostCAM"})]})}),(0,i.jsx)("div",{className:"hidden md:flex md:items-center md:space-x-2 lg:space-x-4",role:"menubar","aria-label":"NavegaciÃ³n por secciones",children:x.map((t,s)=>(0,i.jsxs)("button",{onClick:()=>f(t.id),className:"relative px-3 lg:px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 group min-h-[44px] flex items-center ".concat(e.currentSection===t.id?"bg-blue-100 text-blue-700 shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),role:"menuitem","aria-current":e.currentSection===t.id?"page":void 0,"aria-describedby":"nav-hint-".concat(t.id),tabIndex:0===s?0:-1,title:"".concat(t.label," (Alt+").concat(t.shortcut,")"),children:[(0,i.jsx)("i",{className:"".concat(t.icon," mr-1.5 lg:mr-2 transition-transform group-hover:scale-110"),"aria-hidden":"true"}),(0,i.jsx)("span",{className:"hidden lg:inline",children:t.label}),(0,i.jsx)("span",{className:"lg:hidden sr-only",children:t.label}),(0,i.jsx)("span",{className:"lg:hidden","aria-hidden":"true",children:t.shortcut}),e.currentSection===t.id&&(0,i.jsx)("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-blue-500 rounded-full","aria-hidden":"true"}),(0,i.jsxs)("span",{id:"nav-hint-".concat(t.id),className:"sr-only",children:["Atajo de teclado: Alt + ",t.shortcut]})]},t.id))}),(0,i.jsxs)("div",{className:"hidden md:flex md:items-center md:space-x-2 lg:space-x-4",role:"region","aria-label":"InformaciÃ³n de usuario y acciones",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2 lg:space-x-3",role:"region","aria-label":"InformaciÃ³n del usuario actual",children:[(0,i.jsxs)("div",{className:"text-right hidden lg:block",children:[(0,i.jsx)("div",{className:"text-sm font-medium text-gray-900 truncate max-w-32","aria-label":"Usuario: ".concat(e.user.NombreUsuario),children:e.user.NombreUsuario}),(0,i.jsx)("div",{className:"text-xs text-gray-500 truncate","aria-label":"Nivel de acceso: ".concat(e.user.NivelNombre||"Nivel ".concat(e.user.NivelUsuario)),children:e.user.NivelNombre||"Nivel ".concat(e.user.NivelUsuario)})]}),(0,i.jsx)("div",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(r(e.user.NivelUsuario)," min-w-max"),role:"status","aria-label":"Rol de usuario: Administrador",children:"Administrador"})]}),(0,i.jsxs)("button",{onClick:b,className:"bg-red-500 hover:bg-red-600 text-white px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 min-h-[44px] flex items-center focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",title:"Cerrar SesiÃ³n (Ctrl+Q)","aria-label":"Cerrar sesiÃ³n","aria-describedby":"logout-hint",children:[(0,i.jsx)("i",{className:"fas fa-sign-out-alt lg:mr-2","aria-hidden":"true"}),(0,i.jsx)("span",{className:"hidden lg:inline",children:"Salir"}),(0,i.jsx)("span",{id:"logout-hint",className:"sr-only",children:"Atajo de teclado: Ctrl + Q"})]})]}),(0,i.jsx)("div",{className:"md:hidden flex items-center",children:(0,i.jsx)("button",{onClick:()=>o(!n),className:"text-gray-600 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 p-2 rounded-md transition-colors duration-200 min-h-[44px] min-w-[44px] flex items-center justify-center","aria-label":n?"Cerrar menÃº de navegaciÃ³n":"Abrir menÃº de navegaciÃ³n","aria-expanded":n,"aria-controls":"mobile-navigation-menu",children:(0,i.jsx)("i",{className:"fas ".concat(n?"fa-times":"fa-bars"," text-lg transition-transform duration-200 ").concat(n?"rotate-90":""),"aria-hidden":"true"})})})]})}),(0,i.jsx)("div",{id:"mobile-navigation-menu",className:"md:hidden transition-all duration-300 ease-in-out ".concat(n?"max-h-96 opacity-100":"max-h-0 opacity-0 overflow-hidden"),role:"menu","aria-label":"MenÃº de navegaciÃ³n mÃ³vil","aria-hidden":!n,children:(0,i.jsxs)("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3 bg-gray-50 border-t border-gray-200",children:[(0,i.jsx)("div",{className:"px-3 py-3 bg-white rounded-md mb-3 shadow-sm",role:"region","aria-label":"InformaciÃ³n del usuario",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,i.jsx)("div",{className:"text-sm font-medium text-gray-900 truncate","aria-label":"Usuario: ".concat(e.user.NombreUsuario),children:e.user.NombreUsuario}),(0,i.jsx)("div",{className:"text-xs text-gray-500 truncate","aria-label":"Correo: ".concat(e.user.Correo),children:e.user.Correo})]}),(0,i.jsx)("div",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(r(e.user.NivelUsuario)," ml-2 flex-shrink-0"),role:"status","aria-label":"Rol: Administrador",children:"Admin"})]})}),(0,i.jsx)("nav",{role:"menu","aria-label":"NavegaciÃ³n principal mÃ³vil",children:x.map((t,s)=>(0,i.jsxs)("button",{onClick:()=>f(t.id),className:"w-full text-left px-3 py-3 rounded-md text-sm font-medium transition-all duration-200 min-h-[48px] flex items-center relative focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1 ".concat(e.currentSection===t.id?"bg-blue-100 text-blue-700 shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-white"),role:"menuitem","aria-current":e.currentSection===t.id?"page":void 0,"aria-describedby":"mobile-nav-hint-".concat(t.id),tabIndex:0===s?0:-1,children:[(0,i.jsx)("i",{className:"".concat(t.icon," mr-3 w-4 text-center transition-transform hover:scale-110"),"aria-hidden":"true"}),(0,i.jsx)("span",{children:t.label}),e.currentSection===t.id&&(0,i.jsx)("div",{className:"absolute right-3 w-2 h-2 bg-blue-500 rounded-full","aria-hidden":"true"}),(0,i.jsxs)("span",{id:"mobile-nav-hint-".concat(t.id),className:"sr-only",children:["SecciÃ³n ",t.label,". Atajo: Alt + ",t.shortcut]})]},t.id))}),(0,i.jsxs)("button",{onClick:b,className:"w-full text-left px-3 py-3 rounded-md text-sm font-medium bg-red-500 text-white hover:bg-red-600 transition-colors duration-200 mt-3 min-h-[48px] flex items-center focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-1",role:"menuitem","aria-label":"Cerrar sesiÃ³n","aria-describedby":"mobile-logout-hint",children:[(0,i.jsx)("i",{className:"fas fa-sign-out-alt mr-3 w-4 text-center","aria-hidden":"true"}),"Cerrar SesiÃ³n",(0,i.jsx)("span",{id:"mobile-logout-hint",className:"sr-only",children:"Atajo de teclado: Ctrl + Q"})]}),(0,i.jsxs)("div",{className:"px-3 py-2 text-xs text-gray-500 border-t border-gray-200 mt-2",role:"region","aria-label":"Ayuda de navegaciÃ³n",children:[(0,i.jsx)("p",{className:"mb-1",children:"ðŸ’¡ Usa Tab para navegar"}),(0,i.jsx)("p",{children:"âŒ¨ï¸ Alt + letra para ir a secciÃ³n"})]})]})})]})}function g(){let[e,t]=(0,s.useState)([]),[i,r]=(0,s.useState)(!1),[n,o]=(0,s.useState)({paginaActual:1,totalPaginas:1,totalRegistros:0,hayAnterior:!1,haySiguiente:!1}),[l,c]=(0,s.useState)(null),[d,h]=(0,s.useState)(null),u=(0,s.useCallback)(async()=>{r(!0);try{let e=await a.apiService.get("/api/equipos");if(e.success){let i=Array.isArray(e.data)?e.data:[];t(i),e.pagination&&o(e.pagination)}}catch(e){console.error("Error cargando equipos:",e),t([])}finally{r(!1)}},[]),g=(0,s.useCallback)(async e=>{r(!0);try{let i=new URLSearchParams;e.texto&&""!==e.texto.trim()&&i.append("busqueda",e.texto.trim()),e.tipoEquipo&&""!==e.tipoEquipo&&i.append("tipoEquipo",e.tipoEquipo),e.estatus&&""!==e.estatus&&i.append("estatus",e.estatus),e.sucursal&&""!==e.sucursal&&i.append("sucursal",e.sucursal),e.usuarioAsignado&&""!==e.usuarioAsignado&&i.append("usuario",e.usuarioAsignado);let s=i.toString(),r=await a.apiService.get(s?"/api/equipos?".concat(s):"/api/equipos");if(!r.success)return t([]),[];{let e=Array.isArray(r.data)?r.data:[];return t(e),o({paginaActual:1,totalPaginas:1,totalRegistros:e.length,hayAnterior:!1,haySiguiente:!1}),e}}catch(e){return console.error("Error en bÃºsqueda:",e),t([]),[]}finally{r(!1)}},[]),m=(0,s.useCallback)(async e=>{r(!0);try{let t=await a.apiService.get("/api/equipos/".concat(e));t.success&&(h(t.data),c(e))}catch(e){console.error("Error cargando detalles:",e)}finally{r(!1)}},[]),p=(0,s.useCallback)(async e=>{r(!0);try{let t=await a.apiService.post("/api/equipos",e);if(t.success)return await u(),{success:!0,message:t.message};return{success:!1,message:t.error||"Error creando equipo"}}catch(e){return console.error("Error creando equipo:",e),{success:!1,message:"Error de conexiÃ³n"}}finally{r(!1)}},[u]),x=(0,s.useCallback)(async(e,t)=>{r(!0);try{let i=await a.apiService.put("/api/equipos/".concat(e),t);if(i.success)return await u(),{success:!0,message:i.message};return{success:!1,message:i.error||"Error actualizando equipo"}}catch(e){return console.error("Error actualizando equipo:",e),{success:!1,message:"Error de conexiÃ³n"}}finally{r(!1)}},[u]),f=(0,s.useCallback)(async e=>{r(!0);try{let t=await a.apiService.delete("/api/equipos/".concat(e));if(t.success)return await u(),{success:!0,message:t.message};return{success:!1,message:t.error||"Error eliminando equipo"}}catch(e){return console.error("Error eliminando equipo:",e),{success:!1,message:"Error de conexiÃ³n"}}finally{r(!1)}},[u]);return{equipos:e,loading:i,paginacion:n,equipoSeleccionado:l,detallesEquipo:d,cargarEquipos:u,buscarEquipos:g,verDetallesEquipo:m,crearEquipo:p,actualizarEquipo:x,eliminarEquipo:f,setEquipoSeleccionado:c,setDetallesEquipo:h}}e.s(["default",()=>a2],32077);let m=s.default.memo(e=>{let{onEquipoSelect:t,onVerDetalles:a,onEditarEquipo:r,onEliminarEquipo:n,onVerHistorial:o,onCambiarUbicacion:l,onMantenimiento:d}=e,{getStatusColor:h}=c(),{equipos:u,loading:m,cargarEquipos:p}=g(),[x,f]=(0,s.useState)([]);(0,s.useEffect)(()=>{p()},[p]);let b=(0,s.useCallback)((e,t)=>{f(i=>t?[...i,e]:i.filter(t=>t!==e))},[]),y=(0,s.useCallback)(e=>{f(e?u.map(e=>e.no_serie):[])},[u]);return m?(0,i.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,i.jsxs)("div",{className:"text-center py-8",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,i.jsx)("p",{className:"text-gray-600 mt-4",children:"Cargando equipos..."})]})}):(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,i.jsx)("div",{className:"overflow-x-auto",children:(0,i.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,i.jsx)("thead",{className:"bg-gray-50",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,i.jsx)("input",{type:"checkbox",checked:x.length===u.length&&u.length>0,onChange:e=>y(e.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"No. Serie"}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sucursal"}),(0,i.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),(0,i.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:m?(0,i.jsx)("tr",{children:(0,i.jsxs)("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500",children:[(0,i.jsx)("i",{className:"fas fa-spinner fa-spin mr-2"}),"Cargando equipos..."]})}):0===u.length?(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("i",{className:"fas fa-box-open text-4xl text-gray-300 mb-4"}),(0,i.jsx)("p",{children:"No se encontraron equipos"})]})})}):u.map(e=>(0,i.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,i.jsx)("input",{type:"checkbox",checked:x.includes(e.no_serie),onChange:t=>b(e.no_serie,t.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.no_serie}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.nombreEquipo}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,i.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.TipoEquipo})}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,i.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(h(e.EstatusEquipo)),children:e.EstatusEquipo})}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.SucursalActual}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm font-medium",children:(0,i.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,i.jsx)("button",{onClick:()=>null==a?void 0:a(e.no_serie),className:"text-blue-600 hover:text-blue-900",title:"Ver detalles",children:(0,i.jsx)("i",{className:"fas fa-eye"})}),(0,i.jsx)("button",{onClick:()=>null==r?void 0:r(e.no_serie),className:"text-yellow-600 hover:text-yellow-900",title:"Editar",children:(0,i.jsx)("i",{className:"fas fa-edit"})}),(0,i.jsx)("button",{onClick:()=>null==l?void 0:l(e.no_serie),className:"text-purple-600 hover:text-purple-900",title:"Cambiar ubicaciÃ³n",children:(0,i.jsx)("i",{className:"fas fa-exchange-alt"})}),(0,i.jsx)("button",{onClick:()=>null==n?void 0:n(e.no_serie),className:"text-red-600 hover:text-red-900",title:"Eliminar",children:(0,i.jsx)("i",{className:"fas fa-trash"})})]})})]},e.no_serie))})]})})}),x.length>0&&(0,i.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("span",{className:"text-blue-800 font-medium",children:[x.length," equipo(s) seleccionado(s)"]}),(0,i.jsx)("button",{onClick:()=>f([]),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Limpiar selecciÃ³n"})]})})]})});function p(){let[e,t]=(0,s.useState)([]),[i,r]=(0,s.useState)([]),[n,o]=(0,s.useState)([]),[l,c]=(0,s.useState)([]),[d,h]=(0,s.useState)(!1),u=(0,s.useCallback)(async()=>{try{let e=await a.apiService.get("/api/catalogos?tipo=tiposequipo");e.success&&Array.isArray(e.data)&&t(e.data)}catch(e){console.error("Error cargando tipos de equipo:",e),t([])}},[]),g=(0,s.useCallback)(async()=>{try{let e=await a.apiService.get("/api/catalogos?tipo=sucursales");e.success&&Array.isArray(e.data)&&r(e.data)}catch(e){console.error("Error cargando sucursales:",e),r([])}},[]),m=(0,s.useCallback)(async()=>{try{let e=await a.apiService.get("/api/catalogos?tipo=usuarios");e.success&&Array.isArray(e.data)&&o(e.data)}catch(e){console.error("Error cargando usuarios:",e),o([])}},[]),p=(0,s.useCallback)(async()=>{try{let e=await a.apiService.get("/api/catalogos?tipo=estatus");e.success&&Array.isArray(e.data)&&c(e.data)}catch(e){console.error("Error cargando estatus:",e),c([])}},[]),x=(0,s.useCallback)(async()=>{h(!0);try{console.log("ðŸ”„ Cargando catÃ¡logos..."),await Promise.all([u(),g(),m(),p()]),console.log("âœ… CatÃ¡logos cargados correctamente")}catch(e){console.error("âŒ Error cargando catÃ¡logos:",e)}finally{h(!1)}},[u,g,m,p]);return(0,s.useEffect)(()=>{x()},[x]),{tiposEquipo:e,sucursales:i,usuarios:n,estatusEquipo:l,loading:d,cargarTiposEquipo:u,cargarSucursales:g,cargarUsuarios:m,cargarEstatusEquipo:p,cargarTodosCatalogos:x}}function x(e){let{onResultados:t}=e,{getStatusColor:a}=c(),{equipos:r,loading:n,buscarEquipos:o,paginacion:l}=g(),{tiposEquipo:d,sucursales:h,estatusEquipo:u,usuarios:m}=p(),[x,f]=(0,s.useState)({texto:"",tipoEquipo:"",estatus:"",sucursal:"",usuarioAsignado:"",fechaAltaDesde:"",fechaAltaHasta:"",valorMinimo:"",valorMaximo:"",limite:50,pagina:1}),b=(e,t)=>{f(i=>({...i,[e]:t,pagina:1}))},y=async()=>{let e={...x,fechaAltaDesde:x.fechaAltaDesde,fechaAltaHasta:x.fechaAltaHasta};try{let i=await o(e);t&&t(i||[])}catch(e){console.error("Error en bÃºsqueda:",e)}};return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsx)("div",{className:"flex justify-between items-center",children:(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"BÃºsqueda Avanzada"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Filtros avanzados para encontrar equipos especÃ­ficos"})]})}),(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,i.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Criterios de BÃºsqueda"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Texto de bÃºsqueda"}),(0,i.jsx)("input",{type:"text",value:x.texto,onChange:e=>b("texto",e.target.value),placeholder:"Buscar en serie, nombre, tipo, estatus, sucursal, usuario...",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Equipo"}),(0,i.jsxs)("select",{value:x.tipoEquipo,onChange:e=>b("tipoEquipo",e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,i.jsx)("option",{value:"",children:"Todos los tipos"}),d.map(e=>(0,i.jsx)("option",{value:e.nombre,children:e.nombre},e.idTipoEquipo))]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estatus"}),(0,i.jsxs)("select",{value:x.estatus,onChange:e=>b("estatus",e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,i.jsx)("option",{value:"",children:"Todos los estatus"}),u.map(e=>(0,i.jsx)("option",{value:e.nombre,children:e.nombre},e.idEstatus))]})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sucursal"}),(0,i.jsxs)("select",{value:x.sucursal,onChange:e=>b("sucursal",e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,i.jsx)("option",{value:"",children:"Todas las sucursales"}),h.map(e=>(0,i.jsx)("option",{value:e.nombre,children:e.nombre},e.idCentro))]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Usuario Asignado"}),(0,i.jsxs)("select",{value:x.usuarioAsignado,onChange:e=>b("usuarioAsignado",e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,i.jsx)("option",{value:"",children:"Todos los usuarios"}),m.map(e=>(0,i.jsx)("option",{value:e.NombreUsuario,children:e.NombreUsuario},e.idUsuarios))]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"LÃ­mite de resultados"}),(0,i.jsxs)("select",{value:x.limite.toString(),onChange:e=>b("limite",e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,i.jsx)("option",{value:"20",children:"20 resultados"}),(0,i.jsx)("option",{value:"50",children:"50 resultados"}),(0,i.jsx)("option",{value:"100",children:"100 resultados"}),(0,i.jsx)("option",{value:"200",children:"200 resultados"})]})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha de Alta (Desde)"}),(0,i.jsx)("input",{type:"date",value:x.fechaAltaDesde,onChange:e=>b("fechaAltaDesde",e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha de Alta (Hasta)"}),(0,i.jsx)("input",{type:"date",value:x.fechaAltaHasta,onChange:e=>b("fechaAltaHasta",e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsxs)("div",{className:"flex space-x-3",children:[(0,i.jsxs)("button",{onClick:y,disabled:n,className:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 disabled:opacity-50",children:[(0,i.jsx)("i",{className:"fas fa-search mr-2"}),n?"Buscando...":"Buscar"]}),(0,i.jsxs)("button",{onClick:()=>{f({texto:"",tipoEquipo:"",estatus:"",sucursal:"",usuarioAsignado:"",fechaAltaDesde:"",fechaAltaHasta:"",valorMinimo:"",valorMaximo:"",limite:50,pagina:1})},className:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600",children:[(0,i.jsx)("i",{className:"fas fa-times mr-2"}),"Limpiar"]})]}),r.length>0&&(0,i.jsxs)("button",{onClick:()=>{if(0===r.length)return void alert("No hay resultados para exportar");let e=new Blob([["No. Serie,Nombre,Modelo,Tipo,Estatus,Sucursal,Usuario,Fecha Alta",...r.map(e=>[e.no_serie,'"'.concat(e.nombreEquipo,'"'),'"'.concat(e.modelo,'"'),'"'.concat(e.TipoEquipo,'"'),'"'.concat(e.EstatusEquipo,'"'),'"'.concat(e.SucursalActual,'"'),'"'.concat(e.UsuarioAsignado,'"'),e.fechaAlta].join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a"),i=URL.createObjectURL(e);t.setAttribute("href",i),t.setAttribute("download","equipos_busqueda_".concat(new Date().toISOString().split("T")[0],".csv")),t.style.visibility="hidden",document.body.appendChild(t),t.click(),document.body.removeChild(t)},className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700",children:[(0,i.jsx)("i",{className:"fas fa-download mr-2"}),"Exportar CSV"]})]})]}),r.length>0&&(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,i.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,i.jsxs)("h3",{className:"text-lg font-medium text-gray-900",children:["Resultados de BÃºsqueda (",l.totalRegistros," encontrados)"]})}),(0,i.jsx)("div",{className:"overflow-x-auto",children:(0,i.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,i.jsx)("thead",{className:"bg-gray-50",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Serie"}),(0,i.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Equipo"}),(0,i.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Tipo"}),(0,i.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Estatus"}),(0,i.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Sucursal"})]})}),(0,i.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(e=>(0,i.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,i.jsx)("td",{className:"px-4 py-2 text-sm font-medium text-gray-900",children:e.no_serie}),(0,i.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900",children:e.nombreEquipo}),(0,i.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900",children:e.TipoEquipo}),(0,i.jsx)("td",{className:"px-4 py-2",children:(0,i.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(a(e.EstatusEquipo)),children:e.EstatusEquipo})}),(0,i.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900",children:e.SucursalActual})]},e.no_serie))})]})})]})]})}m.displayName="EquiposListSimple";var f=e.i(97141);function b(e){let{onSuccess:t,onCancel:a,enableAutoSave:r=!1}=e,{tiposEquipo:n,sucursales:o,usuarios:l,estatusEquipo:c}=p(),[d,h]=(0,s.useState)(null),[u,g]=(0,s.useState)({no_serie:"",nombreEquipo:"",modelo:"",numeroActivo:"",idTipoEquipo:"",idEstatus:"1",idSucursal:"",idPosicion:"1",idUsuarios:"",valorEstimado:""}),m=(e,t)=>{g(i=>({...i,[e]:t}))},x=async e=>{e.preventDefault();try{(await fetch("/api/equipos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)})).ok?(h({tipo:"success",texto:"Equipo creado exitosamente"}),null==t||t()):h({tipo:"error",texto:"Error al crear el equipo"})}catch(e){h({tipo:"error",texto:"Error al crear el equipo"})}};return(0,i.jsx)("div",{className:"max-w-2xl mx-auto p-6",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Alta de Equipo"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Registra un nuevo equipo en el inventario"})]}),d&&(0,i.jsx)("div",{className:"p-4 rounded-md mb-4 ".concat("error"===d.tipo?"bg-red-50 text-red-700":"bg-green-50 text-green-700"),children:d.texto}),(0,i.jsxs)("form",{onSubmit:x,className:"space-y-4",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"NÃºmero de Serie *"}),(0,i.jsx)("input",{type:"text",value:u.no_serie,onChange:e=>m("no_serie",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del Equipo *"}),(0,i.jsx)("input",{type:"text",value:u.nombreEquipo,onChange:e=>m("nombreEquipo",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Modelo *"}),(0,i.jsx)("input",{type:"text",value:u.modelo,onChange:e=>m("modelo",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"NÃºmero de Activo"}),(0,i.jsx)("input",{type:"text",value:u.numeroActivo,onChange:e=>m("numeroActivo",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Equipo *"}),(0,i.jsxs)("select",{value:u.idTipoEquipo,onChange:e=>m("idTipoEquipo",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,i.jsx)("option",{value:"",children:"Seleccionar tipo..."}),n.map(e=>(0,i.jsx)("option",{value:e.idTipoEquipo,children:e.nombre},e.idTipoEquipo))]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sucursal *"}),(0,i.jsxs)("select",{value:u.idSucursal,onChange:e=>m("idSucursal",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,i.jsx)("option",{value:"",children:"Seleccionar sucursal..."}),o.map(e=>(0,i.jsx)("option",{value:e.idCentro,children:e.nombre},e.idCentro))]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Usuario Asignado *"}),(0,i.jsxs)("select",{value:u.idUsuarios,onChange:e=>m("idUsuarios",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,i.jsx)("option",{value:"",children:"Seleccionar usuario..."}),l.map(e=>(0,i.jsx)("option",{value:e.idUsuarios,children:e.NombreUsuario},e.idUsuarios))]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor Estimado"}),(0,i.jsx)("input",{type:"number",step:"0.01",value:u.valorEstimado,onChange:e=>m("valorEstimado",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,i.jsxs)("div",{className:"flex justify-end space-x-4 pt-6",children:[(0,i.jsx)(f.default,{type:"button",variant:"outline",onClick:a,children:"Cancelar"}),(0,i.jsx)(f.default,{type:"submit",variant:"primary",children:"Crear Equipo"})]})]})]})})}var y=e.i(18566);let v=e=>{let{equipoData:t,onSave:a,onCancel:r,isModal:n=!1}=e,o=(0,y.useRouter)(),[l,c]=(0,s.useState)({nombreEquipo:t.nombreEquipo||"",modelo:t.modelo||"",numeroActivo:t.numeroActivo||"",idTipoEquipo:"",idEstatus:"",idUsuarios:"",idPosicion:""}),[d,h]=(0,s.useState)([]),[u,g]=(0,s.useState)([]),[m,p]=(0,s.useState)([]),[x,f]=(0,s.useState)([]),[b,v]=(0,s.useState)(!1),[_,j]=(0,s.useState)(!1),[w,N]=(0,s.useState)(null),[k,M]=(0,s.useState)(null);(0,s.useEffect)(()=>{E()},[]);let E=async()=>{v(!0);try{let e=await fetch("/api/catalogos"),t=await e.json();t.success?(h(t.data.tiposEquipo||[]),g(t.data.estatusEquipo||[]),p(t.data.usuarios||[]),f(t.data.posiciones||[])):N("Error cargando catÃ¡logos")}catch(e){console.error("Error cargando catÃ¡logos:",e),N("Error de conexiÃ³n")}finally{v(!1)}},S=e=>{let{name:t,value:i}=e.target;c(e=>({...e,[t]:i})),N(null),M(null)},C=async e=>{if(e.preventDefault(),!l.nombreEquipo.trim())return void N("El nombre del equipo es requerido");if(!l.modelo.trim())return void N("El modelo es requerido");j(!0),N(null);try{let e={nombreEquipo:l.nombreEquipo,modelo:l.modelo,numeroActivo:l.numeroActivo,...l.idTipoEquipo&&""!==l.idTipoEquipo&&{idTipoEquipo:l.idTipoEquipo},...l.idEstatus&&""!==l.idEstatus&&{idEstatus:l.idEstatus},...l.idUsuarios&&""!==l.idUsuarios&&{idUsuarios:l.idUsuarios},...l.idPosicion&&""!==l.idPosicion&&{idPosicion:l.idPosicion}},i=await fetch("/api/equipos/".concat(t.no_serie),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await i.json();s.success?(M("Equipo actualizado exitosamente"),a&&s.data&&a(s.data),n||setTimeout(()=>{o.push("/equipos")},1500)):N(s.error||"Error actualizando el equipo")}catch(e){console.error("Error actualizando equipo:",e),N("Error de conexiÃ³n. Intente nuevamente.")}finally{j(!1)}};return b?(0,i.jsxs)("div",{className:"flex justify-center items-center p-8",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,i.jsx)("span",{className:"ml-2",children:"Cargando catÃ¡logos..."})]}):(0,i.jsxs)("div",{className:"".concat(n?"p-6":"max-w-4xl mx-auto p-6"),children:[(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Editar Equipo"}),(0,i.jsxs)("p",{className:"text-gray-600",children:["No. Serie: ",(0,i.jsx)("span",{className:"font-semibold",children:t.no_serie})]})]}),w&&(0,i.jsx)("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsx)("i",{className:"fas fa-exclamation-circle text-red-500 mr-2 mt-0.5"}),(0,i.jsx)("p",{className:"text-red-700",children:w})]})}),k&&(0,i.jsx)("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsx)("i",{className:"fas fa-check-circle text-green-500 mr-2 mt-0.5"}),(0,i.jsx)("p",{className:"text-green-700",children:k})]})}),(0,i.jsxs)("form",{onSubmit:C,className:"space-y-6",children:[(0,i.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"InformaciÃ³n BÃ¡sica"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre del Equipo *"}),(0,i.jsx)("input",{type:"text",name:"nombreEquipo",value:l.nombreEquipo,onChange:S,className:"w-full px-3 py-2 border border-gray-300 rounded-lg    bg-white text-gray-900   focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: Laptop HP ProBook",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Modelo *"}),(0,i.jsx)("input",{type:"text",name:"modelo",value:l.modelo,onChange:S,className:"w-full px-3 py-2 border border-gray-300 rounded-lg    bg-white text-gray-900   focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: HP-840-G8",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"NÃºmero de Activo"}),(0,i.jsx)("input",{type:"text",name:"numeroActivo",value:l.numeroActivo,onChange:S,className:"w-full px-3 py-2 border border-gray-300 rounded-lg    bg-white text-gray-900   focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: ACT-2024-001"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha de Alta"}),(0,i.jsx)("input",{type:"text",value:new Date(t.fechaAlta).toLocaleDateString(),disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg    bg-gray-100 text-gray-500"})]})]})]}),(0,i.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"ClasificaciÃ³n"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Equipo"}),(0,i.jsxs)("select",{name:"idTipoEquipo",value:l.idTipoEquipo,onChange:S,className:"w-full px-3 py-2 border border-gray-300 rounded-lg    bg-white text-gray-900   focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,i.jsx)("option",{value:"",children:"Seleccionar tipo..."}),d.map(e=>(0,i.jsx)("option",{value:e.id,children:e.nombre},e.id))]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estatus"}),(0,i.jsxs)("select",{name:"idEstatus",value:l.idEstatus,onChange:S,className:"w-full px-3 py-2 border border-gray-300 rounded-lg    bg-white text-gray-900   focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,i.jsx)("option",{value:"",children:"Seleccionar estatus..."}),u.map(e=>(0,i.jsx)("option",{value:e.id,children:e.nombre},e.id))]})]})]})]}),(0,i.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"AsignaciÃ³n"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Usuario Asignado"}),(0,i.jsxs)("select",{name:"idUsuarios",value:l.idUsuarios,onChange:S,className:"w-full px-3 py-2 border border-gray-300 rounded-lg    bg-white text-gray-900   focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,i.jsx)("option",{value:"",children:"Seleccionar usuario..."}),m.map(e=>(0,i.jsx)("option",{value:e.id,children:e.nombre},e.id))]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"PosiciÃ³n/Ãrea"}),(0,i.jsxs)("select",{name:"idPosicion",value:l.idPosicion,onChange:S,className:"w-full px-3 py-2 border border-gray-300 rounded-lg    bg-white text-gray-900   focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,i.jsx)("option",{value:"",children:"Seleccionar posiciÃ³n..."}),x.map(e=>(0,i.jsx)("option",{value:e.id,children:e.nombre},e.id))]})]})]})]}),(0,i.jsxs)("div",{className:"flex justify-end space-x-4 pt-6",children:[(0,i.jsx)("button",{type:"button",onClick:()=>{r?r():n||o.back()},disabled:_,className:"px-6 py-2 border border-gray-300 rounded-lg   text-gray-700 bg-white   hover:bg-gray-50    focus:ring-2 focus:ring-gray-500 focus:border-gray-500   disabled:opacity-50 disabled:cursor-not-allowed   transition-colors duration-200",children:"Cancelar"}),(0,i.jsx)("button",{type:"submit",disabled:_,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg   focus:ring-2 focus:ring-blue-500 focus:border-blue-500   disabled:opacity-50 disabled:cursor-not-allowed   transition-colors duration-200 flex items-center",children:_?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Guardando..."]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("i",{className:"fas fa-save mr-2"}),"Guardar Cambios"]})})]})]})]})};function _(e){return e+.5|0}let j=(e,t,i)=>Math.max(Math.min(e,i),t);function w(e){return j(_(2.55*e),0,255)}function N(e){return j(_(255*e),0,255)}function k(e){return j(_(e/2.55)/100,0,1)}function M(e){return j(_(100*e),0,100)}let E={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},S=[..."0123456789ABCDEF"],C=e=>S[15&e],A=e=>S[(240&e)>>4]+S[15&e],P=e=>(240&e)>>4==(15&e),D=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function T(e,t,i){let s=t*Math.min(i,1-i),a=function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return i-s*Math.max(Math.min(a-3,9-a,1),-1)};return[a(0),a(8),a(4)]}function O(e,t,i){let s=function(s){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(s+e/60)%6;return i-i*t*Math.max(Math.min(a,4-a,1),0)};return[s(5),s(3),s(1)]}function L(e,t,i){let s,a=T(e,1,.5);for(t+i>1&&(s=1/(t+i),t*=s,i*=s),s=0;s<3;s++)a[s]*=1-t-i,a[s]+=t;return a}function R(e){let t,i,s,a=e.r/255,r=e.g/255,n=e.b/255,o=Math.max(a,r,n),l=Math.min(a,r,n),c=(o+l)/2;o!==l&&(s=o-l,i=c>.5?s/(2-o-l):s/(o+l),t=60*(t=a===o?(r-n)/s+6*(r<n):r===o?(n-a)/s+2:(a-r)/s+4)+.5);return[0|t,i||0,c]}function q(e,t,i,s){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,i,s)).map(N)}function z(e){return(e%360+360)%360}let I={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},F={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"},V=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,B=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,H=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function W(e,t,i){if(e){let s=R(e);s[t]=Math.max(0,Math.min(s[t]+s[t]*i,0===t?360:1)),e.r=(s=q(T,s,void 0,void 0))[0],e.g=s[1],e.b=s[2]}}function U(e,t){return e?Object.assign(t||{},e):e}function Y(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=N(e[3]))):(t=U(e,{r:0,g:0,b:0,a:1})).a=N(t.a),t}class ${get valid(){return this._valid}get rgb(){var e=U(this._rgb);return e&&(e.a=k(e.a)),e}set rgb(e){this._rgb=Y(e)}rgbString(){var e;return this._valid?(e=this._rgb)&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(k(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")")):void 0}hexString(){var e,t;let i,s;return this._valid?(t=P((i=e=this._rgb).r)&&P(i.g)&&P(i.b)&&P(i.a)?C:A,e?"#"+t(e.r)+t(e.g)+t(e.b)+(s=e.a,s<255?t(s):""):void 0):void 0}hslString(){return this._valid?function(e){if(!e)return;let t=R(e),i=t[0],s=M(t[1]),a=M(t[2]);return e.a<255?"hsla(".concat(i,", ").concat(s,"%, ").concat(a,"%, ").concat(k(e.a),")"):"hsl(".concat(i,", ").concat(s,"%, ").concat(a,"%)")}(this._rgb):void 0}mix(e,t){if(e){let i,s=this.rgb,a=e.rgb,r=t===i?.5:t,n=2*r-1,o=s.a-a.a,l=((n*o==-1?n:(n+o)/(1+n*o))+1)/2;i=1-l,s.r=255&l*s.r+i*a.r+.5,s.g=255&l*s.g+i*a.g+.5,s.b=255&l*s.b+i*a.b+.5,s.a=r*s.a+(1-r)*a.a,this.rgb=s}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,i){let s=H(k(e.r)),a=H(k(e.g)),r=H(k(e.b));return{r:N(B(s+i*(H(k(t.r))-s))),g:N(B(a+i*(H(k(t.g))-a))),b:N(B(r+i*(H(k(t.b))-r))),a:e.a+i*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new $(this.rgb)}alpha(e){return this._rgb.a=N(e),this}clearer(e){let t=this._rgb;return t.a*=1-e,this}greyscale(){let e=this._rgb,t=_(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){let t=this._rgb;return t.a*=1+e,this}negate(){let e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return W(this._rgb,2,e),this}darken(e){return W(this._rgb,2,-e),this}saturate(e){return W(this._rgb,1,e),this}desaturate(e){return W(this._rgb,1,-e),this}rotate(e){var t,i;return t=this._rgb,(i=R(t))[0]=z(i[0]+e),t.r=(i=q(T,i,void 0,void 0))[0],t.g=i[1],t.b=i[2],this}constructor(e){let i;if(e instanceof $)return e;let s=typeof e;"object"===s?i=Y(e):"string"===s&&(i=function(e){var t,i=e.length;return"#"===e[0]&&(4===i||5===i?t={r:255&17*E[e[1]],g:255&17*E[e[2]],b:255&17*E[e[3]],a:5===i?17*E[e[4]]:255}:(7===i||9===i)&&(t={r:E[e[1]]<<4|E[e[2]],g:E[e[3]]<<4|E[e[4]],b:E[e[5]]<<4|E[e[6]],a:9===i?E[e[7]]<<4|E[e[8]]:255})),t}(e)||function(e){t||((t=function(){let e,t,i,s,a,r={},n=Object.keys(F),o=Object.keys(I);for(e=0;e<n.length;e++){for(t=0,s=a=n[e];t<o.length;t++)i=o[t],a=a.replace(i,I[i]);i=parseInt(F[s],16),r[a]=[i>>16&255,i>>8&255,255&i]}return r}()).transparent=[0,0,0,0]);let i=t[e.toLowerCase()];return i&&{r:i[0],g:i[1],b:i[2],a:4===i.length?i[3]:255}}(e)||function(e){return"r"===e.charAt(0)?function(e){let t,i,s,a=V.exec(e),r=255;if(a){if(a[7]!==t){let e=+a[7];r=a[8]?w(e):j(255*e,0,255)}return t=+a[1],i=+a[3],s=+a[5],t=255&(a[2]?w(t):j(t,0,255)),{r:t,g:i=255&(a[4]?w(i):j(i,0,255)),b:s=255&(a[6]?w(s):j(s,0,255)),a:r}}}(e):function(e){let t,i=D.exec(e),s=255;if(!i)return;i[5]!==t&&(s=i[6]?w(+i[5]):N(+i[5]));let a=z(+i[2]),r=i[3]/100,n=i[4]/100;return{r:(t="hwb"===i[1]?q(L,a,r,n):"hsv"===i[1]?q(O,a,r,n):q(T,a,r,n))[0],g:t[1],b:t[2],a:s}}(e)}(e)),this._rgb=i,this._valid=!!i}}function G(){}let X=(()=>{let e=0;return()=>e++})();function Z(e){return null==e}function K(e){if(Array.isArray&&Array.isArray(e))return!0;let t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function J(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function Q(e){return("number"==typeof e||e instanceof Number)&&isFinite(+e)}function ee(e,t){return Q(e)?e:t}function et(e,t){return void 0===e?t:e}let ei=(e,t)=>"string"==typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function es(e,t,i){if(e&&"function"==typeof e.call)return e.apply(i,t)}function ea(e,t,i,s){let a,r,n;if(K(e))if(r=e.length,s)for(a=r-1;a>=0;a--)t.call(i,e[a],a);else for(a=0;a<r;a++)t.call(i,e[a],a);else if(J(e))for(a=0,r=(n=Object.keys(e)).length;a<r;a++)t.call(i,e[n[a]],n[a])}function er(e,t){let i,s,a,r;if(!e||!t||e.length!==t.length)return!1;for(i=0,s=e.length;i<s;++i)if(a=e[i],r=t[i],a.datasetIndex!==r.datasetIndex||a.index!==r.index)return!1;return!0}function en(e){if(K(e))return e.map(en);if(J(e)){let t=Object.create(null),i=Object.keys(e),s=i.length,a=0;for(;a<s;++a)t[i[a]]=en(e[i[a]]);return t}return e}function eo(e){return -1===["__proto__","prototype","constructor"].indexOf(e)}function el(e,t,i,s){if(!eo(e))return;let a=t[e],r=i[e];J(a)&&J(r)?ec(a,r,s):t[e]=en(r)}function ec(e,t,i){let s,a=K(t)?t:[t],r=a.length;if(!J(e))return e;let n=(i=i||{}).merger||el;for(let t=0;t<r;++t){if(!J(s=a[t]))continue;let r=Object.keys(s);for(let t=0,a=r.length;t<a;++t)n(r[t],e,s,i)}return e}function ed(e,t){return ec(e,t,{merger:eh})}function eh(e,t,i){if(!eo(e))return;let s=t[e],a=i[e];J(s)&&J(a)?ed(s,a):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=en(a))}let eu={"":e=>e,x:e=>e.x,y:e=>e.y};function eg(e,t){return(eu[t]||(eu[t]=function(e){let t=function(e){let t=e.split("."),i=[],s="";for(let e of t)(s+=e).endsWith("\\")?s=s.slice(0,-1)+".":(i.push(s),s="");return i}(e);return e=>{for(let i of t){if(""===i)break;e=e&&e[i]}return e}}(t)))(e)}function em(e){return e.charAt(0).toUpperCase()+e.slice(1)}let ep=e=>void 0!==e,ex=e=>"function"==typeof e,ef=(e,t)=>{if(e.size!==t.size)return!1;for(let i of e)if(!t.has(i))return!1;return!0},eb=Math.PI,ey=2*eb,ev=ey+eb,e_=1/0,ej=eb/180,ew=eb/2,eN=eb/4,ek=2*eb/3,eM=Math.log10,eE=Math.sign;function eS(e,t,i){return Math.abs(e-t)<i}function eC(e){let t=Math.round(e),i=Math.pow(10,Math.floor(eM(e=eS(e,t,e/1e3)?t:e))),s=e/i;return(s<=1?1:s<=2?2:s<=5?5:10)*i}function eA(e){return"symbol"!=typeof e&&("object"!=typeof e||null===e||!!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e))&&!isNaN(parseFloat(e))&&isFinite(e)}function eP(e,t,i){let s,a,r;for(s=0,a=e.length;s<a;s++)isNaN(r=e[s][i])||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function eD(e){return eb/180*e}function eT(e){if(!Q(e))return;let t=1,i=0;for(;Math.round(e*t)/t!==e;)t*=10,i++;return i}function eO(e,t){let i=t.x-e.x,s=t.y-e.y,a=Math.sqrt(i*i+s*s),r=Math.atan2(s,i);return r<-.5*eb&&(r+=ey),{angle:r,distance:a}}function eL(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function eR(e,t){return(e-t+ev)%ey-eb}function eq(e){return(e%ey+ey)%ey}function ez(e,t,i,s){let a=eq(e),r=eq(t),n=eq(i),o=eq(r-a),l=eq(n-a),c=eq(a-r),d=eq(a-n);return a===r||a===n||s&&r===n||o>l&&c<d}function eI(e,t,i){return Math.max(t,Math.min(i,e))}function eF(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,i)-s&&e<=Math.max(t,i)+s}function eV(e,t,i){let s;i=i||(i=>e[i]<t);let a=e.length-1,r=0;for(;a-r>1;)i(s=r+a>>1)?r=s:a=s;return{lo:r,hi:a}}let eB=(e,t,i,s)=>eV(e,i,s?s=>{let a=e[s][t];return a<i||a===i&&e[s+1][t]===i}:s=>e[s][t]<i),eH=(e,t,i)=>eV(e,i,s=>e[s][t]>=i),eW=["push","pop","shift","splice","unshift"];function eU(e,t){let i=e._chartjs;if(!i)return;let s=i.listeners,a=s.indexOf(t);-1!==a&&s.splice(a,1),s.length>0||(eW.forEach(t=>{delete e[t]}),delete e._chartjs)}function eY(e){let t=new Set(e);return t.size===e.length?e:Array.from(t)}let e$="undefined"==typeof window?function(e){return e()}:window.requestAnimationFrame;function eG(e,t){let i=[],s=!1;return function(){for(var a=arguments.length,r=Array(a),n=0;n<a;n++)r[n]=arguments[n];i=r,s||(s=!0,e$.call(window,()=>{s=!1,e.apply(t,i)}))}}let eX=e=>"start"===e?"left":"end"===e?"right":"center",eZ=(e,t,i)=>"start"===e?t:"end"===e?i:(t+i)/2;function eK(e,t,i){let s=t.length,a=0,r=s;if(e._sorted){let{iScale:n,vScale:o,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,d=n.axis,{min:h,max:u,minDefined:g,maxDefined:m}=n.getUserBounds();if(g){if(a=Math.min(eB(l,d,h).lo,i?s:eB(t,d,n.getPixelForValue(h)).lo),c){let e=l.slice(0,a+1).reverse().findIndex(e=>!Z(e[o.axis]));a-=Math.max(0,e)}a=eI(a,0,s-1)}if(m){let e=Math.max(eB(l,n.axis,u,!0).hi+1,i?0:eB(t,d,n.getPixelForValue(u),!0).hi+1);if(c){let t=l.slice(e-1).findIndex(e=>!Z(e[o.axis]));e+=Math.max(0,t)}r=eI(e,a,s)-a}else r=s-a}return{start:a,count:r}}function eJ(e){let{xScale:t,yScale:i,_scaleRanges:s}=e,a={xmin:t.min,xmax:t.max,ymin:i.min,ymax:i.max};if(!s)return e._scaleRanges=a,!0;let r=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==i.min||s.ymax!==i.max;return Object.assign(s,a),r}let eQ=e=>0===e||1===e,e0=(e,t,i)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*ey/i)),e1=(e,t,i)=>Math.pow(2,-10*e)*Math.sin((e-t)*ey/i)+1,e2={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*ew)+1,easeOutSine:e=>Math.sin(e*ew),easeInOutSine:e=>-.5*(Math.cos(eb*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>eQ(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(-Math.pow(2,-10*(2*e-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>eQ(e)?e:e0(e,.075,.3),easeOutElastic:e=>eQ(e)?e:e1(e,.075,.3),easeInOutElastic:e=>eQ(e)?e:e<.5?.5*e0(2*e,.1125,.45):.5+.5*e1(2*e-1,.1125,.45),easeInBack:e=>e*e*(2.70158*e-1.70158),easeOutBack:e=>(e-=1)*e*(2.70158*e+1.70158)+1,easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-e2.easeOutBounce(1-e),easeOutBounce:e=>e<.36363636363636365?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375,easeInOutBounce:e=>e<.5?.5*e2.easeInBounce(2*e):.5*e2.easeOutBounce(2*e-1)+.5};function e5(e){if(e&&"object"==typeof e){let t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function e6(e){return e5(e)?e:new $(e)}function e3(e){return e5(e)?e:new $(e).saturate(.5).darken(.1).hexString()}let e4=["x","y","borderWidth","radius","tension"],e8=["color","borderColor","backgroundColor"],e7=new Map;function e9(e,t,i){return(function(e,t){let i=e+JSON.stringify(t=t||{}),s=e7.get(i);return s||(s=new Intl.NumberFormat(e,t),e7.set(i,s)),s})(t,i).format(e)}let te={values:e=>K(e)?e:""+e,numeric(e,t,i){let s;if(0===e)return"0";let a=this.chart.options.locale,r=e;if(i.length>1){var n,o;let t,a=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(a<1e-4||a>1e15)&&(s="scientific"),n=e,Math.abs(t=(o=i).length>3?o[2].value-o[1].value:o[1].value-o[0].value)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),r=t}let l=eM(Math.abs(r)),c=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),d={notation:s,minimumFractionDigits:c,maximumFractionDigits:c};return Object.assign(d,this.options.ticks.format),e9(e,a,d)},logarithmic(e,t,i){return 0===e?"0":[1,2,3,5,10,15].includes(i[t].significand||e/Math.pow(10,Math.floor(eM(e))))||t>.8*i.length?te.numeric.call(this,e,t,i):""}};var tt={formatters:te};let ti=Object.create(null),ts=Object.create(null);function ta(e,t){if(!t)return e;let i=t.split(".");for(let t=0,s=i.length;t<s;++t){let s=i[t];e=e[s]||(e[s]=Object.create(null))}return e}function tr(e,t,i){return"string"==typeof t?ec(ta(e,t),i):ec(ta(e,""),t)}var tn=new class{set(e,t){return tr(this,e,t)}get(e){return ta(this,e)}describe(e,t){return tr(ts,e,t)}override(e,t){return tr(ti,e,t)}route(e,t,i,s){let a=ta(this,e),r=ta(this,i),n="_"+t;Object.defineProperties(a,{[n]:{value:a[t],writable:!0},[t]:{enumerable:!0,get(){let e=this[n],t=r[s];return J(e)?Object.assign({},t,e):et(e,t)},set(e){this[n]=e}}})}apply(e){e.forEach(e=>e(this))}constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>e3(t.backgroundColor),this.hoverBorderColor=(e,t)=>e3(t.borderColor),this.hoverColor=(e,t)=>e3(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}}({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:e8},numbers:{type:"number",properties:e4}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:tt.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function to(e,t,i,s,a){let r=t[a];return r||(r=t[a]=e.measureText(a).width,i.push(a)),r>s&&(s=r),s}function tl(e,t,i){let s=e.currentDevicePixelRatio,a=0!==i?Math.max(i/2,.5):0;return Math.round((t-a)*s)/s+a}function tc(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function td(e,t,i,s){th(e,t,i,s,null)}function th(e,t,i,s,a){let r,n,o,l,c,d,h,u,g=t.pointStyle,m=t.rotation,p=t.radius,x=(m||0)*ej;if(g&&"object"==typeof g&&("[object HTMLImageElement]"===(r=g.toString())||"[object HTMLCanvasElement]"===r)){e.save(),e.translate(i,s),e.rotate(x),e.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),e.restore();return}if(!isNaN(p)&&!(p<=0)){switch(e.beginPath(),g){default:a?e.ellipse(i,s,a/2,p,0,0,ey):e.arc(i,s,p,0,ey),e.closePath();break;case"triangle":d=a?a/2:p,e.moveTo(i+Math.sin(x)*d,s-Math.cos(x)*p),x+=ek,e.lineTo(i+Math.sin(x)*d,s-Math.cos(x)*p),x+=ek,e.lineTo(i+Math.sin(x)*d,s-Math.cos(x)*p),e.closePath();break;case"rectRounded":c=.516*p,n=Math.cos(x+eN)*(l=p-c),h=Math.cos(x+eN)*(a?a/2-c:l),o=Math.sin(x+eN)*l,u=Math.sin(x+eN)*(a?a/2-c:l),e.arc(i-h,s-o,c,x-eb,x-ew),e.arc(i+u,s-n,c,x-ew,x),e.arc(i+h,s+o,c,x,x+ew),e.arc(i-u,s+n,c,x+ew,x+eb),e.closePath();break;case"rect":if(!m){l=Math.SQRT1_2*p,d=a?a/2:l,e.rect(i-d,s-l,2*d,2*l);break}x+=eN;case"rectRot":h=Math.cos(x)*(a?a/2:p),n=Math.cos(x)*p,o=Math.sin(x)*p,u=Math.sin(x)*(a?a/2:p),e.moveTo(i-h,s-o),e.lineTo(i+u,s-n),e.lineTo(i+h,s+o),e.lineTo(i-u,s+n),e.closePath();break;case"crossRot":x+=eN;case"cross":h=Math.cos(x)*(a?a/2:p),n=Math.cos(x)*p,o=Math.sin(x)*p,u=Math.sin(x)*(a?a/2:p),e.moveTo(i-h,s-o),e.lineTo(i+h,s+o),e.moveTo(i+u,s-n),e.lineTo(i-u,s+n);break;case"star":h=Math.cos(x)*(a?a/2:p),n=Math.cos(x)*p,o=Math.sin(x)*p,u=Math.sin(x)*(a?a/2:p),e.moveTo(i-h,s-o),e.lineTo(i+h,s+o),e.moveTo(i+u,s-n),e.lineTo(i-u,s+n),x+=eN,h=Math.cos(x)*(a?a/2:p),n=Math.cos(x)*p,o=Math.sin(x)*p,u=Math.sin(x)*(a?a/2:p),e.moveTo(i-h,s-o),e.lineTo(i+h,s+o),e.moveTo(i+u,s-n),e.lineTo(i-u,s+n);break;case"line":n=a?a/2:Math.cos(x)*p,o=Math.sin(x)*p,e.moveTo(i-n,s-o),e.lineTo(i+n,s+o);break;case"dash":e.moveTo(i,s),e.lineTo(i+Math.cos(x)*(a?a/2:p),s+Math.sin(x)*p);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function tu(e,t,i){return i=i||.5,!t||e&&e.x>t.left-i&&e.x<t.right+i&&e.y>t.top-i&&e.y<t.bottom+i}function tg(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function tm(e){e.restore()}function tp(e,t,i,s,a){if(!t)return e.lineTo(i.x,i.y);if("middle"===a){let s=(t.x+i.x)/2;e.lineTo(s,t.y),e.lineTo(s,i.y)}else"after"===a!=!!s?e.lineTo(t.x,i.y):e.lineTo(i.x,t.y);e.lineTo(i.x,i.y)}function tx(e,t,i,s){if(!t)return e.lineTo(i.x,i.y);e.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?i.cp2x:i.cp1x,s?i.cp2y:i.cp1y,i.x,i.y)}function tf(e,t,i,s,a){let r,n,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},l=K(t)?t:[t],c=o.strokeWidth>0&&""!==o.strokeColor;for(e.save(),e.font=a.string,o.translation&&e.translate(o.translation[0],o.translation[1]),Z(o.rotation)||e.rotate(o.rotation),o.color&&(e.fillStyle=o.color),o.textAlign&&(e.textAlign=o.textAlign),o.textBaseline&&(e.textBaseline=o.textBaseline),r=0;r<l.length;++r)n=l[r],o.backdrop&&function(e,t){let i=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=i}(e,o.backdrop),c&&(o.strokeColor&&(e.strokeStyle=o.strokeColor),Z(o.strokeWidth)||(e.lineWidth=o.strokeWidth),e.strokeText(n,i,s,o.maxWidth)),e.fillText(n,i,s,o.maxWidth),function(e,t,i,s,a){if(a.strikethrough||a.underline){let r=e.measureText(s),n=t-r.actualBoundingBoxLeft,o=t+r.actualBoundingBoxRight,l=i-r.actualBoundingBoxAscent,c=i+r.actualBoundingBoxDescent,d=a.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=a.decorationWidth||2,e.moveTo(n,d),e.lineTo(o,d),e.stroke()}}(e,i,s,n,o),s+=Number(a.lineHeight);e.restore()}function tb(e,t){let{x:i,y:s,w:a,h:r,radius:n}=t;e.arc(i+n.topLeft,s+n.topLeft,n.topLeft,1.5*eb,eb,!0),e.lineTo(i,s+r-n.bottomLeft),e.arc(i+n.bottomLeft,s+r-n.bottomLeft,n.bottomLeft,eb,ew,!0),e.lineTo(i+a-n.bottomRight,s+r),e.arc(i+a-n.bottomRight,s+r-n.bottomRight,n.bottomRight,ew,0,!0),e.lineTo(i+a,s+n.topRight),e.arc(i+a-n.topRight,s+n.topRight,n.topRight,0,-ew,!0),e.lineTo(i+n.topLeft,s)}let ty=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,tv=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/,t_=e=>+e||0;function tj(e,t){let i={},s=J(t),a=s?Object.keys(t):t,r=J(e)?s?i=>et(e[i],e[t[i]]):t=>e[t]:()=>e;for(let e of a)i[e]=t_(r(e));return i}function tw(e){return tj(e,{top:"y",right:"x",bottom:"y",left:"x"})}function tN(e){return tj(e,["topLeft","topRight","bottomLeft","bottomRight"])}function tk(e){let t=tw(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function tM(e,t){e=e||{},t=t||tn.font;let i=et(e.size,t.size);"string"==typeof i&&(i=parseInt(i,10));let s=et(e.style,t.style);s&&!(""+s).match(tv)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);let a={family:et(e.family,t.family),lineHeight:function(e,t){let i=(""+e).match(ty);if(!i||"normal"===i[1])return 1.2*t;switch(e=+i[2],i[3]){case"px":return e;case"%":e/=100}return t*e}(et(e.lineHeight,t.lineHeight),i),size:i,style:s,weight:et(e.weight,t.weight),string:""};return a.string=!a||Z(a.size)||Z(a.family)?null:(a.style?a.style+" ":"")+(a.weight?a.weight+" ":"")+a.size+"px "+a.family,a}function tE(e,t,i,s){let a,r,n,o=!0;for(a=0,r=e.length;a<r;++a)if(void 0!==(n=e[a])&&(void 0!==t&&"function"==typeof n&&(n=n(t),o=!1),void 0!==i&&K(n)&&(n=n[i%n.length],o=!1),void 0!==n))return s&&!o&&(s.cacheable=!1),n}function tS(e,t){return Object.assign(Object.create(e),t)}function tC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0],r=i||e;return void 0===s&&(s=tz("_fallback",e)),new Proxy({[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:s,_getTarget:a,override:i=>tC([i,...e],t,r,s)},{deleteProperty:(t,i)=>(delete t[i],delete t._keys,delete e[0][i],!0),get:(i,s)=>tO(i,s,()=>(function(e,t,i,s){let a;for(let r of t)if(void 0!==(a=tz(tD(r,e),i)))return tT(e,a)?tR(i,s,e,a):a})(s,t,e,i)),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>tI(e).includes(t),ownKeys:e=>tI(e),set(e,t,i){let s=e._storage||(e._storage=a());return e[t]=s[t]=i,delete e._keys,!0}})}function tA(e,t,i,s){return new Proxy({_cacheable:!1,_proxy:e,_context:t,_subProxy:i,_stack:new Set,_descriptors:tP(e,s),setContext:t=>tA(e,t,i,s),override:a=>tA(e.override(a),t,i,s)},{deleteProperty:(t,i)=>(delete t[i],delete e[i],!0),get:(e,t,i)=>tO(e,t,()=>(function(e,t,i){let{_proxy:s,_context:a,_subProxy:r,_descriptors:n}=e,o=s[t];return ex(o)&&n.isScriptable(t)&&(o=function(e,t,i,s){let{_proxy:a,_context:r,_subProxy:n,_stack:o}=i;if(o.has(e))throw Error("Recursion detected: "+Array.from(o).join("->")+"->"+e);o.add(e);let l=t(r,n||s);return o.delete(e),tT(e,l)&&(l=tR(a._scopes,a,e,l)),l}(t,o,e,i)),K(o)&&o.length&&(o=function(e,t,i,s){let{_proxy:a,_context:r,_subProxy:n,_descriptors:o}=i;if(void 0!==r.index&&s(e))return t[r.index%t.length];if(J(t[0])){let i=t,s=a._scopes.filter(e=>e!==i);for(let l of(t=[],i)){let i=tR(s,a,e,l);t.push(tA(i,r,n&&n[e],o))}}return t}(t,o,e,n.isIndexable)),tT(t,o)&&(o=tA(o,a,r&&r[t],n)),o})(e,t,i)),getOwnPropertyDescriptor:(t,i)=>t._descriptors.allKeys?Reflect.has(e,i)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,i),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,i)=>Reflect.has(e,i),ownKeys:()=>Reflect.ownKeys(e),set:(t,i,s)=>(e[i]=s,delete t[i],!0)})}function tP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0},{_scriptable:i=t.scriptable,_indexable:s=t.indexable,_allKeys:a=t.allKeys}=e;return{allKeys:a,scriptable:i,indexable:s,isScriptable:ex(i)?i:()=>i,isIndexable:ex(s)?s:()=>s}}let tD=(e,t)=>e?e+em(t):t,tT=(e,t)=>J(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function tO(e,t,i){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];let s=i();return e[t]=s,s}let tL=(e,t)=>!0===e?t:"string"==typeof e?eg(t,e):void 0;function tR(e,t,i,s){var a;let r=t._rootScopes,n=(a=t._fallback,ex(a)?a(i,s):a),o=[...e,...r],l=new Set;l.add(s);let c=tq(l,o,i,n||i,s);return null!==c&&(void 0===n||n===i||null!==(c=tq(l,o,n,c,s)))&&tC(Array.from(l),[""],r,n,()=>(function(e,t,i){let s=e._getTarget();t in s||(s[t]={});let a=s[t];return K(a)&&J(i)?i:a||{}})(t,i,s))}function tq(e,t,i,s,a){for(;i;)i=function(e,t,i,s,a){for(let n of t){let t=tL(i,n);if(t){var r;e.add(t);let n=(r=t._fallback,ex(r)?r(i,a):r);if(void 0!==n&&n!==i&&n!==s)return n}else if(!1===t&&void 0!==s&&i!==s)return null}return!1}(e,t,i,s,a);return i}function tz(e,t){for(let i of t){if(!i)continue;let t=i[e];if(void 0!==t)return t}}function tI(e){let t=e._keys;return t||(t=e._keys=function(e){let t=new Set;for(let i of e)for(let e of Object.keys(i).filter(e=>!e.startsWith("_")))t.add(e);return Array.from(t)}(e._scopes)),t}function tF(e,t,i,s){let a,r,n,{iScale:o}=e,{key:l="r"}=this._parsing,c=Array(s);for(a=0;a<s;++a)n=t[r=a+i],c[a]={r:o.parse(eg(n,l),r)};return c}let tV=Number.EPSILON||1e-14,tB=(e,t)=>t<e.length&&!e[t].skip&&e[t],tH=e=>"x"===e?"y":"x";function tW(e,t,i){return Math.max(Math.min(e,i),t)}function tU(){return"undefined"!=typeof window&&"undefined"!=typeof document}function tY(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function t$(e,t,i){let s;return"string"==typeof e?(s=parseInt(e,10),-1!==e.indexOf("%")&&(s=s/100*t.parentNode[i])):s=e,s}let tG=e=>e.ownerDocument.defaultView.getComputedStyle(e,null),tX=["top","right","bottom","left"];function tZ(e,t,i){let s={};i=i?"-"+i:"";for(let a=0;a<4;a++){let r=tX[a];s[r]=parseFloat(e[t+"-"+r+i])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}function tK(e,t){if("native"in e)return e;let{canvas:i,currentDevicePixelRatio:s}=t,a=tG(i),r="border-box"===a.boxSizing,n=tZ(a,"padding"),o=tZ(a,"border","width"),{x:l,y:c,box:d}=function(e,t){let i,s,a,r=e.touches,n=r&&r.length?r[0]:e,{offsetX:o,offsetY:l}=n,c=!1;if(a=e.target,(o>0||l>0)&&(!a||!a.shadowRoot))i=o,s=l;else{let e=t.getBoundingClientRect();i=n.clientX-e.left,s=n.clientY-e.top,c=!0}return{x:i,y:s,box:c}}(e,i),h=n.left+(d&&o.left),u=n.top+(d&&o.top),{width:g,height:m}=t;return r&&(g-=n.width+o.width,m-=n.height+o.height),{x:Math.round((l-h)/g*i.width/s),y:Math.round((c-u)/m*i.height/s)}}let tJ=e=>Math.round(10*e)/10;function tQ(e,t,i){let s=t||1,a=Math.floor(e.height*s),r=Math.floor(e.width*s);e.height=Math.floor(e.height),e.width=Math.floor(e.width);let n=e.canvas;return n.style&&(i||!n.style.height&&!n.style.width)&&(n.style.height="".concat(e.height,"px"),n.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==s||n.height!==a||n.width!==r)&&(e.currentDevicePixelRatio=s,n.height=a,n.width=r,e.ctx.setTransform(s,0,0,s,0,0),!0)}let t0=function(){let e=!1;try{let t={get passive(){return e=!0,!1}};tU()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(e){}return e}();function t1(e,t){let i=tG(e).getPropertyValue(t),s=i&&i.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function t2(e,t,i,s){return{x:e.x+i*(t.x-e.x),y:e.y+i*(t.y-e.y)}}function t5(e,t,i,s){return{x:e.x+i*(t.x-e.x),y:"middle"===s?i<.5?e.y:t.y:"after"===s?i<1?e.y:t.y:i>0?t.y:e.y}}function t6(e,t,i,s){let a={x:e.cp2x,y:e.cp2y},r={x:t.cp1x,y:t.cp1y},n=t2(e,a,i),o=t2(a,r,i),l=t2(r,t,i),c=t2(n,o,i),d=t2(o,l,i);return t2(c,d,i)}function t3(e,t,i){var s;return e?(s=i,{x:e=>t+t+s-e,setWidth(e){s=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function t4(e,t){let i,s;("ltr"===t||"rtl"===t)&&(s=[(i=e.canvas.style).getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",t,"important"),e.prevTextDirection=s)}function t8(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function t7(e){return"angle"===e?{between:ez,compare:eR,normalize:eq}:{between:eF,compare:(e,t)=>e-t,normalize:e=>e}}function t9(e){let{start:t,end:i,count:s,loop:a,style:r}=e;return{start:t%s,end:i%s,loop:a&&(i-t+1)%s==0,style:r}}function ie(e,t,i){let s,a,r;if(!i)return[e];let{property:n,start:o,end:l}=i,c=t.length,{compare:d,between:h,normalize:u}=t7(n),{start:g,end:m,loop:p,style:x}=function(e,t,i){let s,{property:a,start:r,end:n}=i,{between:o,normalize:l}=t7(a),c=t.length,{start:d,end:h,loop:u}=e;if(u){for(d+=c,h+=c,s=0;s<c&&o(l(t[d%c][a]),r,n);++s)d--,h--;d%=c,h%=c}return h<d&&(h+=c),{start:d,end:h,loop:u,style:e.style}}(e,t,i),f=[],b=!1,y=null,v=()=>b||h(o,r,s)&&0!==d(o,r),_=()=>!b||0===d(l,s)||h(l,r,s);for(let e=g,i=g;e<=m;++e)(a=t[e%c]).skip||(s=u(a[n]))!==r&&(b=h(s,o,l),null===y&&v()&&(y=0===d(s,o)?e:i),null!==y&&_()&&(f.push(t9({start:y,end:e,loop:p,count:c,style:x})),y=null),i=e,r=s);return null!==y&&f.push(t9({start:y,end:m,loop:p,count:c,style:x})),f}function it(e,t){let i=[],s=e.segments;for(let a=0;a<s.length;a++){let r=ie(s[a],e.points,t);r.length&&i.push(...r)}return i}function ii(e,t,i,s){return s&&s.setContext&&i?function(e,t,i,s){let a=e._chart.getContext(),r=is(e.options),{_datasetIndex:n,options:{spanGaps:o}}=e,l=i.length,c=[],d=r,h=t[0].start,u=h;function g(e,t,s,a){let r=o?-1:1;if(e!==t){for(e+=l;i[e%l].skip;)e-=r;for(;i[t%l].skip;)t+=r;e%l!=t%l&&(c.push({start:e%l,end:t%l,loop:s,style:a}),d=a,h=t%l)}}for(let e of t){let t,r=i[(h=o?h:e.start)%l];for(u=h+1;u<=e.end;u++){let o=i[u%l];(function(e,t){if(!t)return!1;let i=[],s=function(e,t){return e5(t)?(i.includes(t)||i.push(t),i.indexOf(t)):t};return JSON.stringify(e,s)!==JSON.stringify(t,s)})(t=is(s.setContext(tS(a,{type:"segment",p0:r,p1:o,p0DataIndex:(u-1)%l,p1DataIndex:u%l,datasetIndex:n}))),d)&&g(h,u-1,e.loop,d),r=o,d=t}h<u-1&&g(h,u-1,e.loop,d)}return c}(e,t,i,s):t}function is(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function ia(e,t,i){return e.options.clip?e[i]:t[i]}function ir(e,t){let i=t._clip;if(i.disabled)return!1;let s=function(e,t){let{xScale:i,yScale:s}=e;return i&&s?{left:ia(i,t,"left"),right:ia(i,t,"right"),top:ia(s,t,"top"),bottom:ia(s,t,"bottom")}:t}(t,e.chartArea);return{left:!1===i.left?0:s.left-(!0===i.left?0:i.left),right:!1===i.right?e.width:s.right+(!0===i.right?0:i.right),top:!1===i.top?0:s.top-(!0===i.top?0:i.top),bottom:!1===i.bottom?e.height:s.bottom+(!0===i.bottom?0:i.bottom)}}var io=new class{_notify(e,t,i,s){let a=t.listeners[s],r=t.duration;a.forEach(s=>s({chart:e,initial:t.initial,numSteps:r,currentStep:Math.min(i-t.start,r)}))}_refresh(){this._request||(this._running=!0,this._request=e$.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach((i,s)=>{let a;if(!i.running||!i.items.length)return;let r=i.items,n=r.length-1,o=!1;for(;n>=0;--n)(a=r[n])._active?(a._total>i.duration&&(i.duration=a._total),a.tick(e),o=!0):(r[n]=r[r.length-1],r.pop());o&&(s.draw(),this._notify(s,i,e,"progress")),r.length||(i.running=!1,this._notify(s,i,e,"complete"),i.initial=!1),t+=r.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){let t=this._charts,i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){let t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((e,t)=>Math.max(e,t._duration),0),this._refresh())}running(e){if(!this._running)return!1;let t=this._charts.get(e);return!!t&&!!t.running&&!!t.items.length}stop(e){let t=this._charts.get(e);if(!t||!t.items.length)return;let i=t.items,s=i.length-1;for(;s>=0;--s)i[s].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}};let il="transparent",ic={boolean:(e,t,i)=>i>.5?t:e,color(e,t,i){let s=e6(e||il),a=s.valid&&e6(t||il);return a&&a.valid?a.mix(s,i).hexString():t},number:(e,t,i)=>e+(t-e)*i};class id{active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);let s=this._target[this._prop],a=i-this._start,r=this._duration-a;this._start=i,this._duration=Math.floor(Math.max(r,e.duration)),this._total+=a,this._loop=!!e.loop,this._to=tE([e.to,t,s,e.from]),this._from=tE([e.from,s,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){let t,i=e-this._start,s=this._duration,a=this._prop,r=this._from,n=this._loop,o=this._to;if(this._active=r!==o&&(n||i<s),!this._active){this._target[a]=o,this._notify(!0);return}if(i<0){this._target[a]=r;return}t=i/s%2,t=n&&t>1?2-t:t,t=this._easing(Math.min(1,Math.max(0,t))),this._target[a]=this._fn(r,o,t)}wait(){let e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){let t=e?"res":"rej",i=this._promises||[];for(let e=0;e<i.length;e++)i[e][t]()}constructor(e,t,i,s){let a=t[i];s=tE([e.to,s,a,e.from]);let r=tE([e.from,a,s]);this._active=!0,this._fn=e.fn||ic[e.type||typeof r],this._easing=e2[e.easing]||e2.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=r,this._to=s,this._promises=void 0}}class ih{configure(e){if(!J(e))return;let t=Object.keys(tn.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{let a=e[s];if(!J(a))return;let r={};for(let e of t)r[e]=a[e];(K(a.properties)&&a.properties||[s]).forEach(e=>{e!==s&&i.has(e)||i.set(e,r)})})}_animateOptions(e,t){let i=t.options,s=function(e,t){if(!t)return;let i=e.options;if(!i){e.options=t;return}return i.$shared&&(e.options=i=Object.assign({},i,{$shared:!1,$animations:{}})),i}(e,i);if(!s)return[];let a=this._createAnimations(s,i);return i.$shared&&(function(e,t){let i=[],s=Object.keys(t);for(let t=0;t<s.length;t++){let a=e[s[t]];a&&a.active()&&i.push(a.wait())}return Promise.all(i)})(e.options.$animations,i).then(()=>{e.options=i},()=>{}),a}_createAnimations(e,t){let i,s=this._properties,a=[],r=e.$animations||(e.$animations={}),n=Object.keys(t),o=Date.now();for(i=n.length-1;i>=0;--i){let l=n[i];if("$"===l.charAt(0))continue;if("options"===l){a.push(...this._animateOptions(e,t));continue}let c=t[l],d=r[l],h=s.get(l);if(d)if(h&&d.active()){d.update(h,c,o);continue}else d.cancel();if(!h||!h.duration){e[l]=c;continue}r[l]=d=new id(h,e,l,c),a.push(d)}return a}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);let i=this._createAnimations(e,t);if(i.length)return io.add(this._chart,i),!0}constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}}function iu(e,t){let i=e&&e.options||{},s=i.reverse,a=void 0===i.min?t:0,r=void 0===i.max?t:0;return{start:s?r:a,end:s?a:r}}function ig(e,t){let i,s,a=[],r=e._getSortedDatasetMetas(t);for(i=0,s=r.length;i<s;++i)a.push(r[i].index);return a}function im(e,t,i){let s,a,r,n,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=e.keys,c="single"===o.mode;if(null===t)return;let d=!1;for(s=0,a=l.length;s<a;++s){if((r=+l[s])===i){if(d=!0,o.all)continue;break}Q(n=e.values[r])&&(c||0===t||eE(t)===eE(n))&&(t+=n)}return d||o.all?t:0}function ip(e,t){let i=e&&e.options.stacked;return i||void 0===i&&void 0!==t.stack}function ix(e,t,i,s){for(let a of t.getMatchingVisibleMetas(s).reverse()){let t=e[a.index];if(i&&t>0||!i&&t<0)return a.index}return null}function ib(e,t){let i,{chart:s,_cachedMeta:a}=e,r=s._stacks||(s._stacks={}),{iScale:n,vScale:o,index:l}=a,c=n.axis,d=o.axis,h="".concat(n.id,".").concat(o.id,".").concat(a.stack||a.type),u=t.length;for(let e=0;e<u;++e){let s=t[e],{[c]:n,[d]:u}=s;(i=(s._stacks||(s._stacks={}))[d]=function(e,t,i){let s=e[t]||(e[t]={});return s[i]||(s[i]={})}(r,h,n))[l]=u,i._top=ix(i,o,!0,a.type),i._bottom=ix(i,o,!1,a.type),(i._visualValues||(i._visualValues={}))[l]=u}}function iy(e,t){let i=e.scales;return Object.keys(i).filter(e=>i[e].axis===t).shift()}function iv(e,t){let i=e.controller.index,s=e.vScale&&e.vScale.axis;if(s)for(let a of t=t||e._parsed){let e=a._stacks;if(!e||void 0===e[s]||void 0===e[s][i])return;delete e[s][i],void 0!==e[s]._visualValues&&void 0!==e[s]._visualValues[i]&&delete e[s]._visualValues[i]}}let i_=e=>"reset"===e||"none"===e,ij=(e,t)=>t?e:Object.assign({},e);class iw{initialize(){let e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=ip(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&iv(this._cachedMeta),this.index=e}linkScales(){let e=this.chart,t=this._cachedMeta,i=this.getDataset(),s=(e,t,i,s)=>"x"===e?t:"r"===e?s:i,a=t.xAxisID=et(i.xAxisID,iy(e,"x")),r=t.yAxisID=et(i.yAxisID,iy(e,"y")),n=t.rAxisID=et(i.rAxisID,iy(e,"r")),o=t.indexAxis,l=t.iAxisID=s(o,a,r,n),c=t.vAxisID=s(o,r,a,n);t.xScale=this.getScaleForId(a),t.yScale=this.getScaleForId(r),t.rScale=this.getScaleForId(n),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){let t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){let e=this._cachedMeta;this._data&&eU(this._data,this),e._stacked&&iv(e)}_dataCheck(){let e=this.getDataset(),t=e.data||(e.data=[]),i=this._data;if(J(t)){let e=this._cachedMeta;this._data=function(e,t){let i,s,a,{iScale:r,vScale:n}=t,o="x"===r.axis?"x":"y",l="x"===n.axis?"x":"y",c=Object.keys(e),d=Array(c.length);for(i=0,s=c.length;i<s;++i)a=c[i],d[i]={[o]:a,[l]:e[a]};return d}(t,e)}else if(i!==t){if(i){eU(i,this);let e=this._cachedMeta;iv(e),e._parsed=[]}t&&Object.isExtensible(t)&&function(e,t){if(e._chartjs)return e._chartjs.listeners.push(t);Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),eW.forEach(t=>{let i="_onData"+em(t),s=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];let n=s.apply(this,a);return e._chartjs.listeners.forEach(e=>{"function"==typeof e[i]&&e[i](...a)}),n}})})}(t,this),this._syncList=[],this._data=t}}addElements(){let e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){let t=this._cachedMeta,i=this.getDataset(),s=!1;this._dataCheck();let a=t._stacked;t._stacked=ip(t.vScale,t),t.stack!==i.stack&&(s=!0,iv(t),t.stack=i.stack),this._resyncElements(e),(s||a!==t._stacked)&&(ib(this,t._parsed),t._stacked=ip(t.vScale,t))}configure(){let e=this.chart.config,t=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){let i,s,a,{_cachedMeta:r,_data:n}=this,{iScale:o,_stacked:l}=r,c=o.axis,d=0===e&&t===n.length||r._sorted,h=e>0&&r._parsed[e-1];if(!1===this._parsing)r._parsed=n,r._sorted=!0,a=n;else{a=K(n[e])?this.parseArrayData(r,n,e,t):J(n[e])?this.parseObjectData(r,n,e,t):this.parsePrimitiveData(r,n,e,t);let o=()=>null===s[c]||h&&s[c]<h[c];for(i=0;i<t;++i)r._parsed[i+e]=s=a[i],d&&(o()&&(d=!1),h=s);r._sorted=d}l&&ib(this,a)}parsePrimitiveData(e,t,i,s){let a,r,{iScale:n,vScale:o}=e,l=n.axis,c=o.axis,d=n.getLabels(),h=n===o,u=Array(s);for(a=0;a<s;++a)r=a+i,u[a]={[l]:h||n.parse(d[r],r),[c]:o.parse(t[r],r)};return u}parseArrayData(e,t,i,s){let a,r,n,{xScale:o,yScale:l}=e,c=Array(s);for(a=0;a<s;++a)n=t[r=a+i],c[a]={x:o.parse(n[0],r),y:l.parse(n[1],r)};return c}parseObjectData(e,t,i,s){let a,r,n,{xScale:o,yScale:l}=e,{xAxisKey:c="x",yAxisKey:d="y"}=this._parsing,h=Array(s);for(a=0;a<s;++a)n=t[r=a+i],h[a]={x:o.parse(eg(n,c),r),y:l.parse(eg(n,d),r)};return h}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,i){let s=this.chart,a=this._cachedMeta,r=t[e.axis];return im({keys:ig(s,!0),values:t._stacks[e.axis]._visualValues},r,a.index,{mode:i})}updateRangeFromParsed(e,t,i,s){let a=i[t.axis],r=null===a?NaN:a,n=s&&i._stacks[t.axis];s&&n&&(s.values=n,r=im(s,a,this._cachedMeta.index)),e.min=Math.min(e.min,r),e.max=Math.max(e.max,r)}getMinMax(e,t){let i,s,a,r=this._cachedMeta,n=r._parsed,o=r._sorted&&e===r.iScale,l=n.length,c=this._getOtherScale(e),d=(a=this.chart,t&&!r.hidden&&r._stacked&&{keys:ig(a,!0),values:null}),h={min:1/0,max:-1/0},{min:u,max:g}=function(e){let{min:t,max:i,minDefined:s,maxDefined:a}=e.getUserBounds();return{min:s?t:-1/0,max:a?i:1/0}}(c);function m(){let t=(s=n[i])[c.axis];return!Q(s[e.axis])||u>t||g<t}for(i=0;i<l&&(m()||(this.updateRangeFromParsed(h,e,s,d),!o));++i);if(o){for(i=l-1;i>=0;--i)if(!m()){this.updateRangeFromParsed(h,e,s,d);break}}return h}getAllParsedValues(e){let t,i,s,a=this._cachedMeta._parsed,r=[];for(t=0,i=a.length;t<i;++t)Q(s=a[t][e.axis])&&r.push(s);return r}getMaxOverflow(){return!1}getLabelAndValue(e){let t=this._cachedMeta,i=t.iScale,s=t.vScale,a=this.getParsed(e);return{label:i?""+i.getLabelForValue(a[i.axis]):"",value:s?""+s.getLabelForValue(a[s.axis]):""}}_update(e){var t;let i,s,a,r,n=this._cachedMeta;this.update(e||"default"),J(t=et(this.options.clip,function(e,t,i){if(!1===i)return!1;let s=iu(e,i),a=iu(t,i);return{top:a.end,right:s.end,bottom:a.start,left:s.start}}(n.xScale,n.yScale,this.getMaxOverflow())))?(i=t.top,s=t.right,a=t.bottom,r=t.left):i=s=a=r=t,n._clip={top:i,right:s,bottom:a,left:r,disabled:!1===t}}update(e){}draw(){let e,t=this._ctx,i=this.chart,s=this._cachedMeta,a=s.data||[],r=i.chartArea,n=[],o=this._drawStart||0,l=this._drawCount||a.length-o,c=this.options.drawActiveElementsOnTop;for(s.dataset&&s.dataset.draw(t,r,o,l),e=o;e<o+l;++e){let i=a[e];i.hidden||(i.active&&c?n.push(i):i.draw(t,r))}for(e=0;e<n.length;++e)n[e].draw(t,r)}getStyle(e,t){let i=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,t,i){var s,a;let r,n=this.getDataset();if(e>=0&&e<this._cachedMeta.data.length){let t=this._cachedMeta.data[e];(r=t.$context||(s=this.getContext(),t.$context=tS(s,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"}))).parsed=this.getParsed(e),r.raw=n.data[e],r.index=r.dataIndex=e}else(r=this.$context||(this.$context=tS(this.chart.getContext(),{active:!1,dataset:void 0,datasetIndex:a=this.index,index:a,mode:"default",type:"dataset"}))).dataset=n,r.index=r.datasetIndex=this.index;return r.active=!!t,r.mode=i,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",i=arguments.length>2?arguments[2]:void 0,s="active"===t,a=this._cachedDataOpts,r=e+"-"+t,n=a[r],o=this.enableOptionSharing&&ep(i);if(n)return ij(n,o);let l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),d=l.getOptionScopes(this.getDataset(),c),h=Object.keys(tn.elements[e]),u=()=>this.getContext(i,s,t),g=l.resolveNamedOptions(d,h,u,s?["".concat(e,"Hover"),"hover",e,""]:[e,""]);return g.$shared&&(g.$shared=o,a[r]=Object.freeze(ij(g,o))),g}_resolveAnimations(e,t,i){let s,a=this.chart,r=this._cachedDataOpts,n="animation-".concat(t),o=r[n];if(o)return o;if(!1!==a.options.animation){let a=this.chart.config,r=a.datasetAnimationScopeKeys(this._type,t),n=a.getOptionScopes(this.getDataset(),r);s=a.createResolver(n,this.getContext(e,i,t))}let l=new ih(a,s&&s.animations);return s&&s._cacheable&&(r[n]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||i_(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){let i=this.resolveDataElementOptions(e,t),s=this._sharedOptions,a=this.getSharedOptions(i),r=this.includeOptions(t,a)||a!==s;return this.updateSharedOptions(a,t,i),{sharedOptions:a,includeOptions:r}}updateElement(e,t,i,s){i_(s)?Object.assign(e,i):this._resolveAnimations(t,s).update(e,i)}updateSharedOptions(e,t,i){e&&!i_(t)&&this._resolveAnimations(void 0,t).update(e,i)}_setStyle(e,t,i,s){e.active=s;let a=this.getStyle(t,s);this._resolveAnimations(t,i,s).update(e,{options:!s&&this.getSharedOptions(a)||a})}removeHoverStyle(e,t,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,t,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){let t=this._data,i=this._cachedMeta.data;for(let[e,t,i]of this._syncList)this[e](t,i);this._syncList=[];let s=i.length,a=t.length,r=Math.min(a,s);r&&this.parse(0,r),a>s?this._insertElements(s,a-s,e):a<s&&this._removeElements(a,s-a)}_insertElements(e,t){let i,s=!(arguments.length>2)||void 0===arguments[2]||arguments[2],a=this._cachedMeta,r=a.data,n=e+t,o=e=>{for(e.length+=t,i=e.length-1;i>=n;i--)e[i]=e[i-t]};for(o(r),i=e;i<n;++i)r[i]=new this.dataElementType;this._parsing&&o(a._parsed),this.parse(e,t),s&&this.updateElements(r,e,t,"reset")}updateElements(e,t,i,s){}_removeElements(e,t){let i=this._cachedMeta;if(this._parsing){let s=i._parsed.splice(e,t);i._stacked&&iv(i,s)}i.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{let[t,i,s]=e;this[t](i,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){let e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);let i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}}function iN(e,t,i,s){return K(e)?!function(e,t,i,s){let a=i.parse(e[0],s),r=i.parse(e[1],s),n=Math.min(a,r),o=Math.max(a,r),l=n,c=o;Math.abs(n)>Math.abs(o)&&(l=o,c=n),t[i.axis]=c,t._custom={barStart:l,barEnd:c,start:a,end:r,min:n,max:o}}(e,t,i,s):t[i.axis]=i.parse(e,s),t}function ik(e,t,i,s){let a,r,n,o,l=e.iScale,c=e.vScale,d=l.getLabels(),h=l===c,u=[];for(a=i,r=i+s;a<r;++a)o=t[a],(n={})[l.axis]=h||l.parse(d[a],a),u.push(iN(o,n,c,a));return u}function iM(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function iE(e,t,i,s){var a,r,n;return s?iS((a=e,r=t,n=i,e=a===r?n:a===n?r:a),i,t):iS(e,t,i)}function iS(e,t,i){return"start"===e?t:"end"===e?i:e}(0,d._)(iw,"defaults",{}),(0,d._)(iw,"datasetElementType",null),(0,d._)(iw,"dataElementType",null);class iC extends iw{parsePrimitiveData(e,t,i,s){return ik(e,t,i,s)}parseArrayData(e,t,i,s){return ik(e,t,i,s)}parseObjectData(e,t,i,s){let a,r,n,o,{iScale:l,vScale:c}=e,{xAxisKey:d="x",yAxisKey:h="y"}=this._parsing,u="x"===l.axis?d:h,g="x"===c.axis?d:h,m=[];for(a=i,r=i+s;a<r;++a)o=t[a],(n={})[l.axis]=l.parse(eg(o,u),a),m.push(iN(eg(o,g),n,c,a));return m}updateRangeFromParsed(e,t,i,s){super.updateRangeFromParsed(e,t,i,s);let a=i._custom;a&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,a.min),e.max=Math.max(e.max,a.max))}getMaxOverflow(){return 0}getLabelAndValue(e){let{iScale:t,vScale:i}=this._cachedMeta,s=this.getParsed(e),a=s._custom,r=iM(a)?"["+a.start+", "+a.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+t.getLabelForValue(s[t.axis]),value:r}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(e){let t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,i,s){let a="reset"===s,{index:r,_cachedMeta:{vScale:n}}=this,o=n.getBasePixel(),l=n.isHorizontal(),c=this._getRuler(),{sharedOptions:d,includeOptions:h}=this._getSharedOptions(t,s);for(let u=t;u<t+i;u++){let t=this.getParsed(u),i=a||Z(t[n.axis])?{base:o,head:o}:this._calculateBarValuePixels(u),g=this._calculateBarIndexPixels(u,c),m=(t._stacks||{})[n.axis],p={horizontal:l,base:i.base,enableBorderRadius:!m||iM(t._custom)||r===m._top||r===m._bottom,x:l?i.head:g.center,y:l?g.center:i.head,height:l?g.size:Math.abs(i.size),width:l?Math.abs(i.size):g.size};h&&(p.options=d||this.resolveDataElementOptions(u,e[u].active?"active":s));let x=p.options||e[u].options;!function(e,t,i,s){let a,r,n,o,l,c=t.borderSkipped,d={};if(!c){e.borderSkipped=d;return}if(!0===c){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:h,end:u,reverse:g,top:m,bottom:p}=(e.horizontal?(a=e.base>e.x,r="left",n="right"):(a=e.base<e.y,r="bottom",n="top"),a?(o="end",l="start"):(o="start",l="end"),{start:r,end:n,reverse:a,top:o,bottom:l});"middle"===c&&i&&(e.enableBorderRadius=!0,(i._top||0)===s?c=m:(i._bottom||0)===s?c=p:(d[iE(p,h,u,g)]=!0,c=m)),d[iE(c,h,u,g)]=!0,e.borderSkipped=d}(p,x,m,r),function(e,t,i){let{inflateAmount:s}=t;e.inflateAmount="auto"===s?.33*(1===i):s}(p,x,c.ratio),this.updateElement(e[u],u,p,s)}}_getStacks(e,t){let{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(e=>e.controller.options.grouped),a=i.options.stacked,r=[],n=this._cachedMeta.controller.getParsed(t),o=n&&n[i.axis],l=e=>{let t=e._parsed.find(e=>e[i.axis]===o),s=t&&t[e.vScale.axis];if(Z(s)||isNaN(s))return!0};for(let i of s)if(!(void 0!==t&&l(i))&&((!1===a||-1===r.indexOf(i.stack)||void 0===a&&void 0===i.stack)&&r.push(i.stack),i.index===e))break;return r.length||r.push(void 0),r}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){let e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(i=>e[i].axis===t).shift()}_getAxis(){let e={},t=this.getFirstScaleIdForIndexAxis();for(let i of this.chart.data.datasets)e[et("x"===this.chart.options.indexAxis?i.xAxisID:i.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,i){let s=this._getStacks(e,i),a=void 0!==t?s.indexOf(t):-1;return -1===a?s.length-1:a}_getRuler(){let e,t,i=this.options,s=this._cachedMeta,a=s.iScale,r=[];for(e=0,t=s.data.length;e<t;++e)r.push(a.getPixelForValue(this.getParsed(e)[a.axis],e));let n=i.barThickness;return{min:n||function(e){let t,i,s,a,r=e.iScale,n=function(e,t){if(!e._cache.$bar){let i=e.getMatchingVisibleMetas(t),s=[];for(let t=0,a=i.length;t<a;t++)s=s.concat(i[t].controller.getAllParsedValues(e));e._cache.$bar=eY(s.sort((e,t)=>e-t))}return e._cache.$bar}(r,e.type),o=r._length,l=()=>{32767!==s&&-32768!==s&&(ep(a)&&(o=Math.min(o,Math.abs(s-a)||o)),a=s)};for(t=0,i=n.length;t<i;++t)s=r.getPixelForValue(n[t]),l();for(t=0,a=void 0,i=r.ticks.length;t<i;++t)s=r.getPixelForTick(t),l();return o}(s),pixels:r,start:a._startPixel,end:a._endPixel,stackCount:this._getStackCount(),scale:a,grouped:i.grouped,ratio:n?1:i.categoryPercentage*i.barPercentage}}_calculateBarValuePixels(e){let t,i,{_cachedMeta:{vScale:s,_stacked:a,index:r},options:{base:n,minBarLength:o}}=this,l=n||0,c=this.getParsed(e),d=c._custom,h=iM(d),u=c[s.axis],g=0,m=a?this.applyStack(s,c,a):u;m!==u&&(g=m-u,m=u),h&&(u=d.barStart,m=d.barEnd-d.barStart,0!==u&&eE(u)!==eE(d.barEnd)&&(g=0),g+=u);let p=Z(n)||h?g:n,x=s.getPixelForValue(p);if(Math.abs(i=(t=this.chart.getDataVisibility(e)?s.getPixelForValue(g+m):x)-x)<o){var f;i=(0!==(f=i)?eE(f):(s.isHorizontal()?1:-1)*(s.min>=l?1:-1))*o,u===l&&(x-=i/2);let e=s.getPixelForDecimal(0),n=s.getPixelForDecimal(1),d=Math.min(e,n);t=(x=Math.max(Math.min(x,Math.max(e,n)),d))+i,a&&!h&&(c._stacks[s.axis]._visualValues[r]=s.getValueForPixel(t)-s.getValueForPixel(x))}if(x===s.getPixelForValue(l)){let e=eE(i)*s.getLineWidthForValue(l)/2;x+=e,i-=e}return{size:i,base:x,head:t,center:t+i/2}}_calculateBarIndexPixels(e,t){let i,s,a=t.scale,r=this.options,n=r.skipNull,o=et(r.maxBarThickness,1/0),l=this._getAxisCount();if(t.grouped){let a=n?this._getStackCount(e):t.stackCount,c="flex"===r.barThickness?function(e,t,i,s){let a=t.pixels,r=a[e],n=e>0?a[e-1]:null,o=e<a.length-1?a[e+1]:null,l=i.categoryPercentage;null===n&&(n=r-(null===o?t.end-t.start:o-r)),null===o&&(o=r+r-n);let c=r-(r-Math.min(n,o))/2*l;return{chunk:Math.abs(o-n)/2*l/s,ratio:i.barPercentage,start:c}}(e,t,r,a*l):function(e,t,i,s){let a,r,n=i.barThickness;return Z(n)?(a=t.min*i.categoryPercentage,r=i.barPercentage):(a=n*s,r=1),{chunk:a/s,ratio:r,start:t.pixels[e]-a/2}}(e,t,r,a*l),d="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,h=this._getAxis().indexOf(et(d,this.getFirstScaleIdForIndexAxis())),u=this._getStackIndex(this.index,this._cachedMeta.stack,n?e:void 0)+h;i=c.start+c.chunk*u+c.chunk/2,s=Math.min(o,c.chunk*c.ratio)}else i=a.getPixelForValue(this.getParsed(e)[a.axis],e),s=Math.min(o,t.min*t.ratio);return{base:i-s/2,head:i+s/2,center:i,size:s}}draw(){let e=this._cachedMeta,t=e.vScale,i=e.data,s=i.length,a=0;for(;a<s;++a)null===this.getParsed(a)[t.axis]||i[a].hidden||i[a].draw(this._ctx)}}(0,d._)(iC,"id","bar"),(0,d._)(iC,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),(0,d._)(iC,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class iA extends iw{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,i,s){let a=super.parsePrimitiveData(e,t,i,s);for(let e=0;e<a.length;e++)a[e]._custom=this.resolveDataElementOptions(e+i).radius;return a}parseArrayData(e,t,i,s){let a=super.parseArrayData(e,t,i,s);for(let e=0;e<a.length;e++){let s=t[i+e];a[e]._custom=et(s[2],this.resolveDataElementOptions(e+i).radius)}return a}parseObjectData(e,t,i,s){let a=super.parseObjectData(e,t,i,s);for(let e=0;e<a.length;e++){let s=t[i+e];a[e]._custom=et(s&&s.r&&+s.r,this.resolveDataElementOptions(e+i).radius)}return a}getMaxOverflow(){let e=this._cachedMeta.data,t=0;for(let i=e.length-1;i>=0;--i)t=Math.max(t,e[i].size(this.resolveDataElementOptions(i))/2);return t>0&&t}getLabelAndValue(e){let t=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:a}=t,r=this.getParsed(e),n=s.getLabelForValue(r.x),o=a.getLabelForValue(r.y),l=r._custom;return{label:i[e]||"",value:"("+n+", "+o+(l?", "+l:"")+")"}}update(e){let t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,i,s){let a="reset"===s,{iScale:r,vScale:n}=this._cachedMeta,{sharedOptions:o,includeOptions:l}=this._getSharedOptions(t,s),c=r.axis,d=n.axis;for(let h=t;h<t+i;h++){let t=e[h],i=!a&&this.getParsed(h),u={},g=u[c]=a?r.getPixelForDecimal(.5):r.getPixelForValue(i[c]),m=u[d]=a?n.getBasePixel():n.getPixelForValue(i[d]);u.skip=isNaN(g)||isNaN(m),l&&(u.options=o||this.resolveDataElementOptions(h,t.active?"active":s),a&&(u.options.radius=0)),this.updateElement(t,h,u,s)}}resolveDataElementOptions(e,t){let i=this.getParsed(e),s=super.resolveDataElementOptions(e,t);s.$shared&&(s=Object.assign({},s,{$shared:!1}));let a=s.radius;return"active"!==t&&(s.radius=0),s.radius+=et(i&&i._custom,a),s}}(0,d._)(iA,"id","bubble"),(0,d._)(iA,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),(0,d._)(iA,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class iP extends iw{linkScales(){}parse(e,t){let i=this.getDataset().data,s=this._cachedMeta;if(!1===this._parsing)s._parsed=i;else{let a,r,n=e=>+i[e];if(J(i[e])){let{key:e="value"}=this._parsing;n=t=>+eg(i[t],e)}for(a=e,r=e+t;a<r;++a)s._parsed[a]=n(a)}}_getRotation(){return eD(this.options.rotation-90)}_getCircumference(){return eD(this.options.circumference)}_getRotationExtents(){let e=ey,t=-ey;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){let s=this.chart.getDatasetMeta(i).controller,a=s._getRotation(),r=s._getCircumference();e=Math.min(e,a),t=Math.max(t,a+r)}return{rotation:e,circumference:t-e}}update(e){let t,{chartArea:i}=this.chart,s=this._cachedMeta,a=s.data,r=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,n=Math.max((Math.min(i.width,i.height)-r)/2,0),o=Math.min((t=this.options.cutout,"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100:t/n),1),l=this._getRingWeight(this.index),{circumference:c,rotation:d}=this._getRotationExtents(),{ratioX:h,ratioY:u,offsetX:g,offsetY:m}=function(e,t,i){let s=1,a=1,r=0,n=0;if(t<ey){let o=e+t,l=Math.cos(e),c=Math.sin(e),d=Math.cos(o),h=Math.sin(o),u=(t,s,a)=>ez(t,e,o,!0)?1:Math.max(s,s*i,a,a*i),g=(t,s,a)=>ez(t,e,o,!0)?-1:Math.min(s,s*i,a,a*i),m=u(0,l,d),p=u(ew,c,h),x=g(eb,l,d),f=g(eb+ew,c,h);s=(m-x)/2,a=(p-f)/2,r=-(m+x)/2,n=-(p+f)/2}return{ratioX:s,ratioY:a,offsetX:r,offsetY:n}}(d,c,o),p=Math.max(Math.min((i.width-r)/h,(i.height-r)/u)/2,0),x=ei(this.options.radius,p),f=Math.max(x*o,0),b=(x-f)/this._getVisibleDatasetWeightTotal();this.offsetX=g*x,this.offsetY=m*x,s.total=this.calculateTotal(),this.outerRadius=x-b*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-b*l,0),this.updateElements(a,0,a.length,e)}_circumference(e,t){let i=this.options,s=this._cachedMeta,a=this._getCircumference();return t&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||null===s._parsed[e]||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*a/ey)}updateElements(e,t,i,s){let a,r="reset"===s,n=this.chart,o=n.chartArea,l=n.options.animation,c=(o.left+o.right)/2,d=(o.top+o.bottom)/2,h=r&&l.animateScale,u=h?0:this.innerRadius,g=h?0:this.outerRadius,{sharedOptions:m,includeOptions:p}=this._getSharedOptions(t,s),x=this._getRotation();for(a=0;a<t;++a)x+=this._circumference(a,r);for(a=t;a<t+i;++a){let t=this._circumference(a,r),i=e[a],n={x:c+this.offsetX,y:d+this.offsetY,startAngle:x,endAngle:x+t,circumference:t,outerRadius:g,innerRadius:u};p&&(n.options=m||this.resolveDataElementOptions(a,i.active?"active":s)),x+=t,this.updateElement(i,a,n,s)}}calculateTotal(){let e,t=this._cachedMeta,i=t.data,s=0;for(e=0;e<i.length;e++){let a=t._parsed[e];null!==a&&!isNaN(a)&&this.chart.getDataVisibility(e)&&!i[e].hidden&&(s+=Math.abs(a))}return s}calculateCircumference(e){let t=this._cachedMeta.total;return t>0&&!isNaN(e)?Math.abs(e)/t*ey:0}getLabelAndValue(e){let t=this._cachedMeta,i=this.chart,s=i.data.labels||[],a=e9(t._parsed[e],i.options.locale);return{label:s[e]||"",value:a}}getMaxBorderWidth(e){let t,i,s,a,r,n=0,o=this.chart;if(!e){for(t=0,i=o.data.datasets.length;t<i;++t)if(o.isDatasetVisible(t)){e=(s=o.getDatasetMeta(t)).data,a=s.controller;break}}if(!e)return 0;for(t=0,i=e.length;t<i;++t)"inner"!==(r=a.resolveDataElementOptions(t)).borderAlign&&(n=Math.max(n,r.borderWidth||0,r.hoverBorderWidth||0));return n}getMaxOffset(e){let t=0;for(let i=0,s=e.length;i<s;++i){let e=this.resolveDataElementOptions(i);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(t+=this._getRingWeight(i));return t}_getRingWeight(e){return Math.max(et(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}}(0,d._)(iP,"id","doughnut"),(0,d._)(iP,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),(0,d._)(iP,"descriptors",{_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),(0,d._)(iP,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){let t=e.data;if(t.labels.length&&t.datasets.length){let{labels:{pointStyle:i,color:s}}=e.legend.options;return t.labels.map((t,a)=>{let r=e.getDatasetMeta(0).controller.getStyle(a);return{text:t,fillStyle:r.backgroundColor,strokeStyle:r.borderColor,fontColor:s,lineWidth:r.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}}});class iD extends iw{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){let t=this._cachedMeta,{dataset:i,data:s=[],_dataset:a}=t,r=this.chart._animationsDisabled,{start:n,count:o}=eK(t,s,r);this._drawStart=n,this._drawCount=o,eJ(t)&&(n=0,o=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!a._decimated,i.points=s;let l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(i,void 0,{animated:!r,options:l},e),this.updateElements(s,n,o,e)}updateElements(e,t,i,s){let a="reset"===s,{iScale:r,vScale:n,_stacked:o,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:d}=this._getSharedOptions(t,s),h=r.axis,u=n.axis,{spanGaps:g,segment:m}=this.options,p=eA(g)?g:1/0,x=this.chart._animationsDisabled||a||"none"===s,f=t+i,b=e.length,y=t>0&&this.getParsed(t-1);for(let i=0;i<b;++i){let g=e[i],b=x?g:{};if(i<t||i>=f){b.skip=!0;continue}let v=this.getParsed(i),_=Z(v[u]),j=b[h]=r.getPixelForValue(v[h],i),w=b[u]=a||_?n.getBasePixel():n.getPixelForValue(o?this.applyStack(n,v,o):v[u],i);b.skip=isNaN(j)||isNaN(w)||_,b.stop=i>0&&Math.abs(v[h]-y[h])>p,m&&(b.parsed=v,b.raw=l.data[i]),d&&(b.options=c||this.resolveDataElementOptions(i,g.active?"active":s)),x||this.updateElement(g,i,b,s),y=v}}getMaxOverflow(){let e=this._cachedMeta,t=e.dataset,i=t.options&&t.options.borderWidth||0,s=e.data||[];return s.length?Math.max(i,s[0].size(this.resolveDataElementOptions(0)),s[s.length-1].size(this.resolveDataElementOptions(s.length-1)))/2:i}draw(){let e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}(0,d._)(iD,"id","line"),(0,d._)(iD,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),(0,d._)(iD,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class iT extends iw{getLabelAndValue(e){let t=this._cachedMeta,i=this.chart,s=i.data.labels||[],a=e9(t._parsed[e].r,i.options.locale);return{label:s[e]||"",value:a}}parseObjectData(e,t,i,s){return tF.bind(this)(e,t,i,s)}update(e){let t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){let e=this._cachedMeta,t={min:1/0,max:-1/0};return e.data.forEach((e,i)=>{let s=this.getParsed(i).r;!isNaN(s)&&this.chart.getDataVisibility(i)&&(s<t.min&&(t.min=s),s>t.max&&(t.max=s))}),t}_updateRadius(){let e=this.chart,t=e.chartArea,i=e.options,s=Math.max(Math.min(t.right-t.left,t.bottom-t.top)/2,0),a=Math.max(i.cutoutPercentage?s/100*i.cutoutPercentage:1,0),r=(s-a)/e.getVisibleDatasetCount();this.outerRadius=s-r*this.index,this.innerRadius=this.outerRadius-r}updateElements(e,t,i,s){let a,r="reset"===s,n=this.chart,o=n.options.animation,l=this._cachedMeta.rScale,c=l.xCenter,d=l.yCenter,h=l.getIndexAngle(0)-.5*eb,u=h,g=360/this.countVisibleElements();for(a=0;a<t;++a)u+=this._computeAngle(a,s,g);for(a=t;a<t+i;a++){let t=e[a],i=u,m=u+this._computeAngle(a,s,g),p=n.getDataVisibility(a)?l.getDistanceFromCenterForValue(this.getParsed(a).r):0;u=m,r&&(o.animateScale&&(p=0),o.animateRotate&&(i=m=h));let x={x:c,y:d,innerRadius:0,outerRadius:p,startAngle:i,endAngle:m,options:this.resolveDataElementOptions(a,t.active?"active":s)};this.updateElement(t,a,x,s)}}countVisibleElements(){let e=this._cachedMeta,t=0;return e.data.forEach((e,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&t++}),t}_computeAngle(e,t,i){return this.chart.getDataVisibility(e)?eD(this.resolveDataElementOptions(e,t).angle||i):0}constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}}(0,d._)(iT,"id","polarArea"),(0,d._)(iT,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),(0,d._)(iT,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){let t=e.data;if(t.labels.length&&t.datasets.length){let{labels:{pointStyle:i,color:s}}=e.legend.options;return t.labels.map((t,a)=>{let r=e.getDatasetMeta(0).controller.getStyle(a);return{text:t,fillStyle:r.backgroundColor,strokeStyle:r.borderColor,fontColor:s,lineWidth:r.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class iO extends iP{}(0,d._)(iO,"id","pie"),(0,d._)(iO,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class iL extends iw{getLabelAndValue(e){let t=this._cachedMeta.vScale,i=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(i[t.axis])}}parseObjectData(e,t,i,s){return tF.bind(this)(e,t,i,s)}update(e){let t=this._cachedMeta,i=t.dataset,s=t.data||[],a=t.iScale.getLabels();if(i.points=s,"resize"!==e){let t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);let r={_loop:!0,_fullLoop:a.length===s.length,options:t};this.updateElement(i,void 0,r,e)}this.updateElements(s,0,s.length,e)}updateElements(e,t,i,s){let a=this._cachedMeta.rScale,r="reset"===s;for(let n=t;n<t+i;n++){let t=e[n],i=this.resolveDataElementOptions(n,t.active?"active":s),o=a.getPointPositionForValue(n,this.getParsed(n).r),l=r?a.xCenter:o.x,c=r?a.yCenter:o.y,d={x:l,y:c,angle:o.angle,skip:isNaN(l)||isNaN(c),options:i};this.updateElement(t,n,d,s)}}}(0,d._)(iL,"id","radar"),(0,d._)(iL,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),(0,d._)(iL,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class iR extends iw{getLabelAndValue(e){let t=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:a}=t,r=this.getParsed(e),n=s.getLabelForValue(r.x),o=a.getLabelForValue(r.y);return{label:i[e]||"",value:"("+n+", "+o+")"}}update(e){let t=this._cachedMeta,{data:i=[]}=t,s=this.chart._animationsDisabled,{start:a,count:r}=eK(t,i,s);if(this._drawStart=a,this._drawCount=r,eJ(t)&&(a=0,r=i.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:a,_dataset:r}=t;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!r._decimated,a.points=i;let n=this.resolveDatasetElementOptions(e);n.segment=this.options.segment,this.updateElement(a,void 0,{animated:!s,options:n},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(i,a,r,e)}addElements(){let{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,i,s){let a="reset"===s,{iScale:r,vScale:n,_stacked:o,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(t,s),d=this.getSharedOptions(c),h=this.includeOptions(s,d),u=r.axis,g=n.axis,{spanGaps:m,segment:p}=this.options,x=eA(m)?m:1/0,f=this.chart._animationsDisabled||a||"none"===s,b=t>0&&this.getParsed(t-1);for(let c=t;c<t+i;++c){let t=e[c],i=this.getParsed(c),m=f?t:{},y=Z(i[g]),v=m[u]=r.getPixelForValue(i[u],c),_=m[g]=a||y?n.getBasePixel():n.getPixelForValue(o?this.applyStack(n,i,o):i[g],c);m.skip=isNaN(v)||isNaN(_)||y,m.stop=c>0&&Math.abs(i[u]-b[u])>x,p&&(m.parsed=i,m.raw=l.data[c]),h&&(m.options=d||this.resolveDataElementOptions(c,t.active?"active":s)),f||this.updateElement(t,c,m,s),b=i}this.updateSharedOptions(d,s,c)}getMaxOverflow(){let e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let i=t.length-1;i>=0;--i)e=Math.max(e,t[i].size(this.resolveDataElementOptions(i))/2);return e>0&&e}let i=e.dataset,s=i.options&&i.options.borderWidth||0;return t.length?Math.max(s,t[0].size(this.resolveDataElementOptions(0)),t[t.length-1].size(this.resolveDataElementOptions(t.length-1)))/2:s}}function iq(){throw Error("This method is not implemented: Check that a complete date adapter is provided.")}(0,d._)(iR,"id","scatter"),(0,d._)(iR,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),(0,d._)(iR,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});class iz{static override(e){Object.assign(iz.prototype,e)}init(){}formats(){return iq()}parse(){return iq()}format(){return iq()}add(){return iq()}diff(){return iq()}startOf(){return iq()}endOf(){return iq()}constructor(e){(0,d._)(this,"options",void 0),this.options=e||{}}}var iI={_date:iz};function iF(e,t,i,s,a){let r=e.getSortedVisibleDatasetMetas(),n=i[t];for(let e=0,i=r.length;e<i;++e){let{index:i,data:o}=r[e],{lo:l,hi:c}=function(e,t,i,s){let{controller:a,data:r,_sorted:n}=e,o=a._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(o&&t===o.axis&&"r"!==t&&n&&r.length){let n=o._reversePixels?eH:eB;if(s){if(a._sharedOptions){let e=r[0],s="function"==typeof e.getRange&&e.getRange(t);if(s){let e=n(r,t,i-s),a=n(r,t,i+s);return{lo:e.lo,hi:a.hi}}}}else{let s=n(r,t,i);if(l){let{vScale:t}=a._cachedMeta,{_parsed:i}=e,r=i.slice(0,s.lo+1).reverse().findIndex(e=>!Z(e[t.axis]));s.lo-=Math.max(0,r);let n=i.slice(s.hi).findIndex(e=>!Z(e[t.axis]));s.hi+=Math.max(0,n)}return s}}return{lo:0,hi:r.length-1}}(r[e],t,n,a);for(let e=l;e<=c;++e){let t=o[e];t.skip||s(t,i,e)}}}function iV(e,t,i,s,a){let r=[];return(a||e.isPointInArea(t))&&iF(e,i,t,function(i,n,o){(a||tu(i,e.chartArea,0))&&i.inRange(t.x,t.y,s)&&r.push({element:i,datasetIndex:n,index:o})},!0),r}function iB(e,t,i,s,a,r){let n;return r||e.isPointInArea(t)?"r"!==i||s?function(e,t,i,s,a,r){let n=[],o=function(e){let t=-1!==e.indexOf("x"),i=-1!==e.indexOf("y");return function(e,s){return Math.sqrt(Math.pow(t?Math.abs(e.x-s.x):0,2)+Math.pow(i?Math.abs(e.y-s.y):0,2))}}(i),l=1/0;return iF(e,i,t,function(i,c,d){let h=i.inRange(t.x,t.y,a);if(s&&!h)return;let u=i.getCenterPoint(a);if(!(r||e.isPointInArea(u))&&!h)return;let g=o(t,u);g<l?(n=[{element:i,datasetIndex:c,index:d}],l=g):g===l&&n.push({element:i,datasetIndex:c,index:d})}),n}(e,t,i,s,a,r):(n=[],iF(e,i,t,function(e,i,s){let{startAngle:r,endAngle:o}=e.getProps(["startAngle","endAngle"],a),{angle:l}=eO(e,{x:t.x,y:t.y});ez(l,r,o)&&n.push({element:e,datasetIndex:i,index:s})}),n):[]}function iH(e,t,i,s,a){let r=[],n="x"===i?"inXRange":"inYRange",o=!1;return(iF(e,i,t,(e,s,l)=>{e[n]&&e[n](t[i],a)&&(r.push({element:e,datasetIndex:s,index:l}),o=o||e.inRange(t.x,t.y,a))}),s&&!o)?[]:r}var iW={modes:{index(e,t,i,s){let a=tK(t,e),r=i.axis||"x",n=i.includeInvisible||!1,o=i.intersect?iV(e,a,r,s,n):iB(e,a,r,!1,s,n),l=[];return o.length?(e.getSortedVisibleDatasetMetas().forEach(e=>{let t=o[0].index,i=e.data[t];i&&!i.skip&&l.push({element:i,datasetIndex:e.index,index:t})}),l):[]},dataset(e,t,i,s){let a=tK(t,e),r=i.axis||"xy",n=i.includeInvisible||!1,o=i.intersect?iV(e,a,r,s,n):iB(e,a,r,!1,s,n);if(o.length>0){let t=o[0].datasetIndex,i=e.getDatasetMeta(t).data;o=[];for(let e=0;e<i.length;++e)o.push({element:i[e],datasetIndex:t,index:e})}return o},point(e,t,i,s){let a=tK(t,e);return iV(e,a,i.axis||"xy",s,i.includeInvisible||!1)},nearest(e,t,i,s){let a=tK(t,e),r=i.axis||"xy",n=i.includeInvisible||!1;return iB(e,a,r,i.intersect,s,n)},x(e,t,i,s){let a=tK(t,e);return iH(e,a,"x",i.intersect,s)},y(e,t,i,s){let a=tK(t,e);return iH(e,a,"y",i.intersect,s)}}};let iU=["left","top","right","bottom"];function iY(e,t){return e.filter(e=>e.pos===t)}function i$(e,t){return e.filter(e=>-1===iU.indexOf(e.pos)&&e.box.axis===t)}function iG(e,t){return e.sort((e,i)=>{let s=t?i:e,a=t?e:i;return s.weight===a.weight?s.index-a.index:s.weight-a.weight})}function iX(e,t,i,s){return Math.max(e[i],t[i])+Math.max(e[s],t[s])}function iZ(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function iK(e,t,i,s){let a,r,n,o,l,c,d=[];for(a=0,r=e.length,l=0;a<r;++a){(o=(n=e[a]).box).update(n.width||t.w,n.height||t.h,function(e,t){let i=t.maxPadding;var s=e?["left","right"]:["top","bottom"];let a={left:0,top:0,right:0,bottom:0};return s.forEach(e=>{a[e]=Math.max(t[e],i[e])}),a}(n.horizontal,t));let{same:r,other:h}=function(e,t,i,s){let{pos:a,box:r}=i,n=e.maxPadding;if(!J(a)){i.size&&(e[a]-=i.size);let t=s[i.stack]||{size:0,count:1};t.size=Math.max(t.size,i.horizontal?r.height:r.width),i.size=t.size/t.count,e[a]+=i.size}r.getPadding&&iZ(n,r.getPadding());let o=Math.max(0,t.outerWidth-iX(n,e,"left","right")),l=Math.max(0,t.outerHeight-iX(n,e,"top","bottom")),c=o!==e.w,d=l!==e.h;return e.w=o,e.h=l,i.horizontal?{same:c,other:d}:{same:d,other:c}}(t,i,n,s);l|=r&&d.length,c=c||h,o.fullSize||d.push(n)}return l&&iK(d,t,i,s)||c}function iJ(e,t,i,s,a){e.top=i,e.left=t,e.right=t+s,e.bottom=i+a,e.width=s,e.height=a}function iQ(e,t,i,s){let a=i.padding,{x:r,y:n}=t;for(let o of e){let e=o.box,l=s[o.stack]||{count:1,placed:0,weight:1},c=o.stackWeight/l.weight||1;if(o.horizontal){let s=t.w*c,r=l.size||e.height;ep(l.start)&&(n=l.start),e.fullSize?iJ(e,a.left,n,i.outerWidth-a.right-a.left,r):iJ(e,t.left+l.placed,n,s,r),l.start=n,l.placed+=s,n=e.bottom}else{let s=t.h*c,n=l.size||e.width;ep(l.start)&&(r=l.start),e.fullSize?iJ(e,r,a.top,n,i.outerHeight-a.bottom-a.top):iJ(e,r,t.top+l.placed,n,s),l.start=r,l.placed+=s,r=e.right}}t.x=r,t.y=n}var i0={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){let i=e.boxes?e.boxes.indexOf(t):-1;-1!==i&&e.boxes.splice(i,1)},configure(e,t,i){t.fullSize=i.fullSize,t.position=i.position,t.weight=i.weight},update(e,t,i,s){if(!e)return;let a=tk(e.options.layout.padding),r=Math.max(t-a.width,0),n=Math.max(i-a.height,0),o=function(e){let t=function(e){let t,i,s,a,r,n,o=[];for(t=0,i=(e||[]).length;t<i;++t)s=e[t],({position:a,options:{stack:r,stackWeight:n=1}}=s),o.push({index:t,box:s,pos:a,horizontal:s.isHorizontal(),weight:s.weight,stack:r&&a+r,stackWeight:n});return o}(e),i=iG(t.filter(e=>e.box.fullSize),!0),s=iG(iY(t,"left"),!0),a=iG(iY(t,"right")),r=iG(iY(t,"top"),!0),n=iG(iY(t,"bottom")),o=i$(t,"x"),l=i$(t,"y");return{fullSize:i,leftAndTop:s.concat(r),rightAndBottom:a.concat(l).concat(n).concat(o),chartArea:iY(t,"chartArea"),vertical:s.concat(a).concat(l),horizontal:r.concat(n).concat(o)}}(e.boxes),l=o.vertical,c=o.horizontal;ea(e.boxes,e=>{"function"==typeof e.beforeLayout&&e.beforeLayout()});let d=Object.freeze({outerWidth:t,outerHeight:i,padding:a,availableWidth:r,availableHeight:n,vBoxMaxWidth:r/2/(l.reduce((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1,0)||1),hBoxMaxHeight:n/2}),h=Object.assign({},a);iZ(h,tk(s));let u=Object.assign({maxPadding:h,w:r,h:n,x:a.left,y:a.top},a),g=function(e,t){let i,s,a,r=function(e){let t={};for(let i of e){let{stack:e,pos:s,stackWeight:a}=i;if(!e||!iU.includes(s))continue;let r=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=a}return t}(e),{vBoxMaxWidth:n,hBoxMaxHeight:o}=t;for(i=0,s=e.length;i<s;++i){let{fullSize:s}=(a=e[i]).box,l=r[a.stack],c=l&&a.stackWeight/l.weight;a.horizontal?(a.width=c?c*n:s&&t.availableWidth,a.height=o):(a.width=n,a.height=c?c*o:s&&t.availableHeight)}return r}(l.concat(c),d);iK(o.fullSize,u,d,g),iK(l,u,d,g),iK(c,u,d,g)&&iK(l,u,d,g);let m=u.maxPadding;function p(e){let t=Math.max(m[e]-u[e],0);return u[e]+=t,t}u.y+=p("top"),u.x+=p("left"),p("right"),p("bottom"),iQ(o.leftAndTop,u,d,g),u.x+=u.w,u.y+=u.h,iQ(o.rightAndBottom,u,d,g),e.chartArea={left:u.left,top:u.top,right:u.left+u.w,bottom:u.top+u.h,height:u.h,width:u.w},ea(o.chartArea,t=>{let i=t.box;Object.assign(i,e.chartArea),i.update(u.w,u.h,{left:0,top:0,right:0,bottom:0})})}};class i1{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,s){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,s?Math.floor(t/s):i)}}isAttached(e){return!0}updateConfig(e){}}class i2 extends i1{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}let i5="$chartjs",i6={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},i3=e=>null===e||""===e,i4=!!t0&&{passive:!0};function i8(e,t){for(let i of e)if(i===t||i.contains(t))return!0}function i7(e,t,i){let s=e.canvas,a=new MutationObserver(e=>{let t=!1;for(let i of e)t=(t=t||i8(i.addedNodes,s))&&!i8(i.removedNodes,s);t&&i()});return a.observe(document,{childList:!0,subtree:!0}),a}function i9(e,t,i){let s=e.canvas,a=new MutationObserver(e=>{let t=!1;for(let i of e)t=(t=t||i8(i.removedNodes,s))&&!i8(i.addedNodes,s);t&&i()});return a.observe(document,{childList:!0,subtree:!0}),a}let se=new Map,st=0;function si(){let e=window.devicePixelRatio;e!==st&&(st=e,se.forEach((t,i)=>{i.currentDevicePixelRatio!==e&&t()}))}function ss(e,t,i){let s=e.canvas,a=s&&tY(s);if(!a)return;let r=eG((e,t)=>{let s=a.clientWidth;i(e,t),s<a.clientWidth&&i()},window),n=new ResizeObserver(e=>{let t=e[0],i=t.contentRect.width,s=t.contentRect.height;(0!==i||0!==s)&&r(i,s)});return n.observe(a),se.size||window.addEventListener("resize",si),se.set(e,r),n}function sa(e,t,i){i&&i.disconnect(),"resize"===t&&(se.delete(e),se.size||window.removeEventListener("resize",si))}function sr(e,t,i){let s=e.canvas,a=eG(t=>{null!==e.ctx&&i(function(e,t){let i=i6[e.type]||e.type,{x:s,y:a}=tK(e,t);return{type:i,chart:t,native:e,x:void 0!==s?s:null,y:void 0!==a?a:null}}(t,e))},e);return s&&s.addEventListener(t,a,i4),a}class sn extends i1{acquireContext(e,t){let i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(!function(e,t){let i=e.style,s=e.getAttribute("height"),a=e.getAttribute("width");if(e[i5]={initial:{height:s,width:a,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",i3(a)){let t=t1(e,"width");void 0!==t&&(e.width=t)}if(i3(s))if(""===e.style.height)e.height=e.width/(t||2);else{let t=t1(e,"height");void 0!==t&&(e.height=t)}}(e,t),i):null}releaseContext(e){let t=e.canvas;if(!t[i5])return!1;let i=t[i5].initial;["height","width"].forEach(e=>{let s=i[e];Z(s)?t.removeAttribute(e):t.setAttribute(e,s)});let s=i.style||{};return Object.keys(s).forEach(e=>{t.style[e]=s[e]}),t.width=t.width,delete t[i5],!0}addEventListener(e,t,i){this.removeEventListener(e,t);let s=e.$proxies||(e.$proxies={}),a={attach:i7,detach:i9,resize:ss}[t]||sr;s[t]=a(e,t,i)}removeEventListener(e,t){let i=e.$proxies||(e.$proxies={}),s=i[t];s&&((({attach:sa,detach:sa,resize:sa})[t]||function(e,t,i){e&&e.canvas&&e.canvas.removeEventListener(t,i,i4)})(e,t,s),i[t]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,s){return function(e,t,i,s){let a=tG(e),r=tZ(a,"margin"),n=t$(a.maxWidth,e,"clientWidth")||e_,o=t$(a.maxHeight,e,"clientHeight")||e_,l=function(e,t,i){let s,a;if(void 0===t||void 0===i){let r=e&&tY(e);if(r){let e=r.getBoundingClientRect(),n=tG(r),o=tZ(n,"border","width"),l=tZ(n,"padding");t=e.width-l.width-o.width,i=e.height-l.height-o.height,s=t$(n.maxWidth,r,"clientWidth"),a=t$(n.maxHeight,r,"clientHeight")}else t=e.clientWidth,i=e.clientHeight}return{width:t,height:i,maxWidth:s||e_,maxHeight:a||e_}}(e,t,i),{width:c,height:d}=l;if("content-box"===a.boxSizing){let e=tZ(a,"border","width"),t=tZ(a,"padding");c-=t.width+e.width,d-=t.height+e.height}return c=Math.max(0,c-r.width),d=Math.max(0,s?c/s:d-r.height),c=tJ(Math.min(c,n,l.maxWidth)),d=tJ(Math.min(d,o,l.maxHeight)),c&&!d&&(d=tJ(c/2)),(void 0!==t||void 0!==i)&&s&&l.height&&d>l.height&&(c=tJ(Math.floor((d=l.height)*s))),{width:c,height:d}}(e,t,i,s)}isAttached(e){let t=e&&tY(e);return!!(t&&t.isConnected)}}class so{tooltipPosition(e){let{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return eA(this.x)&&eA(this.y)}getProps(e,t){let i=this.$animations;if(!t||!i)return this;let s={};return e.forEach(e=>{s[e]=i[e]&&i[e].active()?i[e]._to:this[e]}),s}constructor(){(0,d._)(this,"x",void 0),(0,d._)(this,"y",void 0),(0,d._)(this,"active",!1),(0,d._)(this,"options",void 0),(0,d._)(this,"$animations",void 0)}}function sl(e,t,i,s,a){let r,n,o,l=et(s,0),c=Math.min(et(a,e.length),e.length),d=0;for(i=Math.ceil(i),a&&(i=(r=a-s)/Math.floor(r/i)),o=l;o<0;)o=Math.round(l+ ++d*i);for(n=Math.max(l,0);n<c;n++)n===o&&(t.push(e[n]),o=Math.round(l+ ++d*i))}(0,d._)(so,"defaults",{}),(0,d._)(so,"defaultRoutes",void 0);let sc=(e,t,i)=>"top"===t||"left"===t?e[t]+i:e[t]-i,sd=(e,t)=>Math.min(t||e,e);function sh(e,t){let i=[],s=e.length/t,a=e.length,r=0;for(;r<a;r+=s)i.push(e[Math.floor(r)]);return i}function su(e){return e.drawTicks?e.tickLength:0}function sg(e,t){if(!e.display)return 0;let i=tM(e.font,t),s=tk(e.padding);return(K(e.text)?e.text.length:1)*i.lineHeight+s.height}class sm extends so{init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:s}=this;return e=ee(e,1/0),t=ee(t,-1/0),i=ee(i,1/0),s=ee(s,-1/0),{min:ee(e,i),max:ee(t,s),minDefined:Q(e),maxDefined:Q(t)}}getMinMax(e){let t,{min:i,max:s,minDefined:a,maxDefined:r}=this.getUserBounds();if(a&&r)return{min:i,max:s};let n=this.getMatchingVisibleMetas();for(let o=0,l=n.length;o<l;++o)t=n[o].controller.getMinMax(this,e),a||(i=Math.min(i,t.min)),r||(s=Math.max(s,t.max));return i=r&&i>s?s:i,s=a&&i>s?i:s,{min:ee(i,ee(s,i)),max:ee(s,ee(i,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){es(this.options.beforeUpdate,[this])}update(e,t,i){let{beginAtZero:s,grace:a,ticks:r}=this.options,n=r.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,i){let{min:s,max:a}=e,r=ei(t,(a-s)/2),n=(e,t)=>i&&0===e?0:e+t;return{min:n(s,-Math.abs(r)),max:n(a,r)}}(this,a,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let o=n<this.ticks.length;this._convertTicksToLabels(o?sh(this.ticks,n):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||"auto"===r.source)&&(this.ticks=function(e,t){let i=e.options.ticks,s=function(e){let t=e.options.offset,i=e._tickSize();return Math.floor(Math.min(e._length/i+ +!t,e._maxLength/i))}(e),a=Math.min(i.maxTicksLimit||s,s),r=i.major.enabled?function(e){let t,i,s=[];for(t=0,i=e.length;t<i;t++)e[t].major&&s.push(t);return s}(t):[],n=r.length,o=r[0],l=r[n-1],c=[];if(n>a)return function(e,t,i,s){let a,r=0,n=i[0];for(a=0,s=Math.ceil(s);a<e.length;a++)a===n&&(t.push(e[a]),n=i[++r*s])}(t,c,r,n/a),c;let d=function(e,t,i){let s=function(e){let t,i,s=e.length;if(s<2)return!1;for(i=e[0],t=1;t<s;++t)if(e[t]-e[t-1]!==i)return!1;return i}(e),a=t.length/i;if(!s)return Math.max(a,1);let r=function(e){let t,i=[],s=Math.sqrt(e);for(t=1;t<s;t++)e%t==0&&(i.push(t),i.push(e/t));return s===(0|s)&&i.push(s),i.sort((e,t)=>e-t).pop(),i}(s);for(let e=0,t=r.length-1;e<t;e++){let t=r[e];if(t>a)return t}return Math.max(a,1)}(r,t,a);if(n>0){let e,i,s=n>1?Math.round((l-o)/(n-1)):null;for(sl(t,c,d,Z(s)?0:o-s,o),e=0,i=n-1;e<i;e++)sl(t,c,d,r[e],r[e+1]);return sl(t,c,d,l,Z(s)?t.length:l+s),c}return sl(t,c,d),c}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),o&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,i=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,i=!i),this._startPixel=e,this._endPixel=t,this._reversePixels=i,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){es(this.options.afterUpdate,[this])}beforeSetDimensions(){es(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){es(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),es(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){es(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){let t,i,s,a=this.options.ticks;for(t=0,i=e.length;t<i;t++)(s=e[t]).label=es(a.callback,[s.value,t,e],this)}afterTickToLabelConversion(){es(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){es(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let e,t,i,s=this.options,a=s.ticks,r=sd(this.ticks.length,s.ticks.maxTicksLimit),n=a.minRotation||0,o=a.maxRotation,l=n;if(!this._isVisible()||!a.display||n>=o||r<=1||!this.isHorizontal()){this.labelRotation=n;return}let c=this._getLabelSizes(),d=c.widest.width,h=c.highest.height,u=eI(this.chart.width-d,0,this.maxWidth);d+6>(e=s.offset?this.maxWidth/r:u/(r-1))&&(e=u/(r-(s.offset?.5:1)),t=this.maxHeight-su(s.grid)-a.padding-sg(s.title,this.chart.options.font),i=Math.sqrt(d*d+h*h),l=Math.max(n,Math.min(o,l=180/eb*Math.min(Math.asin(eI((c.highest.height+6)/e,-1,1)),Math.asin(eI(t/i,-1,1))-Math.asin(eI(h/i,-1,1)))))),this.labelRotation=l}afterCalculateLabelRotation(){es(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){es(this.options.beforeFit,[this])}fit(){let e={width:0,height:0},{chart:t,options:{ticks:i,title:s,grid:a}}=this,r=this._isVisible(),n=this.isHorizontal();if(r){let r=sg(s,t.options.font);if(n?(e.width=this.maxWidth,e.height=su(a)+r):(e.height=this.maxHeight,e.width=su(a)+r),i.display&&this.ticks.length){let{first:t,last:s,widest:a,highest:r}=this._getLabelSizes(),o=2*i.padding,l=eD(this.labelRotation),c=Math.cos(l),d=Math.sin(l);if(n){let t=i.mirror?0:d*a.width+c*r.height;e.height=Math.min(this.maxHeight,e.height+t+o)}else{let t=i.mirror?0:c*a.width+d*r.height;e.width=Math.min(this.maxWidth,e.width+t+o)}this._calculatePadding(t,s,d,c)}}this._handleMargins(),n?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,s){let{ticks:{align:a,padding:r},position:n}=this.options,o=0!==this.labelRotation,l="top"!==n&&"x"===this.axis;if(this.isHorizontal()){let n=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1),d=0,h=0;o?l?(d=s*e.width,h=i*t.height):(d=i*e.height,h=s*t.width):"start"===a?h=t.width:"end"===a?d=e.width:"inner"!==a&&(d=e.width/2,h=t.width/2),this.paddingLeft=Math.max((d-n+r)*this.width/(this.width-n),0),this.paddingRight=Math.max((h-c+r)*this.width/(this.width-c),0)}else{let i=t.height/2,s=e.height/2;"start"===a?(i=0,s=e.height):"end"===a&&(i=t.height,s=0),this.paddingTop=i+r,this.paddingBottom=s+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){es(this.options.afterFit,[this])}isHorizontal(){let{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,i;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,i=e.length;t<i;t++)Z(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){let t=this.options.ticks.sampleSize,i=this.ticks;t<i.length&&(i=sh(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){let s,a,r,n,o,l,c,d,h,u,g,{ctx:m,_longestTextCache:p}=this,x=[],f=[],b=Math.floor(t/sd(t,i)),y=0,v=0;for(s=0;s<t;s+=b){if(n=e[s].label,m.font=l=(o=this._resolveTickFontOptions(s)).string,c=p[l]=p[l]||{data:{},gc:[]},d=o.lineHeight,h=u=0,Z(n)||K(n)){if(K(n))for(a=0,r=n.length;a<r;++a)Z(g=n[a])||K(g)||(h=to(m,c.data,c.gc,h,g),u+=d)}else h=to(m,c.data,c.gc,h,n),u=d;x.push(h),f.push(u),y=Math.max(h,y),v=Math.max(u,v)}ea(p,e=>{let i,s=e.gc,a=s.length/2;if(a>t){for(i=0;i<a;++i)delete e.data[s[i]];s.splice(0,a)}});let _=x.indexOf(y),j=f.indexOf(v),w=e=>({width:x[e]||0,height:f[e]||0});return{first:w(0),last:w(t-1),widest:w(_),highest:w(j),widths:x,heights:f}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){let t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);let t=this._startPixel+e*this._length;return eI(this._alignToPixels?tl(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){let t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){var t,i;let s=this.ticks||[];if(e>=0&&e<s.length){let i=s[e];return i.$context||(t=this.getContext(),i.$context=tS(t,{tick:i,index:e,type:"tick"}))}return this.$context||(this.$context=(i=this.chart.getContext(),tS(i,{scale:this,type:"scale"})))}_tickSize(){let e=this.options.ticks,t=eD(this.labelRotation),i=Math.abs(Math.cos(t)),s=Math.abs(Math.sin(t)),a=this._getLabelSizes(),r=e.autoSkipPadding||0,n=a?a.widest.width+r:0,o=a?a.highest.height+r:0;return this.isHorizontal()?o*i>n*s?n/i:o/s:o*s<n*i?o/i:n/s}_isVisible(){let e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){let t,i,s,a,r,n,o,l,c,d,h,u,g=this.axis,m=this.chart,p=this.options,{grid:x,position:f,border:b}=p,y=x.offset,v=this.isHorizontal(),_=this.ticks.length+ +!!y,j=su(x),w=[],N=b.setContext(this.getContext()),k=N.display?N.width:0,M=k/2,E=function(e){return tl(m,e,k)};if("top"===f)t=E(this.bottom),n=this.bottom-j,l=t-M,d=E(e.top)+M,u=e.bottom;else if("bottom"===f)t=E(this.top),d=e.top,u=E(e.bottom)-M,n=t+M,l=this.top+j;else if("left"===f)t=E(this.right),r=this.right-j,o=t-M,c=E(e.left)+M,h=e.right;else if("right"===f)t=E(this.left),c=e.left,h=E(e.right)-M,r=t+M,o=this.left+j;else if("x"===g){if("center"===f)t=E((e.top+e.bottom)/2+.5);else if(J(f)){let e=Object.keys(f)[0],i=f[e];t=E(this.chart.scales[e].getPixelForValue(i))}d=e.top,u=e.bottom,l=(n=t+M)+j}else if("y"===g){if("center"===f)t=E((e.left+e.right)/2);else if(J(f)){let e=Object.keys(f)[0],i=f[e];t=E(this.chart.scales[e].getPixelForValue(i))}o=(r=t-M)-j,c=e.left,h=e.right}let S=et(p.ticks.maxTicksLimit,_),C=Math.max(1,Math.ceil(_/S));for(i=0;i<_;i+=C){let e=this.getContext(i),t=x.setContext(e),g=b.setContext(e),p=t.lineWidth,f=t.color,_=g.dash||[],j=g.dashOffset,N=t.tickWidth,k=t.tickColor,M=t.tickBorderDash||[],E=t.tickBorderDashOffset;void 0!==(s=function(e,t,i){let s,a=e.ticks.length,r=Math.min(t,a-1),n=e._startPixel,o=e._endPixel,l=e.getPixelForTick(r);if(!i||(s=1===a?Math.max(l-n,o-l):0===t?(e.getPixelForTick(1)-l)/2:(l-e.getPixelForTick(r-1))/2,!((l+=r<t?s:-s)<n-1e-6)&&!(l>o+1e-6)))return l}(this,i,y))&&(a=tl(m,s,p),v?r=o=c=h=a:n=l=d=u=a,w.push({tx1:r,ty1:n,tx2:o,ty2:l,x1:c,y1:d,x2:h,y2:u,width:p,color:f,borderDash:_,borderDashOffset:j,tickWidth:N,tickColor:k,tickBorderDash:M,tickBorderDashOffset:E}))}return this._ticksLength=_,this._borderValue=t,w}_computeLabelItems(e){let t,i,s,a,r,n,o,l,c,d,h,u=this.axis,g=this.options,{position:m,ticks:p}=g,x=this.isHorizontal(),f=this.ticks,{align:b,crossAlign:y,padding:v,mirror:_}=p,j=su(g.grid),w=j+v,N=_?-v:w,k=-eD(this.labelRotation),M=[],E="middle";if("top"===m)r=this.bottom-N,n=this._getXAxisLabelAlignment();else if("bottom"===m)r=this.top+N,n=this._getXAxisLabelAlignment();else if("left"===m){let e=this._getYAxisLabelAlignment(j);n=e.textAlign,a=e.x}else if("right"===m){let e=this._getYAxisLabelAlignment(j);n=e.textAlign,a=e.x}else if("x"===u){if("center"===m)r=(e.top+e.bottom)/2+w;else if(J(m)){let e=Object.keys(m)[0],t=m[e];r=this.chart.scales[e].getPixelForValue(t)+w}n=this._getXAxisLabelAlignment()}else if("y"===u){if("center"===m)a=(e.left+e.right)/2-w;else if(J(m)){let e=Object.keys(m)[0],t=m[e];a=this.chart.scales[e].getPixelForValue(t)}n=this._getYAxisLabelAlignment(j).textAlign}"y"===u&&("start"===b?E="top":"end"===b&&(E="bottom"));let S=this._getLabelSizes();for(t=0,i=f.length;t<i;++t){let e;s=f[t].label;let u=p.setContext(this.getContext(t));o=this.getPixelForTick(t)+p.labelOffset,c=(l=this._resolveTickFontOptions(t)).lineHeight;let g=(d=K(s)?s.length:1)/2,b=u.color,v=u.textStrokeColor,j=u.textStrokeWidth,w=n;if(x?(a=o,"inner"===n&&(w=t===i-1?this.options.reverse?"left":"right":0===t?this.options.reverse?"right":"left":"center"),h="top"===m?"near"===y||0!==k?-d*c+c/2:"center"===y?-S.highest.height/2-g*c+c:-S.highest.height+c/2:"near"===y||0!==k?c/2:"center"===y?S.highest.height/2-g*c:S.highest.height-d*c,_&&(h*=-1),0===k||u.showLabelBackdrop||(a+=c/2*Math.sin(k))):(r=o,h=(1-d)*c/2),u.showLabelBackdrop){let s=tk(u.backdropPadding),a=S.heights[t],r=S.widths[t],o=h-s.top,l=0-s.left;switch(E){case"middle":o-=a/2;break;case"bottom":o-=a}switch(n){case"center":l-=r/2;break;case"right":l-=r;break;case"inner":t===i-1?l-=r:t>0&&(l-=r/2)}e={left:l,top:o,width:r+s.width,height:a+s.height,color:u.backdropColor}}M.push({label:s,font:l,textOffset:h,options:{rotation:k,color:b,strokeColor:v,strokeWidth:j,textAlign:w,textBaseline:E,translation:[a,r],backdrop:e}})}return M}_getXAxisLabelAlignment(){let{position:e,ticks:t}=this.options;if(-eD(this.labelRotation))return"top"===e?"left":"right";let i="center";return"start"===t.align?i="left":"end"===t.align?i="right":"inner"===t.align&&(i="inner"),i}_getYAxisLabelAlignment(e){let t,i,{position:s,ticks:{crossAlign:a,mirror:r,padding:n}}=this.options,o=this._getLabelSizes(),l=e+n,c=o.widest.width;return"left"===s?r?(i=this.right+n,"near"===a?t="left":"center"===a?(t="center",i+=c/2):(t="right",i+=c)):(i=this.right-l,"near"===a?t="right":"center"===a?(t="center",i-=c/2):(t="left",i=this.left)):"right"===s?r?(i=this.left+n,"near"===a?t="right":"center"===a?(t="center",i-=c/2):(t="left",i-=c)):(i=this.left+l,"near"===a?t="left":"center"===a?(t="center",i+=c/2):(t="right",i=this.right)):t="right",{textAlign:t,x:i}}_computeLabelArea(){if(this.options.ticks.mirror)return;let e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){let{ctx:e,options:{backgroundColor:t},left:i,top:s,width:a,height:r}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,s,a,r),e.restore())}getLineWidthForValue(e){let t=this.options.grid;if(!this._isVisible()||!t.display)return 0;let i=this.ticks.findIndex(t=>t.value===e);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){let t,i,s=this.options.grid,a=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e)),n=(e,t,i)=>{i.width&&i.color&&(a.save(),a.lineWidth=i.width,a.strokeStyle=i.color,a.setLineDash(i.borderDash||[]),a.lineDashOffset=i.borderDashOffset,a.beginPath(),a.moveTo(e.x,e.y),a.lineTo(t.x,t.y),a.stroke(),a.restore())};if(s.display)for(t=0,i=r.length;t<i;++t){let e=r[t];s.drawOnChartArea&&n({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),s.drawTicks&&n({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){let e,t,i,s,{chart:a,ctx:r,options:{border:n,grid:o}}=this,l=n.setContext(this.getContext()),c=n.display?l.width:0;if(!c)return;let d=o.setContext(this.getContext(0)).lineWidth,h=this._borderValue;this.isHorizontal()?(e=tl(a,this.left,c)-c/2,t=tl(a,this.right,d)+d/2,i=s=h):(i=tl(a,this.top,c)-c/2,s=tl(a,this.bottom,d)+d/2,e=t=h),r.save(),r.lineWidth=l.width,r.strokeStyle=l.color,r.beginPath(),r.moveTo(e,i),r.lineTo(t,s),r.stroke(),r.restore()}drawLabels(e){if(!this.options.ticks.display)return;let t=this.ctx,i=this._computeLabelArea();for(let s of(i&&tg(t,i),this.getLabelItems(e))){let e=s.options,i=s.font;tf(t,s.label,0,s.textOffset,i,e)}i&&tm(t)}drawTitle(){let e,t,{ctx:i,options:{position:s,title:a,reverse:r}}=this;if(!a.display)return;let n=tM(a.font),o=tk(a.padding),l=a.align,c=n.lineHeight/2;"bottom"===s||"center"===s||J(s)?(c+=o.bottom,K(a.text)&&(c+=n.lineHeight*(a.text.length-1))):c+=o.top;let{titleX:d,titleY:h,maxWidth:u,rotation:g}=function(e,t,i,s){let a,r,n,{top:o,left:l,bottom:c,right:d,chart:h}=e,{chartArea:u,scales:g}=h,m=0,p=c-o,x=d-l;if(e.isHorizontal()){if(r=eZ(s,l,d),J(i)){let e=Object.keys(i)[0],s=i[e];n=g[e].getPixelForValue(s)+p-t}else n="center"===i?(u.bottom+u.top)/2+p-t:sc(e,i,t);a=d-l}else{if(J(i)){let e=Object.keys(i)[0],s=i[e];r=g[e].getPixelForValue(s)-x+t}else r="center"===i?(u.left+u.right)/2-x+t:sc(e,i,t);n=eZ(s,c,o),m="left"===i?-ew:ew}return{titleX:r,titleY:n,maxWidth:a,rotation:m}}(this,c,s,l);tf(i,a.text,0,0,n,{color:a.color,maxWidth:u,rotation:g,textAlign:(e=eX(l),(r&&"right"!==s||!r&&"right"===s)&&(e="left"===(t=e)?"right":"right"===t?"left":t),e),textBaseline:"middle",translation:[d,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){let e=this.options,t=e.ticks&&e.ticks.z||0,i=et(e.grid&&e.grid.z,-1),s=et(e.border&&e.border.z,0);return this._isVisible()&&this.draw===sm.prototype.draw?[{z:i,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){let t,i,s=this.chart.getSortedVisibleDatasetMetas(),a=this.axis+"AxisID",r=[];for(t=0,i=s.length;t<i;++t){let i=s[t];i[a]!==this.id||e&&i.type!==e||r.push(i)}return r}_resolveTickFontOptions(e){return tM(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){let e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}}class sp{isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){var t;let i,s=Object.getPrototypeOf(e);"id"in(t=s)&&"defaults"in t&&(i=this.register(s));let a=this.items,r=e.id,n=this.scope+"."+r;if(!r)throw Error("class does not have id: "+e);return r in a||(a[r]=e,function(e,t,i){var s,a;let r=ec(Object.create(null),[i?tn.get(i):{},tn.get(t),e.defaults]);tn.set(t,r),e.defaultRoutes&&(s=t,Object.keys(a=e.defaultRoutes).forEach(e=>{let t=e.split("."),i=t.pop(),r=[s].concat(t).join("."),n=a[e].split("."),o=n.pop(),l=n.join(".");tn.route(r,i,l,o)})),e.descriptors&&tn.describe(t,e.descriptors)}(e,n,i),this.override&&tn.override(e.id,e.overrides)),n}get(e){return this.items[e]}unregister(e){let t=this.items,i=e.id,s=this.scope;i in t&&delete t[i],s&&i in tn[s]&&(delete tn[s][i],this.override&&delete ti[i])}constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}}var sx=new class{add(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];this._each("register",t)}remove(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];this._each("unregister",t,this.scales)}_each(e,t,i){[...t].forEach(t=>{let s=i||this._getRegistryForType(t);i||s.isForType(t)||s===this.plugins&&t.id?this._exec(e,s,t):ea(t,t=>{let s=i||this._getRegistryForType(t);this._exec(e,s,t)})})}_exec(e,t,i){let s=em(e);es(i["before"+s],[],i),t[e](i),es(i["after"+s],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){let i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){let s=t.get(e);if(void 0===s)throw Error('"'+e+'" is not a registered '+i+".");return s}constructor(){this.controllers=new sp(iw,"datasets",!0),this.elements=new sp(so,"elements"),this.plugins=new sp(Object,"plugins"),this.scales=new sp(sm,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}};class sf{notify(e,t,i,s){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));let a=s?this._descriptors(e).filter(s):this._descriptors(e),r=this._notify(a,e,t,i);return"afterDestroy"===t&&(this._notify(a,e,"stop"),this._notify(this._init,e,"uninstall")),r}_notify(e,t,i,s){for(let a of(s=s||{},e)){let e=a.plugin;if(!1===es(e[i],[t,s,a.options],e)&&s.cancelable)return!1}return!0}invalidate(){Z(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;let t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){let i=e&&e.config,s=et(i.options&&i.options.plugins,{}),a=function(e){let t={},i=[],s=Object.keys(sx.plugins.items);for(let e=0;e<s.length;e++)i.push(sx.getPlugin(s[e]));let a=e.plugins||[];for(let e=0;e<a.length;e++){let s=a[e];-1===i.indexOf(s)&&(i.push(s),t[s.id]=!0)}return{plugins:i,localIds:t}}(i);return!1!==s||t?function(e,t,i,s){let{plugins:a,localIds:r}=t,n=[],o=e.getContext();for(let t of a){var l;let a=t.id,c=(l=i[a],s||!1!==l?!0===l?{}:l:null);null!==c&&n.push({plugin:t,options:function(e,t,i,s){let{plugin:a,local:r}=t,n=e.pluginScopeKeys(a),o=e.getOptionScopes(i,n);return r&&a.defaults&&o.push(a.defaults),e.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}(e.config,{plugin:t,local:r[a]},c,o)})}return n}(e,a,s,t):[]}_notifyStateChanges(e){let t=this._oldCache||[],i=this._cache,s=(e,t)=>e.filter(e=>!t.some(t=>e.plugin.id===t.plugin.id));this._notify(s(t,i),e,"stop"),this._notify(s(i,t),e,"start")}constructor(){this._init=[]}}function sb(e,t){let i=tn.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||i.indexAxis||"x"}function sy(e){if("x"===e||"y"===e||"r"===e)return e}function sv(e){for(var t,i=arguments.length,s=Array(i>1?i-1:0),a=1;a<i;a++)s[a-1]=arguments[a];if(sy(e))return e;for(let i of s){let s=i.axis||("top"===(t=i.position)||"bottom"===t?"x":"left"===t||"right"===t?"y":void 0)||e.length>1&&sy(e[0].toLowerCase());if(s)return s}throw Error("Cannot determine type of '".concat(e,"' axis. Please provide 'axis' or 'position' option."))}function s_(e,t,i){if(i[t+"AxisID"]===e)return{axis:t}}function sj(e){let t=e.options||(e.options={});t.plugins=et(t.plugins,{}),t.scales=function(e,t){let i=ti[e.type]||{scales:{}},s=t.scales||{},a=sb(e.type,t),r=Object.create(null);return Object.keys(s).forEach(t=>{let n=s[t];if(!J(n))return console.error("Invalid scale configuration for scale: ".concat(t));if(n._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(t));let o=sv(t,n,function(e,t){if(t.data&&t.data.datasets){let i=t.data.datasets.filter(t=>t.xAxisID===e||t.yAxisID===e);if(i.length)return s_(e,"x",i[0])||s_(e,"y",i[0])}return{}}(t,e),tn.scales[n.type]),l=o===a?"_index_":"_value_",c=i.scales||{};r[t]=ed(Object.create(null),[{axis:o},n,c[o],c[l]])}),e.data.datasets.forEach(i=>{let a=i.type||e.type,n=i.indexAxis||sb(a,t),o=(ti[a]||{}).scales||{};Object.keys(o).forEach(e=>{let t,a=(t=e,"_index_"===e?t=n:"_value_"===e&&(t="x"===n?"y":"x"),t),l=i[a+"AxisID"]||a;r[l]=r[l]||Object.create(null),ed(r[l],[{axis:a},s[l],o[e]])})}),Object.keys(r).forEach(e=>{let t=r[e];ed(t,[tn.scales[t.type],tn.scale])}),r}(e,t)}function sw(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}let sN=new Map,sk=new Set;function sM(e,t){let i=sN.get(e);return i||(i=t(),sN.set(e,i),sk.add(i)),i}let sE=(e,t,i)=>{let s=eg(t,i);void 0!==s&&e.add(s)};class sS{get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=sw(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){let e=this._config;this.clearCache(),sj(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return sM(e,()=>[["datasets.".concat(e),""]])}datasetAnimationScopeKeys(e,t){return sM("".concat(e,".transition.").concat(t),()=>[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]])}datasetElementScopeKeys(e,t){return sM("".concat(e,"-").concat(t),()=>[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]])}pluginScopeKeys(e){let t=e.id,i=this.type;return sM("".concat(i,"-plugin-").concat(t),()=>[["plugins.".concat(t),...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){let i=this._scopeCache,s=i.get(e);return(!s||t)&&(s=new Map,i.set(e,s)),s}getOptionScopes(e,t,i){let{options:s,type:a}=this,r=this._cachedScopes(e,i),n=r.get(t);if(n)return n;let o=new Set;t.forEach(t=>{e&&(o.add(e),t.forEach(t=>sE(o,e,t))),t.forEach(e=>sE(o,s,e)),t.forEach(e=>sE(o,ti[a]||{},e)),t.forEach(e=>sE(o,tn,e)),t.forEach(e=>sE(o,ts,e))});let l=Array.from(o);return 0===l.length&&l.push(Object.create(null)),sk.has(t)&&r.set(t,l),l}chartOptionScopes(){let{options:e,type:t}=this;return[e,ti[t]||{},tn.datasets[t]||{},{type:t},tn,ts]}resolveNamedOptions(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""],a={$shared:!0},{resolver:r,subPrefixes:n}=sC(this._resolverCache,e,s),o=r;if(function(e,t){let{isScriptable:i,isIndexable:s}=tP(e);for(let a of t){let t=i(a),r=s(a),n=(r||t)&&e[a];if(t&&(ex(n)||sA(n))||r&&K(n))return!0}return!1}(r,t)){a.$shared=!1,i=ex(i)?i():i;let t=this.createResolver(e,i,n);o=tA(r,i,t)}for(let e of t)a[e]=o[e];return a}createResolver(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],s=arguments.length>3?arguments[3]:void 0,{resolver:a}=sC(this._resolverCache,e,i);return J(t)?tA(a,t,void 0,s):a}constructor(e){this._config=function(e){return(e=e||{}).data=sw(e.data),sj(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}}function sC(e,t,i){let s=e.get(t);s||(s=new Map,e.set(t,s));let a=i.join(),r=s.get(a);return r||(r={resolver:tC(t,i),subPrefixes:i.filter(e=>!e.toLowerCase().includes("hover"))},s.set(a,r)),r}let sA=e=>J(e)&&Object.getOwnPropertyNames(e).some(t=>ex(e[t])),sP=["top","bottom","left","right","chartArea"];function sD(e,t){return"top"===e||"bottom"===e||-1===sP.indexOf(e)&&"x"===t}function sT(e,t){return function(i,s){return i[e]===s[e]?i[t]-s[t]:i[e]-s[e]}}function sO(e){let t=e.chart,i=t.options.animation;t.notifyPlugins("afterRender"),es(i&&i.onComplete,[e],t)}function sL(e){let t=e.chart,i=t.options.animation;es(i&&i.onProgress,[e],t)}function sR(e){return tU()&&"string"==typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}let sq={},sz=e=>{let t=sR(e);return Object.values(sq).filter(e=>e.canvas===t).pop()};class sI{static register(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];sx.add(...t),sF()}static unregister(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];sx.remove(...t),sF()}get aspectRatio(){let{options:{aspectRatio:e,maintainAspectRatio:t},width:i,height:s,_aspectRatio:a}=this;return Z(e)?t&&a?a:s?i/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return sx}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():tQ(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return tc(this.canvas,this.ctx),this}stop(){return io.stop(this),this}resize(e,t){io.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){let i=this.options,s=this.canvas,a=i.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(s,e,t,a),n=i.devicePixelRatio||this.platform.getDevicePixelRatio(),o=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,tQ(this,n,!0)&&(this.notifyPlugins("resize",{size:r}),es(i.onResize,[this,r],this),this.attached&&this._doResize(o)&&this.render())}ensureScalesHaveIDs(){ea(this.options.scales||{},(e,t)=>{e.id=t})}buildOrUpdateScales(){let e=this.options,t=e.scales,i=this.scales,s=Object.keys(i).reduce((e,t)=>(e[t]=!1,e),{}),a=[];t&&(a=a.concat(Object.keys(t).map(e=>{let i=t[e],s=sv(e,i),a="r"===s,r="x"===s;return{options:i,dposition:a?"chartArea":r?"bottom":"left",dtype:a?"radialLinear":r?"category":"linear"}}))),ea(a,t=>{let a=t.options,r=a.id,n=sv(r,a),o=et(a.type,t.dtype);(void 0===a.position||sD(a.position,n)!==sD(t.dposition))&&(a.position=t.dposition),s[r]=!0;let l=null;r in i&&i[r].type===o?l=i[r]:i[(l=new(sx.getScale(o))({id:r,type:o,ctx:this.ctx,chart:this})).id]=l,l.init(a,e)}),ea(s,(e,t)=>{e||delete i[t]}),ea(i,e=>{i0.configure(this,e,e.options),i0.addBox(this,e)})}_updateMetasets(){let e=this._metasets,t=this.data.datasets.length,i=e.length;if(e.sort((e,t)=>e.index-t.index),i>t){for(let e=t;e<i;++e)this._destroyDatasetMeta(e);e.splice(t,i-t)}this._sortedMetasets=e.slice(0).sort(sT("order","index"))}_removeUnreferencedMetasets(){let{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((e,i)=>{0===t.filter(t=>t===e._dataset).length&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){let e,t,i=[],s=this.data.datasets;for(this._removeUnreferencedMetasets(),e=0,t=s.length;e<t;e++){let t=s[e],a=this.getDatasetMeta(e),r=t.type||this.config.type;if(a.type&&a.type!==r&&(this._destroyDatasetMeta(e),a=this.getDatasetMeta(e)),a.type=r,a.indexAxis=t.indexAxis||sb(r,this.options),a.order=t.order||0,a.index=e,a.label=""+t.label,a.visible=this.isDatasetVisible(e),a.controller)a.controller.updateIndex(e),a.controller.linkScales();else{let t=sx.getController(r),{datasetElementType:s,dataElementType:n}=tn.datasets[r];Object.assign(t,{dataElementType:sx.getElement(n),datasetElementType:s&&sx.getElement(s)}),a.controller=new t(this,e),i.push(a.controller)}}return this._updateMetasets(),i}_resetElements(){ea(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){let t=this.config;t.update();let i=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;let a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let e=0,t=this.data.datasets.length;e<t;e++){let{controller:t}=this.getDatasetMeta(e),i=!s&&-1===a.indexOf(t);t.buildOrUpdateElements(i),r=Math.max(+t.getMaxOverflow(),r)}r=this._minPadding=i.layout.autoPadding?r:0,this._updateLayout(r),s||ea(a,e=>{e.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(sT("z","_idx"));let{_active:n,_lastEvent:o}=this;o?this._eventHandler(o,!0):n.length&&this._updateHoverStyles(n,n,!0),this.render()}_updateScales(){ea(this.scales,e=>{i0.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let e=this.options;ef(new Set(Object.keys(this._listeners)),new Set(e.events))&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:e}=this;for(let{method:i,start:s,count:a}of this._getUniformDataChanges()||[]){var t="_removeElements"===i?-a:a;for(let i of Object.keys(e)){let a=+i;if(a>=s){let r=e[i];delete e[i],(t>0||a>s)&&(e[a+t]=r)}}}}_getUniformDataChanges(){let e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];let t=this.data.datasets.length,i=t=>new Set(e.filter(e=>e[0]===t).map((e,t)=>t+","+e.splice(1).join(","))),s=i(0);for(let e=1;e<t;e++)if(!ef(s,i(e)))return;return Array.from(s).map(e=>e.split(",")).map(e=>({method:e[1],start:+e[2],count:+e[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;i0.update(this,this.width,this.height,e);let t=this.chartArea,i=t.width<=0||t.height<=0;this._layers=[],ea(this.boxes,e=>{i&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))},this),this._layers.forEach((e,t)=>{e._idx=t}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,i=this.data.datasets.length;t<i;++t)this._updateDataset(t,ex(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){let i=this.getDatasetMeta(e),s={meta:i,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",s)&&(i.controller._update(t),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(io.has(this)?this.attached&&!io.running(this)&&io.start(this):(this.draw(),sO({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){let{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;let t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){let t,i,s=this._sortedMetasets,a=[];for(t=0,i=s.length;t<i;++t){let i=s[t];(!e||i.visible)&&a.push(i)}return a}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;let e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){let t=this.ctx,i={meta:e,index:e.index,cancelable:!0},s=ir(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",i)&&(s&&tg(t,s),e.controller.draw(),s&&tm(t),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return tu(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,i,s){let a=iW.modes[t];return"function"==typeof a?a(this,e,i,s):[]}getDatasetMeta(e){let t=this.data.datasets[e],i=this._metasets,s=i.filter(e=>e&&e._dataset===t).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=tS(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){let t=this.data.datasets[e];if(!t)return!1;let i=this.getDatasetMeta(e);return"boolean"==typeof i.hidden?!i.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,i){let s=i?"show":"hide",a=this.getDatasetMeta(e),r=a.controller._resolveAnimations(void 0,s);ep(t)?(a.data[t].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),r.update(a,{visible:i}),this.update(t=>t.datasetIndex===e?s:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){let t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),io.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),tc(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete sq[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let e=this._listeners,t=this.platform,i=(i,s)=>{t.addEventListener(this,i,s),e[i]=s},s=(e,t,i)=>{e.offsetX=t,e.offsetY=i,this._eventHandler(e)};ea(this.options.events,e=>i(e,s))}bindResponsiveEvents(){let e;this._responsiveListeners||(this._responsiveListeners={});let t=this._responsiveListeners,i=this.platform,s=(e,s)=>{i.addEventListener(this,e,s),t[e]=s},a=(e,s)=>{t[e]&&(i.removeEventListener(this,e,s),delete t[e])},r=(e,t)=>{this.canvas&&this.resize(e,t)},n=()=>{a("attach",n),this.attached=!0,this.resize(),s("resize",r),s("detach",e)};e=()=>{this.attached=!1,a("resize",r),this._stop(),this._resize(0,0),s("attach",n)},i.isAttached(this.canvas)?n():e()}unbindEvents(){ea(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},ea(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,i){let s,a,r,n=i?"set":"remove";for("dataset"===t&&this.getDatasetMeta(e[0].datasetIndex).controller["_"+n+"DatasetHoverStyle"](),a=0,r=e.length;a<r;++a){let t=(s=e[a])&&this.getDatasetMeta(s.datasetIndex).controller;t&&t[n+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){let t=this._active||[],i=e.map(e=>{let{datasetIndex:t,index:i}=e,s=this.getDatasetMeta(t);if(!s)throw Error("No dataset found at index "+t);return{datasetIndex:t,element:s.data[i],index:i}});er(i,t)||(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,t))}notifyPlugins(e,t,i){return this._plugins.notify(this,e,t,i)}isPluginEnabled(e){return 1===this._plugins._cache.filter(t=>t.plugin.id===e).length}_updateHoverStyles(e,t,i){let s=this.options.hover,a=(e,t)=>e.filter(e=>!t.some(t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)),r=a(t,e),n=i?e:a(e,t);r.length&&this.updateHoverStyle(r,s.mode,!1),n.length&&s.mode&&this.updateHoverStyle(n,s.mode,!0)}_eventHandler(e,t){let i={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},s=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",i,s))return;let a=this._handleEvent(e,t,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(a||i.changed)&&this.render(),this}_handleEvent(e,t,i){var s;let{_active:a=[],options:r}=this,n=this._getActiveElements(e,a,i,t),o="mouseup"===e.type||"click"===e.type||"contextmenu"===e.type,l=(s=this._lastEvent,i&&"mouseout"!==e.type?o?s:e:null);i&&(this._lastEvent=null,es(r.onHover,[e,n,this],this),o&&es(r.onClick,[e,n,this],this));let c=!er(n,a);return(c||t)&&(this._active=n,this._updateHoverStyles(n,a,t)),this._lastEvent=l,c}_getActiveElements(e,t,i,s){if("mouseout"===e.type)return[];if(!i)return t;let a=this.options.hover;return this.getElementsAtEventForMode(e,a.mode,a,s)}constructor(e,t){let i=this.config=new sS(t),s=sR(e),a=sz(s);if(a)throw Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");let r=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||(!tU()||"undefined"!=typeof OffscreenCanvas&&s instanceof OffscreenCanvas?i2:sn)),this.platform.updateConfig(i);let n=this.platform.acquireContext(s,r.aspectRatio),o=n&&n.canvas,l=o&&o.height,c=o&&o.width;if(this.id=X(),this.ctx=n,this.canvas=o,this.width=c,this.height=l,this._options=r,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new sf,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let i;return function(){for(var s=arguments.length,a=Array(s),r=0;r<s;r++)a[r]=arguments[r];return t?(clearTimeout(i),i=setTimeout(e,t,a)):e.apply(this,a),t}}(e=>this.update(e),r.resizeDelay||0),this._dataChanges=[],sq[this.id]=this,!n||!o)return void console.error("Failed to create chart: can't acquire context from the given item");io.listen(this,"complete",sO),io.listen(this,"progress",sL),this._initialize(),this.attached&&this.update()}}function sF(){return ea(sI.instances,e=>e._plugins.invalidate())}function sV(e,t,i,s){return{x:i+e*Math.cos(t),y:s+e*Math.sin(t)}}function sB(e,t,i,s,a,r){let{x:n,y:o,startAngle:l,pixelMargin:c,innerRadius:d}=t,h=Math.max(t.outerRadius+s+i-c,0),u=d>0?d+s+i+c:0,g=0,m=a-l;if(s){let e=h>0?h-s:0,t=((d>0?d-s:0)+e)/2;g=(m-(0!==t?m*t/(t+s):m))/2}let p=Math.max(.001,m*h-i/eb)/h,x=(m-p)/2,f=l+x+g,b=a-x-g,{outerStart:y,outerEnd:v,innerStart:_,innerEnd:j}=function(e,t,i,s){let a=tj(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]),r=(i-t)/2,n=Math.min(r,s*t/2),o=e=>{let t=(i-Math.min(r,e))*s/2;return eI(e,0,Math.min(r,t))};return{outerStart:o(a.outerStart),outerEnd:o(a.outerEnd),innerStart:eI(a.innerStart,0,n),innerEnd:eI(a.innerEnd,0,n)}}(t,u,h,b-f),w=h-y,N=h-v,k=f+y/w,M=b-v/N,E=u+_,S=u+j,C=f+_/E,A=b-j/S;if(e.beginPath(),r){let t=(k+M)/2;if(e.arc(n,o,h,k,t),e.arc(n,o,h,t,M),v>0){let t=sV(N,M,n,o);e.arc(t.x,t.y,v,M,b+ew)}let i=sV(S,b,n,o);if(e.lineTo(i.x,i.y),j>0){let t=sV(S,A,n,o);e.arc(t.x,t.y,j,b+ew,A+Math.PI)}let s=(b-j/u+(f+_/u))/2;if(e.arc(n,o,u,b-j/u,s,!0),e.arc(n,o,u,s,f+_/u,!0),_>0){let t=sV(E,C,n,o);e.arc(t.x,t.y,_,C+Math.PI,f-ew)}let a=sV(w,f,n,o);if(e.lineTo(a.x,a.y),y>0){let t=sV(w,k,n,o);e.arc(t.x,t.y,y,f-ew,k)}}else{e.moveTo(n,o);let t=Math.cos(k)*h+n,i=Math.sin(k)*h+o;e.lineTo(t,i);let s=Math.cos(M)*h+n,a=Math.sin(M)*h+o;e.lineTo(s,a)}e.closePath()}(0,d._)(sI,"defaults",tn),(0,d._)(sI,"instances",sq),(0,d._)(sI,"overrides",ti),(0,d._)(sI,"registry",sx),(0,d._)(sI,"version","4.5.0"),(0,d._)(sI,"getChart",sz);class sH extends so{inRange(e,t,i){let{angle:s,distance:a}=eO(this.getProps(["x","y"],i),{x:e,y:t}),{startAngle:r,endAngle:n,innerRadius:o,outerRadius:l,circumference:c}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),d=(this.options.spacing+this.options.borderWidth)/2,h=et(c,n-r),u=ez(s,r,n)&&r!==n,g=h>=ey||u,m=eF(a,o+d,l+d);return g&&m}getCenterPoint(e){let{x:t,y:i,startAngle:s,endAngle:a,innerRadius:r,outerRadius:n}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:o,spacing:l}=this.options,c=(s+a)/2,d=(r+n+l+o)/2;return{x:t+Math.cos(c)*d,y:i+Math.sin(c)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){let{options:t,circumference:i}=this,s=(t.offset||0)/4,a=(t.spacing||0)/2,r=t.circular;if(this.pixelMargin=.33*("inner"===t.borderAlign),this.fullCircles=i>ey?Math.floor(i/ey):0,0===i||this.innerRadius<0||this.outerRadius<0)return;e.save();let n=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(n)*s,Math.sin(n)*s);let o=s*(1-Math.sin(Math.min(eb,i||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,i,s,a){let{fullCircles:r,startAngle:n,circumference:o}=t,l=t.endAngle;if(r){sB(e,t,i,s,l,a);for(let t=0;t<r;++t)e.fill();isNaN(o)||(l=n+(o%ey||ey))}sB(e,t,i,s,l,a),e.fill()}(e,this,o,a,r),function(e,t,i,s,a){let{fullCircles:r,startAngle:n,circumference:o,options:l}=t,{borderWidth:c,borderJoinStyle:d,borderDash:h,borderDashOffset:u,borderRadius:g}=l,m="inner"===l.borderAlign;if(!c)return;e.setLineDash(h||[]),e.lineDashOffset=u,m?(e.lineWidth=2*c,e.lineJoin=d||"round"):(e.lineWidth=c,e.lineJoin=d||"bevel");let p=t.endAngle;if(r){sB(e,t,i,s,p,a);for(let t=0;t<r;++t)e.stroke();isNaN(o)||(p=n+(o%ey||ey))}m&&function(e,t,i){let{startAngle:s,pixelMargin:a,x:r,y:n,outerRadius:o,innerRadius:l}=t,c=a/o;e.beginPath(),e.arc(r,n,o,s-c,i+c),l>a?(c=a/l,e.arc(r,n,l,i+c,s-c,!0)):e.arc(r,n,a,i+ew,s-ew),e.closePath(),e.clip()}(e,t,p),l.selfJoin&&p-n>=eb&&0===g&&"miter"!==d&&function(e,t,i){let{startAngle:s,x:a,y:r,outerRadius:n,innerRadius:o,options:l}=t,{borderWidth:c,borderJoinStyle:d}=l,h=Math.min(c/n,eq(s-i));if(e.beginPath(),e.arc(a,r,n-c/2,s+h/2,i-h/2),o>0){let t=Math.min(c/o,eq(s-i));e.arc(a,r,o+c/2,i-t/2,s+t/2,!0)}else{let t=Math.min(c/2,n*eq(s-i));if("round"===d)e.arc(a,r,t,i-eb/2,s+eb/2,!0);else if("bevel"===d){let n=2*t*t,o=-n*Math.cos(i+eb/2)+a,l=-n*Math.sin(i+eb/2)+r,c=n*Math.cos(s+eb/2)+a,d=n*Math.sin(s+eb/2)+r;e.lineTo(o,l),e.lineTo(c,d)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}(e,t,p),r||(sB(e,t,i,s,p,a),e.stroke())}(e,this,o,a,r),e.restore()}constructor(e){super(),(0,d._)(this,"circumference",void 0),(0,d._)(this,"endAngle",void 0),(0,d._)(this,"fullCircles",void 0),(0,d._)(this,"innerRadius",void 0),(0,d._)(this,"outerRadius",void 0),(0,d._)(this,"pixelMargin",void 0),(0,d._)(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}}function sW(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=et(i.borderCapStyle,t.borderCapStyle),e.setLineDash(et(i.borderDash,t.borderDash)),e.lineDashOffset=et(i.borderDashOffset,t.borderDashOffset),e.lineJoin=et(i.borderJoinStyle,t.borderJoinStyle),e.lineWidth=et(i.borderWidth,t.borderWidth),e.strokeStyle=et(i.borderColor,t.borderColor)}function sU(e,t,i){e.lineTo(i.x,i.y)}function sY(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=e.length,{start:a=0,end:r=s-1}=i,{start:n,end:o}=t,l=Math.max(a,n),c=Math.min(r,o);return{count:s,start:l,loop:t.loop,ilen:c<l&&!(a<n&&r<n||a>o&&r>o)?s+c-l:c-l}}function s$(e,t,i,s){let a,r,n,{points:o,options:l}=t,{count:c,start:d,loop:h,ilen:u}=sY(o,i,s),g=l.stepped?tp:l.tension||"monotone"===l.cubicInterpolationMode?tx:sU,{move:m=!0,reverse:p}=s||{};for(a=0;a<=u;++a)(r=o[(d+(p?u-a:a))%c]).skip||(m?(e.moveTo(r.x,r.y),m=!1):g(e,n,r,p,l.stepped),n=r);return h&&g(e,n,r=o[(d+(p?u:0))%c],p,l.stepped),!!h}function sG(e,t,i,s){let a,r,n,o,l,c,d=t.points,{count:h,start:u,ilen:g}=sY(d,i,s),{move:m=!0,reverse:p}=s||{},x=0,f=0,b=e=>(u+(p?g-e:e))%h,y=()=>{o!==l&&(e.lineTo(x,l),e.lineTo(x,o),e.lineTo(x,c))};for(m&&(r=d[b(0)],e.moveTo(r.x,r.y)),a=0;a<=g;++a){if((r=d[b(a)]).skip)continue;let t=r.x,i=r.y,s=0|t;s===n?(i<o?o=i:i>l&&(l=i),x=(f*x+t)/++f):(y(),e.lineTo(t,i),n=s,f=0,o=l=i),c=i}y()}function sX(e){let t=e.options,i=t.borderDash&&t.borderDash.length;return e._decimated||e._loop||t.tension||"monotone"===t.cubicInterpolationMode||t.stepped||i?s$:sG}(0,d._)(sH,"id","arc"),(0,d._)(sH,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),(0,d._)(sH,"defaultRoutes",{backgroundColor:"backgroundColor"}),(0,d._)(sH,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e});let sZ="function"==typeof Path2D;class sK extends so{updateControlPoints(e,t){let i=this.options;if((i.tension||"monotone"===i.cubicInterpolationMode)&&!i.stepped&&!this._pointsUpdated){let s=i.spanGaps?this._loop:this._fullLoop;!function(e,t,i,s,a){let r,n,o,l;if(t.spanGaps&&(e=e.filter(e=>!e.skip)),"monotone"===t.cubicInterpolationMode)!function(e){let t,i,s,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",r=tH(a),n=e.length,o=Array(n).fill(0),l=Array(n),c=tB(e,0);for(t=0;t<n;++t)if(i=s,s=c,c=tB(e,t+1),s){if(c){let e=c[a]-s[a];o[t]=0!==e?(c[r]-s[r])/e:0}l[t]=i?c?eE(o[t-1])!==eE(o[t])?0:(o[t-1]+o[t])/2:o[t-1]:o[t]}!function(e,t,i){let s,a,r,n,o,l=e.length,c=tB(e,0);for(let d=0;d<l-1;++d)if(o=c,c=tB(e,d+1),o&&c){if(eS(t[d],0,tV)){i[d]=i[d+1]=0;continue}(n=Math.pow(s=i[d]/t[d],2)+Math.pow(a=i[d+1]/t[d],2))<=9||(r=3/Math.sqrt(n),i[d]=s*r*t[d],i[d+1]=a*r*t[d])}}(e,o,l),function(e,t){let i,s,a,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x",n=tH(r),o=e.length,l=tB(e,0);for(let c=0;c<o;++c){if(s=a,a=l,l=tB(e,c+1),!a)continue;let o=a[r],d=a[n];s&&(i=(o-s[r])/3,a["cp1".concat(r)]=o-i,a["cp1".concat(n)]=d-i*t[c]),l&&(i=(l[r]-o)/3,a["cp2".concat(r)]=o+i,a["cp2".concat(n)]=d+i*t[c])}}(e,l,a)}(e,a);else{let i=s?e[e.length-1]:e[0];for(r=0,n=e.length;r<n;++r)l=function(e,t,i,s){let a=e.skip?t:e,r=i.skip?t:i,n=eL(t,a),o=eL(r,t),l=n/(n+o),c=o/(n+o);l=isNaN(l)?0:l,c=isNaN(c)?0:c;let d=s*l,h=s*c;return{previous:{x:t.x-d*(r.x-a.x),y:t.y-d*(r.y-a.y)},next:{x:t.x+h*(r.x-a.x),y:t.y+h*(r.y-a.y)}}}(i,o=e[r],e[Math.min(r+1,n-!s)%n],t.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,i=o}t.capBezierPoints&&function(e,t){let i,s,a,r,n,o=tu(e[0],t);for(i=0,s=e.length;i<s;++i)n=r,r=o,o=i<s-1&&tu(e[i+1],t),r&&(a=e[i],n&&(a.cp1x=tW(a.cp1x,t.left,t.right),a.cp1y=tW(a.cp1y,t.top,t.bottom)),o&&(a.cp2x=tW(a.cp2x,t.left,t.right),a.cp2y=tW(a.cp2y,t.top,t.bottom)))}(e,i)}(this._points,i,e,s,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){let i=e.points,s=e.options.spanGaps,a=i.length;if(!a)return[];let r=!!e._loop,{start:n,end:o}=function(e,t,i,s){let a=0,r=t-1;if(i&&!s)for(;a<t&&!e[a].skip;)a++;for(;a<t&&e[a].skip;)a++;for(a%=t,i&&(r+=a);r>a&&e[r%t].skip;)r--;return{start:a,end:r%=t}}(i,a,r,s);if(!0===s)return ii(e,[{start:n,end:o,loop:r}],i,t);let l=o<n?o+a:o,c=!!e._fullLoop&&0===n&&o===a-1;return ii(e,function(e,t,i,s){let a,r=e.length,n=[],o=t,l=e[t];for(a=t+1;a<=i;++a){let i=e[a%r];i.skip||i.stop?l.skip||(s=!1,n.push({start:t%r,end:(a-1)%r,loop:s}),t=o=i.stop?a:null):(o=a,l.skip&&(t=a)),l=i}return null!==o&&n.push({start:t%r,end:o%r,loop:s}),n}(i,n,l,c),i,t)}(this,this.options.segment))}first(){let e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){let e=this.segments,t=this.points,i=e.length;return i&&t[e[i-1].end]}interpolate(e,t){let i,s,a=this.options,r=e[t],n=this.points,o=it(this,{property:t,start:r,end:r});if(!o.length)return;let l=[],c=a.stepped?t5:a.tension||"monotone"===a.cubicInterpolationMode?t6:t2;for(i=0,s=o.length;i<s;++i){let{start:s,end:d}=o[i],h=n[s],u=n[d];if(h===u){l.push(h);continue}let g=Math.abs((r-h[t])/(u[t]-h[t])),m=c(h,u,g,a.stepped);m[t]=e[t],l.push(m)}return 1===l.length?l[0]:l}pathSegment(e,t,i){return sX(this)(e,this,t,i)}path(e,t,i){let s=this.segments,a=sX(this),r=this._loop;for(let n of(t=t||0,i=i||this.points.length-t,s))r&=a(e,this,n,{start:t,end:t+i-1});return!!r}draw(e,t,i,s){let a=this.options||{};(this.points||[]).length&&a.borderWidth&&(e.save(),function(e,t,i,s){if(sZ&&!t.options.segment){let a;(a=t._path)||(a=t._path=new Path2D,t.path(a,i,s)&&a.closePath()),sW(e,t.options),e.stroke(a)}else{let{segments:a,options:r}=t,n=sX(t);for(let o of a)sW(e,r,o.style),e.beginPath(),n(e,t,o,{start:i,end:i+s-1})&&e.closePath(),e.stroke()}}(e,this,i,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}}function sJ(e,t,i,s){let a=e.options,{[i]:r}=e.getProps([i],s);return Math.abs(t-r)<a.radius+a.hitRadius}(0,d._)(sK,"id","line"),(0,d._)(sK,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),(0,d._)(sK,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),(0,d._)(sK,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e});class sQ extends so{inRange(e,t,i){let s=this.options,{x:a,y:r}=this.getProps(["x","y"],i);return Math.pow(e-a,2)+Math.pow(t-r,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,t){return sJ(this,e,"x",t)}inYRange(e,t){return sJ(this,e,"y",t)}getCenterPoint(e){let{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}size(e){let t=(e=e||this.options||{}).radius||0,i=(t=Math.max(t,t&&e.hoverRadius||0))&&e.borderWidth||0;return(t+i)*2}draw(e,t){let i=this.options;!this.skip&&!(i.radius<.1)&&tu(this,t,this.size(i)/2)&&(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.fillStyle=i.backgroundColor,td(e,i,this.x,this.y))}getRange(){let e=this.options||{};return e.radius+e.hitRadius}constructor(e){super(),(0,d._)(this,"parsed",void 0),(0,d._)(this,"skip",void 0),(0,d._)(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}}function s0(e,t){let i,s,a,r,n,{x:o,y:l,base:c,width:d,height:h}=e.getProps(["x","y","base","width","height"],t);return e.horizontal?(n=h/2,i=Math.min(o,c),s=Math.max(o,c),a=l-n,r=l+n):(i=o-(n=d/2),s=o+n,a=Math.min(l,c),r=Math.max(l,c)),{left:i,top:a,right:s,bottom:r}}function s1(e,t,i,s){return e?0:eI(t,i,s)}function s2(e,t,i,s){let a=null===t,r=null===i,n=e&&!(a&&r)&&s0(e,s);return n&&(a||eF(t,n.left,n.right))&&(r||eF(i,n.top,n.bottom))}function s5(e,t){e.rect(t.x,t.y,t.w,t.h)}function s6(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=e.x!==i.x?-t:0,a=e.y!==i.y?-t:0,r=(e.x+e.w!==i.x+i.w?t:0)-s,n=(e.y+e.h!==i.y+i.h?t:0)-a;return{x:e.x+s,y:e.y+a,w:e.w+r,h:e.h+n,radius:e.radius}}(0,d._)(sQ,"id","point"),(0,d._)(sQ,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),(0,d._)(sQ,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class s3 extends so{draw(e){var t;let{inflateAmount:i,options:{borderColor:s,backgroundColor:a}}=this,{inner:r,outer:n}=function(e){let t=s0(e),i=t.right-t.left,s=t.bottom-t.top,a=function(e,t,i){let s=e.options.borderWidth,a=e.borderSkipped,r=tw(s);return{t:s1(a.top,r.top,0,i),r:s1(a.right,r.right,0,t),b:s1(a.bottom,r.bottom,0,i),l:s1(a.left,r.left,0,t)}}(e,i/2,s/2),r=function(e,t,i){let{enableBorderRadius:s}=e.getProps(["enableBorderRadius"]),a=e.options.borderRadius,r=tN(a),n=Math.min(t,i),o=e.borderSkipped,l=s||J(a);return{topLeft:s1(!l||o.top||o.left,r.topLeft,0,n),topRight:s1(!l||o.top||o.right,r.topRight,0,n),bottomLeft:s1(!l||o.bottom||o.left,r.bottomLeft,0,n),bottomRight:s1(!l||o.bottom||o.right,r.bottomRight,0,n)}}(e,i/2,s/2);return{outer:{x:t.left,y:t.top,w:i,h:s,radius:r},inner:{x:t.left+a.l,y:t.top+a.t,w:i-a.l-a.r,h:s-a.t-a.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(a.t,a.l)),topRight:Math.max(0,r.topRight-Math.max(a.t,a.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(a.b,a.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(a.b,a.r))}}}}(this),o=(t=n.radius).topLeft||t.topRight||t.bottomLeft||t.bottomRight?tb:s5;e.save(),(n.w!==r.w||n.h!==r.h)&&(e.beginPath(),o(e,s6(n,i,r)),e.clip(),o(e,s6(r,-i,n)),e.fillStyle=s,e.fill("evenodd")),e.beginPath(),o(e,s6(r,i)),e.fillStyle=a,e.fill(),e.restore()}inRange(e,t,i){return s2(this,e,t,i)}inXRange(e,t){return s2(this,e,null,t)}inYRange(e,t){return s2(this,null,e,t)}getCenterPoint(e){let{x:t,y:i,base:s,horizontal:a}=this.getProps(["x","y","base","horizontal"],e);return{x:a?(t+s)/2:t,y:a?i:(i+s)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}}(0,d._)(s3,"id","bar"),(0,d._)(s3,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),(0,d._)(s3,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});let s4=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],s8=s4.map(e=>e.replace("rgb(","rgba(").replace(")",", 0.5)")),s7=(e,t)=>{let{boxHeight:i=t,boxWidth:s=t}=e;return e.usePointStyle&&(i=Math.min(i,t),s=e.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:i,itemHeight:Math.max(t,i)}};class s9 extends so{update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let e=this.options.labels||{},t=es(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(t=>e.filter(t,this.chart.data))),e.sort&&(t=t.sort((t,i)=>e.sort(t,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){let e,t,{options:i,ctx:s}=this;if(!i.display){this.width=this.height=0;return}let a=i.labels,r=tM(a.font),n=r.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=s7(a,n);s.font=r.string,this.isHorizontal()?(e=this.maxWidth,t=this._fitRows(o,n,l,c)+10):(t=this.maxHeight,e=this._fitCols(o,r,l,c)+10),this.width=Math.min(e,i.maxWidth||this.maxWidth),this.height=Math.min(t,i.maxHeight||this.maxHeight)}_fitRows(e,t,i,s){let{ctx:a,maxWidth:r,options:{labels:{padding:n}}}=this,o=this.legendHitBoxes=[],l=this.lineWidths=[0],c=s+n,d=e;a.textAlign="left",a.textBaseline="middle";let h=-1,u=-c;return this.legendItems.forEach((e,g)=>{let m=i+t/2+a.measureText(e.text).width;(0===g||l[l.length-1]+m+2*n>r)&&(d+=c,l[l.length-(g>0?0:1)]=0,u+=c,h++),o[g]={left:0,top:u,row:h,width:m,height:s},l[l.length-1]+=m+n}),d}_fitCols(e,t,i,s){let{ctx:a,maxHeight:r,options:{labels:{padding:n}}}=this,o=this.legendHitBoxes=[],l=this.columnSizes=[],c=r-e,d=n,h=0,u=0,g=0,m=0;return this.legendItems.forEach((e,r)=>{var p,x,f,b,y,v,_,j,w,N,k,M;let E,S,{itemWidth:C,itemHeight:A}=(p=i,x=t,f=a,b=e,y=s,{itemWidth:(v=b,_=p,j=x,w=f,(E=v.text)&&"string"!=typeof E&&(E=E.reduce((e,t)=>e.length>t.length?e:t)),_+j.size/2+w.measureText(E).width),itemHeight:(N=y,k=b,M=x.lineHeight,S=N,"string"!=typeof k.text&&(S=ae(k,M)),S)});r>0&&u+A+2*n>c&&(d+=h+n,l.push({width:h,height:u}),g+=h+n,m++,h=u=0),o[r]={left:g,top:u,col:m,width:C,height:A},h=Math.max(h,C),u+=A+n}),d+=h,l.push({width:h,height:u}),d}adjustHitBoxes(){if(!this.options.display)return;let e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:s},rtl:a}}=this,r=t3(a,this.left,this.width);if(this.isHorizontal()){let a=0,n=eZ(i,this.left+s,this.right-this.lineWidths[a]);for(let o of t)a!==o.row&&(a=o.row,n=eZ(i,this.left+s,this.right-this.lineWidths[a])),o.top+=this.top+e+s,o.left=r.leftForLtr(r.x(n),o.width),n+=o.width+s}else{let a=0,n=eZ(i,this.top+e+s,this.bottom-this.columnSizes[a].height);for(let o of t)o.col!==a&&(a=o.col,n=eZ(i,this.top+e+s,this.bottom-this.columnSizes[a].height)),o.top=n,o.left+=this.left+s,o.left=r.leftForLtr(r.x(o.left),o.width),n+=o.height+s}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){let e=this.ctx;tg(e,this),this._draw(),tm(e)}}_draw(){let e,{options:t,columnSizes:i,lineWidths:s,ctx:a}=this,{align:r,labels:n}=t,o=tn.color,l=t3(t.rtl,this.left,this.width),c=tM(n.font),{padding:d}=n,h=c.size,u=h/2;this.drawTitle(),a.textAlign=l.textAlign("left"),a.textBaseline="middle",a.lineWidth=.5,a.font=c.string;let{boxWidth:g,boxHeight:m,itemHeight:p}=s7(n,h),x=function(e,t,i){if(isNaN(g)||g<=0||isNaN(m)||m<0)return;a.save();let s=et(i.lineWidth,1);if(a.fillStyle=et(i.fillStyle,o),a.lineCap=et(i.lineCap,"butt"),a.lineDashOffset=et(i.lineDashOffset,0),a.lineJoin=et(i.lineJoin,"miter"),a.lineWidth=s,a.strokeStyle=et(i.strokeStyle,o),a.setLineDash(et(i.lineDash,[])),n.usePointStyle){let r={radius:m*Math.SQRT2/2,pointStyle:i.pointStyle,rotation:i.rotation,borderWidth:s};th(a,r,l.xPlus(e,g/2),t+u,n.pointStyleWidth&&g)}else{let r=t+Math.max((h-m)/2,0),n=l.leftForLtr(e,g),o=tN(i.borderRadius);a.beginPath(),Object.values(o).some(e=>0!==e)?tb(a,{x:n,y:r,w:g,h:m,radius:o}):a.rect(n,r,g,m),a.fill(),0!==s&&a.stroke()}a.restore()},f=function(e,t,i){tf(a,i.text,e,t+p/2,c,{strikethrough:i.hidden,textAlign:l.textAlign(i.textAlign)})},b=this.isHorizontal(),y=this._computeTitleHeight();e=b?{x:eZ(r,this.left+d,this.right-s[0]),y:this.top+d+y,line:0}:{x:this.left+d,y:eZ(r,this.top+y+d,this.bottom-i[0].height),line:0},t4(this.ctx,t.textDirection);let v=p+d;this.legendItems.forEach((o,h)=>{var m,p;a.strokeStyle=o.fontColor,a.fillStyle=o.fontColor;let _=a.measureText(o.text).width,j=l.textAlign(o.textAlign||(o.textAlign=n.textAlign)),w=g+u+_,N=e.x,k=e.y;if(l.setWidth(this.width),b?h>0&&N+w+d>this.right&&(k=e.y+=v,e.line++,N=e.x=eZ(r,this.left+d,this.right-s[e.line])):h>0&&k+v>this.bottom&&(N=e.x=N+i[e.line].width+d,e.line++,k=e.y=eZ(r,this.top+y+d,this.bottom-i[e.line].height)),x(l.x(N),k,o),m=N+g+u,p=b?N+w:this.right,N=j===(t.rtl?"left":"right")?p:"center"===j?(m+p)/2:m,f(l.x(N),k,o),b)e.x+=w+d;else if("string"!=typeof o.text){let t=c.lineHeight;e.y+=ae(o,t)+d}else e.y+=v}),t8(this.ctx,t.textDirection)}drawTitle(){let e,t=this.options,i=t.title,s=tM(i.font),a=tk(i.padding);if(!i.display)return;let r=t3(t.rtl,this.left,this.width),n=this.ctx,o=i.position,l=s.size/2,c=a.top+l,d=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),e=this.top+c,d=eZ(t.align,d,this.right-h);else{let i=this.columnSizes.reduce((e,t)=>Math.max(e,t.height),0);e=c+eZ(t.align,this.top,this.bottom-i-t.labels.padding-this._computeTitleHeight())}let u=eZ(o,d,d+h);n.textAlign=r.textAlign(eX(o)),n.textBaseline="middle",n.strokeStyle=i.color,n.fillStyle=i.color,n.font=s.string,tf(n,i.text,u,e,s)}_computeTitleHeight(){let e=this.options.title,t=tM(e.font),i=tk(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,s,a;if(eF(e,this.left,this.right)&&eF(t,this.top,this.bottom)){for(i=0,a=this.legendHitBoxes;i<a.length;++i)if(eF(e,(s=a[i]).left,s.left+s.width)&&eF(t,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(e){var t,i;let s=this.options;if(t=e.type,i=s,("mousemove"!==t&&"mouseout"!==t||!i.onHover&&!i.onLeave)&&(!i.onClick||"click"!==t&&"mouseup"!==t))return;let a=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){let t=this._hoveredItem,i=null!==t&&null!==a&&t.datasetIndex===a.datasetIndex&&t.index===a.index;t&&!i&&es(s.onLeave,[e,t,this],this),this._hoveredItem=a,a&&!i&&es(s.onHover,[e,a,this],this)}else a&&es(s.onClick,[e,a,this],this)}constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}}function ae(e,t){return t*(e.text?e.text.length:0)}class at extends so{update(e,t){let i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;let s=K(i.text)?i.text.length:1;this._padding=tk(i.padding);let a=s*tM(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){let e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){let t,i,s,{top:a,left:r,bottom:n,right:o,options:l}=this,c=l.align,d=0;return this.isHorizontal()?(i=eZ(c,r,o),s=a+e,t=o-r):("left"===l.position?(i=r+e,s=eZ(c,n,a),d=-.5*eb):(i=o-e,s=eZ(c,a,n),d=.5*eb),t=n-a),{titleX:i,titleY:s,maxWidth:t,rotation:d}}draw(){let e=this.ctx,t=this.options;if(!t.display)return;let i=tM(t.font),s=i.lineHeight/2+this._padding.top,{titleX:a,titleY:r,maxWidth:n,rotation:o}=this._drawArgs(s);tf(e,t.text,0,0,i,{color:t.color,maxWidth:n,rotation:o,textAlign:eX(t.align),textBaseline:"middle",translation:[a,r]})}constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}}new WeakMap;let ai={average(e){let t,i;if(!e.length)return!1;let s=new Set,a=0,r=0;for(t=0,i=e.length;t<i;++t){let i=e[t].element;if(i&&i.hasValue()){let e=i.tooltipPosition();s.add(e.x),a+=e.y,++r}}return 0!==r&&0!==s.size&&{x:[...s].reduce((e,t)=>e+t)/s.size,y:a/r}},nearest(e,t){let i,s,a;if(!e.length)return!1;let r=t.x,n=t.y,o=1/0;for(i=0,s=e.length;i<s;++i){let s=e[i].element;if(s&&s.hasValue()){let e=eL(t,s.getCenterPoint());e<o&&(o=e,a=s)}}if(a){let e=a.tooltipPosition();r=e.x,n=e.y}return{x:r,y:n}}};function as(e,t){return t&&(K(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function aa(e){return("string"==typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function ar(e,t){let i=e.chart.ctx,{body:s,footer:a,title:r}=e,{boxWidth:n,boxHeight:o}=t,l=tM(t.bodyFont),c=tM(t.titleFont),d=tM(t.footerFont),h=r.length,u=a.length,g=s.length,m=tk(t.padding),p=m.height,x=0,f=s.reduce((e,t)=>e+t.before.length+t.lines.length+t.after.length,0);f+=e.beforeBody.length+e.afterBody.length,h&&(p+=h*c.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),f&&(p+=g*(t.displayColors?Math.max(o,l.lineHeight):l.lineHeight)+(f-g)*l.lineHeight+(f-1)*t.bodySpacing),u&&(p+=t.footerMarginTop+u*d.lineHeight+(u-1)*t.footerSpacing);let b=0,y=function(e){x=Math.max(x,i.measureText(e).width+b)};return i.save(),i.font=c.string,ea(e.title,y),i.font=l.string,ea(e.beforeBody.concat(e.afterBody),y),b=t.displayColors?n+2+t.boxPadding:0,ea(s,e=>{ea(e.before,y),ea(e.lines,y),ea(e.after,y)}),b=0,i.font=d.string,ea(e.footer,y),i.restore(),{width:x+=m.width,height:p}}function an(e,t,i){let s=i.yAlign||t.yAlign||function(e,t){let{y:i,height:s}=t;return i<s/2?"top":i>e.height-s/2?"bottom":"center"}(e,i);return{xAlign:i.xAlign||t.xAlign||function(e,t,i,s){let{x:a,width:r}=i,{width:n,chartArea:{left:o,right:l}}=e,c="center";return"center"===s?c=a<=(o+l)/2?"left":"right":a<=r/2?c="left":a>=n-r/2&&(c="right"),function(e,t,i,s){let{x:a,width:r}=s,n=i.caretSize+i.caretPadding;if("left"===e&&a+r+n>t.width||"right"===e&&a-r-n<0)return!0}(c,e,t,i)&&(c="center"),c}(e,t,i,s),yAlign:s}}function ao(e,t,i,s){let{caretSize:a,caretPadding:r,cornerRadius:n}=e,{xAlign:o,yAlign:l}=i,c=a+r,{topLeft:d,topRight:h,bottomLeft:u,bottomRight:g}=tN(n),m=function(e,t){let{x:i,width:s}=e;return"right"===t?i-=s:"center"===t&&(i-=s/2),i}(t,o),p=function(e,t,i){let{y:s,height:a}=e;return"top"===t?s+=i:"bottom"===t?s-=a+i:s-=a/2,s}(t,l,c);return"center"===l?"left"===o?m+=c:"right"===o&&(m-=c):"left"===o?m-=Math.max(d,u)+a:"right"===o&&(m+=Math.max(h,g)+a),{x:eI(m,0,s.width-t.width),y:eI(p,0,s.height-t.height)}}function al(e,t,i){let s=tk(i.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-s.right:e.x+s.left}function ac(e,t){let i=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return i?e.override(i):e}let ad={beforeTitle:G,title(e){if(e.length>0){let t=e[0],i=t.chart.data.labels,s=i?i.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return i[t.dataIndex]}return""},afterTitle:G,beforeBody:G,beforeLabel:G,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");let i=e.formattedValue;return Z(i)||(t+=i),t},labelColor(e){let t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){let t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:G,afterBody:G,beforeFooter:G,footer:G,afterFooter:G};function ah(e,t,i,s){let a=e[t].call(i,s);return void 0===a?ad[t].call(i,s):a}class au extends so{initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let e=this._cachedAnimations;if(e)return e;let t=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&t.options.animation&&i.animations,a=new ih(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){var e;return this.$context||(this.$context=(e=this.chart.getContext(),tS(e,{tooltip:this,tooltipItems:this._tooltipItems,type:"tooltip"})))}getTitle(e,t){let{callbacks:i}=t,s=ah(i,"beforeTitle",this,e),a=ah(i,"title",this,e),r=ah(i,"afterTitle",this,e),n=[];return n=as(n,aa(s)),n=as(n,aa(a)),n=as(n,aa(r))}getBeforeBody(e,t){return as([],aa(ah(t.callbacks,"beforeBody",this,e)))}getBody(e,t){let{callbacks:i}=t,s=[];return ea(e,e=>{let t={before:[],lines:[],after:[]},a=ac(i,e);as(t.before,aa(ah(a,"beforeLabel",this,e))),as(t.lines,ah(a,"label",this,e)),as(t.after,aa(ah(a,"afterLabel",this,e))),s.push(t)}),s}getAfterBody(e,t){return as([],aa(ah(t.callbacks,"afterBody",this,e)))}getFooter(e,t){let{callbacks:i}=t,s=ah(i,"beforeFooter",this,e),a=ah(i,"footer",this,e),r=ah(i,"afterFooter",this,e),n=[];return n=as(n,aa(s)),n=as(n,aa(a)),n=as(n,aa(r))}_createItems(e){let t,i,s=this._active,a=this.chart.data,r=[],n=[],o=[],l=[];for(t=0,i=s.length;t<i;++t)l.push(function(e,t){let{element:i,datasetIndex:s,index:a}=t,r=e.getDatasetMeta(s).controller,{label:n,value:o}=r.getLabelAndValue(a);return{chart:e,label:n,parsed:r.getParsed(a),raw:e.data.datasets[s].data[a],formattedValue:o,dataset:r.getDataset(),dataIndex:a,datasetIndex:s,element:i}}(this.chart,s[t]));return e.filter&&(l=l.filter((t,i,s)=>e.filter(t,i,s,a))),e.itemSort&&(l=l.sort((t,i)=>e.itemSort(t,i,a))),ea(l,t=>{let i=ac(e.callbacks,t);r.push(ah(i,"labelColor",this,t)),n.push(ah(i,"labelPointStyle",this,t)),o.push(ah(i,"labelTextColor",this,t))}),this.labelColors=r,this.labelPointStyles=n,this.labelTextColors=o,this.dataPoints=l,l}update(e,t){let i,s=this.options.setContext(this.getContext()),a=this._active,r=[];if(a.length){let e=ai[s.position].call(this,a,this._eventPosition);r=this._createItems(s),this.title=this.getTitle(r,s),this.beforeBody=this.getBeforeBody(r,s),this.body=this.getBody(r,s),this.afterBody=this.getAfterBody(r,s),this.footer=this.getFooter(r,s);let t=this._size=ar(this,s),n=Object.assign({},e,t),o=an(this.chart,s,n),l=ao(s,n,o,this.chart);this.xAlign=o.xAlign,this.yAlign=o.yAlign,i={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(i={opacity:0});this._tooltipItems=r,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,i,s){let a=this.getCaretPosition(e,i,s);t.lineTo(a.x1,a.y1),t.lineTo(a.x2,a.y2),t.lineTo(a.x3,a.y3)}getCaretPosition(e,t,i){let s,a,r,n,o,l,{xAlign:c,yAlign:d}=this,{caretSize:h,cornerRadius:u}=i,{topLeft:g,topRight:m,bottomLeft:p,bottomRight:x}=tN(u),{x:f,y:b}=e,{width:y,height:v}=t;return"center"===d?(o=b+v/2,"left"===c?(a=(s=f)-h,n=o+h,l=o-h):(a=(s=f+y)+h,n=o-h,l=o+h),r=s):(a="left"===c?f+Math.max(g,p)+h:"right"===c?f+y-Math.max(m,x)-h:this.caretX,"top"===d?(o=(n=b)-h,s=a-h,r=a+h):(o=(n=b+v)+h,s=a+h,r=a-h),l=n),{x1:s,x2:a,x3:r,y1:n,y2:o,y3:l}}drawTitle(e,t,i){let s,a,r,n=this.title,o=n.length;if(o){let l=t3(i.rtl,this.x,this.width);for(r=0,e.x=al(this,i.titleAlign,i),t.textAlign=l.textAlign(i.titleAlign),t.textBaseline="middle",s=tM(i.titleFont),a=i.titleSpacing,t.fillStyle=i.titleColor,t.font=s.string;r<o;++r)t.fillText(n[r],l.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+a,r+1===o&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,t,i,s,a){let r=this.labelColors[i],n=this.labelPointStyles[i],{boxHeight:o,boxWidth:l}=a,c=tM(a.bodyFont),d=al(this,"left",a),h=s.x(d),u=o<c.lineHeight?(c.lineHeight-o)/2:0,g=t.y+u;if(a.usePointStyle){let t={radius:Math.min(l,o)/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:1},i=s.leftForLtr(h,l)+l/2,c=g+o/2;e.strokeStyle=a.multiKeyBackground,e.fillStyle=a.multiKeyBackground,td(e,t,i,c),e.strokeStyle=r.borderColor,e.fillStyle=r.backgroundColor,td(e,t,i,c)}else{e.lineWidth=J(r.borderWidth)?Math.max(...Object.values(r.borderWidth)):r.borderWidth||1,e.strokeStyle=r.borderColor,e.setLineDash(r.borderDash||[]),e.lineDashOffset=r.borderDashOffset||0;let t=s.leftForLtr(h,l),i=s.leftForLtr(s.xPlus(h,1),l-2),n=tN(r.borderRadius);Object.values(n).some(e=>0!==e)?(e.beginPath(),e.fillStyle=a.multiKeyBackground,tb(e,{x:t,y:g,w:l,h:o,radius:n}),e.fill(),e.stroke(),e.fillStyle=r.backgroundColor,e.beginPath(),tb(e,{x:i,y:g+1,w:l-2,h:o-2,radius:n}),e.fill()):(e.fillStyle=a.multiKeyBackground,e.fillRect(t,g,l,o),e.strokeRect(t,g,l,o),e.fillStyle=r.backgroundColor,e.fillRect(i,g+1,l-2,o-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,t,i){let s,a,r,n,o,l,{body:c}=this,{bodySpacing:d,bodyAlign:h,displayColors:u,boxHeight:g,boxWidth:m,boxPadding:p}=i,x=tM(i.bodyFont),f=x.lineHeight,b=0,y=t3(i.rtl,this.x,this.width),v=function(i){t.fillText(i,y.x(e.x+b),e.y+f/2),e.y+=f+d},_=y.textAlign(h);for(t.textAlign=h,t.textBaseline="middle",t.font=x.string,e.x=al(this,_,i),t.fillStyle=i.bodyColor,ea(this.beforeBody,v),b=u&&"right"!==_?"center"===h?m/2+p:m+2+p:0,r=0,o=c.length;r<o;++r){for(s=c[r],t.fillStyle=this.labelTextColors[r],ea(s.before,v),a=s.lines,u&&a.length&&(this._drawColorBox(t,e,r,y,i),f=Math.max(x.lineHeight,g)),n=0,l=a.length;n<l;++n)v(a[n]),f=x.lineHeight;ea(s.after,v)}b=0,f=x.lineHeight,ea(this.afterBody,v),e.y-=d}drawFooter(e,t,i){let s,a,r=this.footer,n=r.length;if(n){let o=t3(i.rtl,this.x,this.width);for(e.x=al(this,i.footerAlign,i),e.y+=i.footerMarginTop,t.textAlign=o.textAlign(i.footerAlign),t.textBaseline="middle",s=tM(i.footerFont),t.fillStyle=i.footerColor,t.font=s.string,a=0;a<n;++a)t.fillText(r[a],o.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+i.footerSpacing}}drawBackground(e,t,i,s){let{xAlign:a,yAlign:r}=this,{x:n,y:o}=e,{width:l,height:c}=i,{topLeft:d,topRight:h,bottomLeft:u,bottomRight:g}=tN(s.cornerRadius);t.fillStyle=s.backgroundColor,t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.beginPath(),t.moveTo(n+d,o),"top"===r&&this.drawCaret(e,t,i,s),t.lineTo(n+l-h,o),t.quadraticCurveTo(n+l,o,n+l,o+h),"center"===r&&"right"===a&&this.drawCaret(e,t,i,s),t.lineTo(n+l,o+c-g),t.quadraticCurveTo(n+l,o+c,n+l-g,o+c),"bottom"===r&&this.drawCaret(e,t,i,s),t.lineTo(n+u,o+c),t.quadraticCurveTo(n,o+c,n,o+c-u),"center"===r&&"left"===a&&this.drawCaret(e,t,i,s),t.lineTo(n,o+d),t.quadraticCurveTo(n,o,n+d,o),t.closePath(),t.fill(),s.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){let t=this.chart,i=this.$animations,s=i&&i.x,a=i&&i.y;if(s||a){let i=ai[e.position].call(this,this._active,this._eventPosition);if(!i)return;let r=this._size=ar(this,e),n=Object.assign({},i,this._size),o=an(t,e,n),l=ao(e,n,o,t);(s._to!==l.x||a._to!==l.y)&&(this.xAlign=o.xAlign,this.yAlign=o.yAlign,this.width=r.width,this.height=r.height,this.caretX=i.x,this.caretY=i.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){let t=this.options.setContext(this.getContext()),i=this.opacity;if(!i)return;this._updateAnimationTarget(t);let s={width:this.width,height:this.height},a={x:this.x,y:this.y};i=.001>Math.abs(i)?0:i;let r=tk(t.padding),n=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&n&&(e.save(),e.globalAlpha=i,this.drawBackground(a,e,s,t),t4(e,t.textDirection),a.y+=r.top,this.drawTitle(a,e,t),this.drawBody(a,e,t),this.drawFooter(a,e,t),t8(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){let i=this._active,s=e.map(e=>{let{datasetIndex:t,index:i}=e,s=this.chart.getDatasetMeta(t);if(!s)throw Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:s.data[i],index:i}}),a=!er(i,s),r=this._positionChanged(s,t);(a||r)&&(this._active=s,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let i=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let s=this.options,a=this._active||[],r=this._getActiveElements(e,a,t,i),n=this._positionChanged(r,e),o=t||!er(r,a)||n;return o&&(this._active=r,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),o}_getActiveElements(e,t,i,s){let a=this.options;if("mouseout"===e.type)return[];if(!s)return t.filter(e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index));let r=this.chart.getElementsAtEventForMode(e,a.mode,a,i);return a.reverse&&r.reverse(),r}_positionChanged(e,t){let{caretX:i,caretY:s,options:a}=this,r=ai[a.position].call(this,e,t);return!1!==r&&(i!==r.x||s!==r.y)}constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}}function ag(e){let t=this.getLabels();return e>=0&&e<t.length?t[e]:e}(0,d._)(au,"positioners",ai);class am extends sm{init(e){let t=this._addedLabels;if(t.length){let e=this.getLabels();for(let{index:i,label:s}of t)e[i]===s&&e.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,t){let i,s;if(Z(e))return null;let a=this.getLabels();return i=t=isFinite(t)&&a[t]===e?t:function(e,t,i,s){let a=e.indexOf(t);if(-1===a){var r;return r=i,"string"==typeof t?(r=e.push(t)-1,s.unshift({index:r,label:t})):isNaN(t)&&(r=null),r}return a!==e.lastIndexOf(t)?i:a}(a,e,et(t,e),this._addedLabels),s=a.length-1,null===i?null:eI(Math.round(i),0,s)}determineDataLimits(){let{minDefined:e,maxDefined:t}=this.getUserBounds(),{min:i,max:s}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(i=0),t||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){let e=this.min,t=this.max,i=this.options.offset,s=[],a=this.getLabels();a=0===e&&t===a.length-1?a:a.slice(e,t+1),this._valueRange=Math.max(a.length-!i,1),this._startValue=this.min-.5*!!i;for(let i=e;i<=t;i++)s.push({value:i});return s}getLabelForValue(e){return ag.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!=typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){let t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}}function ap(e,t,i){let{horizontal:s,minRotation:a}=i,r=eD(a),n=(s?Math.sin(r):Math.cos(r))||.001,o=.75*t*(""+e).length;return Math.min(t/n,o)}(0,d._)(am,"id","category"),(0,d._)(am,"defaults",{ticks:{callback:ag}});class ax extends sm{parse(e,t){return Z(e)||("number"==typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){let{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds(),{min:s,max:a}=this,r=e=>s=t?s:e,n=e=>a=i?a:e;if(e){let e=eE(s),t=eE(a);e<0&&t<0?n(0):e>0&&t>0&&r(0)}if(s===a){let t=0===a?1:Math.abs(.05*a);n(a+t),e||r(s-t)}this.min=s,this.max=a}getTickLimit(){let e,{maxTicksLimit:t,stepSize:i}=this.options.ticks;return i?(e=Math.ceil(this.max/i)-Math.floor(this.min/i)+1)>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(i," would result generating up to ").concat(e," ticks. Limiting to 1000.")),e=1e3):(e=this.computeTickLimit(),t=t||11),t&&(e=Math.min(t,e)),e}computeTickLimit(){return 1/0}buildTicks(){let e=this.options,t=e.ticks,i=this.getTickLimit(),s=function(e,t){let i,s,a,r,n=[],{bounds:o,step:l,min:c,max:d,precision:h,count:u,maxTicks:g,maxDigits:m,includeBounds:p}=e,x=l||1,f=g-1,{min:b,max:y}=t,v=!Z(c),_=!Z(d),j=!Z(u),w=(y-b)/(m+1),N=eC((y-b)/f/x)*x;if(N<1e-14&&!v&&!_)return[{value:b},{value:y}];(r=Math.ceil(y/N)-Math.floor(b/N))>f&&(N=eC(r*N/f/x)*x),Z(h)||(N=Math.ceil(N*(i=Math.pow(10,h)))/i),"ticks"===o?(s=Math.floor(b/N)*N,a=Math.ceil(y/N)*N):(s=b,a=y),v&&_&&l&&function(e,t){let i=Math.round(e);return i-t<=e&&i+t>=e}((d-c)/l,N/1e3)?(r=Math.round(Math.min((d-c)/N,g)),N=(d-c)/r,s=c,a=d):j?(s=v?c:s,N=((a=_?d:a)-s)/(r=u-1)):r=eS(r=(a-s)/N,Math.round(r),N/1e3)?Math.round(r):Math.ceil(r);let k=Math.max(eT(N),eT(s));s=Math.round(s*(i=Math.pow(10,Z(h)?k:h)))/i,a=Math.round(a*i)/i;let M=0;for(v&&(p&&s!==c?(n.push({value:c}),s<c&&M++,eS(Math.round((s+M*N)*i)/i,c,ap(c,w,e))&&M++):s<c&&M++);M<r;++M){let e=Math.round((s+M*N)*i)/i;if(_&&e>d)break;n.push({value:e})}return _&&p&&a!==d?n.length&&eS(n[n.length-1].value,d,ap(d,w,e))?n[n.length-1].value=d:n.push({value:d}):_&&a!==d||n.push({value:a}),n}({maxTicks:i=Math.max(2,i),bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&eP(s,this,"value"),e.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}configure(){let e=this.ticks,t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){let s=(i-t)/Math.max(e.length-1,1)/2;t-=s,i+=s}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return e9(e,this.chart.options.locale,this.options.ticks.format)}constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}}class af extends ax{determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=Q(e)?e:0,this.max=Q(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){let e=this.isHorizontal(),t=e?this.width:this.height,i=eD(this.options.ticks.minRotation),s=(e?Math.sin(i):Math.cos(i))||.001;return Math.ceil(t/Math.min(40,this._resolveTickFontOptions(0).lineHeight/s))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}(0,d._)(af,"id","linear"),(0,d._)(af,"defaults",{ticks:{callback:tt.formatters.numeric}});let ab=e=>Math.floor(eM(e)),ay=(e,t)=>Math.pow(10,ab(e)+t);function av(e){return 1==e/Math.pow(10,ab(e))}function a_(e,t,i){let s=Math.pow(10,i),a=Math.floor(e/s);return Math.ceil(t/s)-a}class aj extends sm{parse(e,t){let i=ax.prototype.parse.apply(this,[e,t]);if(0===i){this._zero=!0;return}return Q(i)&&i>0?i:null}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=Q(e)?Math.max(0,e):null,this.max=Q(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Q(this._userMin)&&(this.min=e===ay(this.min,0)?ay(this.min,-1):ay(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:e,maxDefined:t}=this.getUserBounds(),i=this.min,s=this.max,a=t=>i=e?i:t,r=e=>s=t?s:e;i===s&&(i<=0?(a(1),r(10)):(a(ay(i,-1)),r(ay(s,1)))),i<=0&&a(ay(s,-1)),s<=0&&r(ay(i,1)),this.min=i,this.max=s}buildTicks(){let e=this.options,t=function(e,t){let{min:i,max:s}=t;i=ee(e.min,i);let a=[],r=ab(i),n=function(e,t){let i=ab(t-e);for(;a_(e,t,i)>10;)i++;for(;10>a_(e,t,i);)i--;return Math.min(i,ab(e))}(i,s),o=n<0?Math.pow(10,Math.abs(n)):1,l=Math.pow(10,n),c=r>n?Math.pow(10,r):0,d=Math.round((i-c)*o)/o,h=Math.floor((i-c)/l/10)*l*10,u=Math.floor((d-h)/Math.pow(10,n)),g=ee(e.min,Math.round((c+h+u*Math.pow(10,n))*o)/o);for(;g<s;)a.push({value:g,major:av(g),significand:u}),u>=10?u=u<15?15:20:u++,u>=20&&(u=2,o=++n>=0?1:o),g=Math.round((c+h+u*Math.pow(10,n))*o)/o;let m=ee(e.max,g);return a.push({value:m,major:av(m),significand:u}),a}({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&eP(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":e9(e,this.chart.options.locale,this.options.ticks.format)}configure(){let e=this.min;super.configure(),this._startValue=eM(e),this._valueRange=eM(this.max)-eM(e)}getPixelForValue(e){return((void 0===e||0===e)&&(e=this.min),null===e||isNaN(e))?NaN:this.getPixelForDecimal(e===this.min?0:(eM(e)-this._startValue)/this._valueRange)}getValueForPixel(e){let t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}}function aw(e){let t=e.ticks;if(t.display&&e.display){let e=tk(t.backdropPadding);return et(t.font&&t.font.size,tn.font.size)+e.height}return 0}function aN(e,t,i,s,a){return e===s||e===a?{start:t-i/2,end:t+i/2}:e<s||e>a?{start:t-i,end:t}:{start:t,end:t+i}}function ak(e,t,i,s){let{ctx:a}=e;if(i)a.arc(e.xCenter,e.yCenter,t,0,ey);else{let i=e.getPointPosition(0,t);a.moveTo(i.x,i.y);for(let r=1;r<s;r++)i=e.getPointPosition(r,t),a.lineTo(i.x,i.y)}}(0,d._)(aj,"id","logarithmic"),(0,d._)(aj,"defaults",{ticks:{callback:tt.formatters.logarithmic,major:{enabled:!0}}});class aM extends ax{setDimensions(){let e=this._padding=tk(aw(this.options)/2),t=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(t,i)/2)}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!1);this.min=Q(e)&&!isNaN(e)?e:0,this.max=Q(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/aw(this.options))}generateTickLabels(e){ax.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((e,t)=>{let i=es(this.options.pointLabels.callback,[e,t],this);return i||0===i?i:""}).filter((e,t)=>this.chart.getDataVisibility(t))}fit(){let e=this.options;e.display&&e.pointLabels.display?function(e){let t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},i=Object.assign({},t),s=[],a=[],r=e._pointLabels.length,n=e.options.pointLabels,o=n.centerPointLabels?eb/r:0;for(let d=0;d<r;d++){var l,c;let r=n.setContext(e.getPointLabelContext(d));a[d]=r.padding;let h=e.getPointPosition(d,e.drawingArea+a[d],o),u=tM(r.font),g=(l=e.ctx,c=K(c=e._pointLabels[d])?c:[c],{w:function(e,t,i,s){let a,r,n,o,l,c=(s=s||{}).data=s.data||{},d=s.garbageCollect=s.garbageCollect||[];s.font!==t&&(c=s.data={},d=s.garbageCollect=[],s.font=t),e.save(),e.font=t;let h=0,u=i.length;for(a=0;a<u;a++)if(null==(o=i[a])||K(o)){if(K(o))for(r=0,n=o.length;r<n;r++)null==(l=o[r])||K(l)||(h=to(e,c,d,h,l))}else h=to(e,c,d,h,o);e.restore();let g=d.length/2;if(g>i.length){for(a=0;a<g;a++)delete c[d[a]];d.splice(0,g)}return h}(l,u.string,c),h:c.length*u.lineHeight});s[d]=g;let m=eq(e.getIndexAngle(d)+o),p=Math.round(180/eb*m);!function(e,t,i,s,a){let r=Math.abs(Math.sin(i)),n=Math.abs(Math.cos(i)),o=0,l=0;s.start<t.l?(o=(t.l-s.start)/r,e.l=Math.min(e.l,t.l-o)):s.end>t.r&&(o=(s.end-t.r)/r,e.r=Math.max(e.r,t.r+o)),a.start<t.t?(l=(t.t-a.start)/n,e.t=Math.min(e.t,t.t-l)):a.end>t.b&&(l=(a.end-t.b)/n,e.b=Math.max(e.b,t.b+l))}(i,t,m,aN(p,h.x,g.w,0,180),aN(p,h.y,g.h,90,270))}e.setCenterPoint(t.l-i.l,i.r-t.r,t.t-i.t,i.b-t.b),e._pointLabelItems=function(e,t,i){let s,a=[],r=e._pointLabels.length,n=e.options,{centerPointLabels:o,display:l}=n.pointLabels,c={extra:aw(n)/2,additionalAngle:o?eb/r:0};for(let n=0;n<r;n++){c.padding=i[n],c.size=t[n];let r=function(e,t,i){var s,a,r,n,o,l,c;let d=e.drawingArea,{extra:h,additionalAngle:u,padding:g,size:m}=i,p=e.getPointPosition(t,d+h+g,u),x=Math.round(180/eb*eq(p.angle+ew)),f=(s=p.y,a=m.h,90===(r=x)||270===r?s-=a/2:(r>270||r<90)&&(s-=a),s),b=0===(n=x)||180===n?"center":n<180?"left":"right",y=(o=p.x,l=m.w,"right"===(c=b)?o-=l:"center"===c&&(o-=l/2),o);return{visible:!0,x:p.x,y:f,textAlign:b,left:y,top:f,right:y+m.w,bottom:f+m.h}}(e,n,c);a.push(r),"auto"===l&&(r.visible=function(e,t){if(!t)return!0;let{left:i,top:s,right:a,bottom:r}=e;return!(tu({x:i,y:s},t)||tu({x:i,y:r},t)||tu({x:a,y:s},t)||tu({x:a,y:r},t))}(r,s),r.visible&&(s=r))}return a}(e,s,a)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,i,s){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((i-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,i,s))}getIndexAngle(e){return eq(e*(ey/(this._pointLabels.length||1))+eD(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(Z(e))return NaN;let t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Z(e))return NaN;let t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){let t=this._pointLabels||[];if(e>=0&&e<t.length){var i;let s=t[e];return i=this.getContext(),tS(i,{label:s,index:e,type:"pointLabel"})}}getPointPosition(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=this.getIndexAngle(e)-ew+i;return{x:Math.cos(s)*t+this.xCenter,y:Math.sin(s)*t+this.yCenter,angle:s}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){let{left:t,top:i,right:s,bottom:a}=this._pointLabelItems[e];return{left:t,top:i,right:s,bottom:a}}drawBackground(){let{backgroundColor:e,grid:{circular:t}}=this.options;if(e){let i=this.ctx;i.save(),i.beginPath(),ak(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){let e,t,i,s=this.ctx,a=this.options,{angleLines:r,grid:n,border:o}=a,l=this._pointLabels.length;if(a.pointLabels.display&&function(e,t){let{ctx:i,options:{pointLabels:s}}=e;for(let a=t-1;a>=0;a--){let t=e._pointLabelItems[a];if(!t.visible)continue;let r=s.setContext(e.getPointLabelContext(a));!function(e,t,i){let{left:s,top:a,right:r,bottom:n}=i,{backdropColor:o}=t;if(!Z(o)){let i=tN(t.borderRadius),l=tk(t.backdropPadding);e.fillStyle=o;let c=s-l.left,d=a-l.top,h=r-s+l.width,u=n-a+l.height;Object.values(i).some(e=>0!==e)?(e.beginPath(),tb(e,{x:c,y:d,w:h,h:u,radius:i}),e.fill()):e.fillRect(c,d,h,u)}}(i,r,t);let n=tM(r.font),{x:o,y:l,textAlign:c}=t;tf(i,e._pointLabels[a],o,l+n.lineHeight/2,n,{color:r.color,textAlign:c,textBaseline:"middle"})}}(this,l),n.display&&this.ticks.forEach((e,i)=>{if(0!==i||0===i&&this.min<0){t=this.getDistanceFromCenterForValue(e.value);let s=this.getContext(i),a=n.setContext(s),r=o.setContext(s);!function(e,t,i,s,a){let r=e.ctx,n=t.circular,{color:o,lineWidth:l}=t;(n||s)&&o&&l&&!(i<0)&&(r.save(),r.strokeStyle=o,r.lineWidth=l,r.setLineDash(a.dash||[]),r.lineDashOffset=a.dashOffset,r.beginPath(),ak(e,i,n,s),r.closePath(),r.stroke(),r.restore())}(this,a,t,l,r)}}),r.display){for(s.save(),e=l-1;e>=0;e--){let n=r.setContext(this.getPointLabelContext(e)),{color:o,lineWidth:l}=n;l&&o&&(s.lineWidth=l,s.strokeStyle=o,s.setLineDash(n.borderDash),s.lineDashOffset=n.borderDashOffset,t=this.getDistanceFromCenterForValue(a.reverse?this.min:this.max),i=this.getPointPosition(e,t),s.beginPath(),s.moveTo(this.xCenter,this.yCenter),s.lineTo(i.x,i.y),s.stroke())}s.restore()}}drawBorder(){}drawLabels(){let e,t,i=this.ctx,s=this.options,a=s.ticks;if(!a.display)return;let r=this.getIndexAngle(0);i.save(),i.translate(this.xCenter,this.yCenter),i.rotate(r),i.textAlign="center",i.textBaseline="middle",this.ticks.forEach((r,n)=>{if(0===n&&this.min>=0&&!s.reverse)return;let o=a.setContext(this.getContext(n)),l=tM(o.font);if(e=this.getDistanceFromCenterForValue(this.ticks[n].value),o.showLabelBackdrop){i.font=l.string,t=i.measureText(r.label).width,i.fillStyle=o.backdropColor;let s=tk(o.backdropPadding);i.fillRect(-t/2-s.left,-e-l.size/2-s.top,t+s.width,l.size+s.height)}tf(i,r.label,0,-e,l,{color:o.color,strokeColor:o.textStrokeColor,strokeWidth:o.textStrokeWidth})}),i.restore()}drawTitle(){}constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}}(0,d._)(aM,"id","radialLinear"),(0,d._)(aM,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:tt.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}),(0,d._)(aM,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),(0,d._)(aM,"descriptors",{angleLines:{_fallback:"grid"}});let aE={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},aS=Object.keys(aE);function aC(e,t){return e-t}function aA(e,t){if(Z(t))return null;let i=e._adapter,{parser:s,round:a,isoWeekday:r}=e._parseOpts,n=t;return("function"==typeof s&&(n=s(n)),Q(n)||(n="string"==typeof s?i.parse(n,s):i.parse(n)),null===n)?null:(a&&(n="week"===a&&(eA(r)||!0===r)?i.startOf(n,"isoWeek",r):i.startOf(n,a)),+n)}function aP(e,t,i,s){let a=aS.length;for(let r=aS.indexOf(e);r<a-1;++r){let e=aE[aS[r]],a=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((i-t)/(a*e.size))<=s)return aS[r]}return aS[a-1]}function aD(e,t,i){if(i){if(i.length){let{lo:s,hi:a}=eV(i,t);e[i[s]>=t?i[s]:i[a]]=!0}}else e[t]=!0}function aT(e,t,i){let s,a,r=[],n={},o=t.length;for(s=0;s<o;++s)n[a=t[s]]=s,r.push({value:a,major:!1});return 0!==o&&i?function(e,t,i,s){let a,r,n=e._adapter,o=+n.startOf(t[0].value,s),l=t[t.length-1].value;for(a=o;a<=l;a=+n.add(a,1,s))(r=i[a])>=0&&(t[r].major=!0);return t}(e,r,n,i):r}class aO extends sm{init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.time||(e.time={}),s=this._adapter=new iI._date(e.adapters.date);s.init(t),ed(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:aA(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let e=this.options,t=this._adapter,i=e.time.unit||"day",{min:s,max:a,minDefined:r,maxDefined:n}=this.getUserBounds();function o(e){r||isNaN(e.min)||(s=Math.min(s,e.min)),n||isNaN(e.max)||(a=Math.max(a,e.max))}r&&n||(o(this._getLabelBounds()),("ticks"!==e.bounds||"labels"!==e.ticks.source)&&o(this.getMinMax(!1))),s=Q(s)&&!isNaN(s)?s:+t.startOf(Date.now(),i),a=Q(a)&&!isNaN(a)?a:+t.endOf(Date.now(),i)+1,this.min=Math.min(s,a-1),this.max=Math.max(s+1,a)}_getLabelBounds(){let e=this.getLabelTimestamps(),t=1/0,i=-1/0;return e.length&&(t=e[0],i=e[e.length-1]),{min:t,max:i}}buildTicks(){let e=this.options,t=e.time,i=e.ticks,s="labels"===i.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);let a=this.min,r=function(e,t,i){let s=0,a=e.length;for(;s<a&&e[s]<t;)s++;for(;a>s&&e[a-1]>i;)a--;return s>0||a<e.length?e.slice(s,a):e}(s,a,this.max);return this._unit=t.unit||(i.autoSkip?aP(t.minUnit,this.min,this.max,this._getLabelCapacity(a)):function(e,t,i,s,a){for(let r=aS.length-1;r>=aS.indexOf(i);r--){let i=aS[r];if(aE[i].common&&e._adapter.diff(a,s,i)>=t-1)return i}return aS[i?aS.indexOf(i):0]}(this,r.length,t.minUnit,this.min,this.max)),this._majorUnit=i.major.enabled&&"year"!==this._unit?function(e){for(let t=aS.indexOf(e)+1,i=aS.length;t<i;++t)if(aE[aS[t]].common)return aS[t]}(this._unit):void 0,this.initOffsets(s),e.reverse&&r.reverse(),aT(this,r,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(){let e,t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],s=0,a=0;this.options.offset&&i.length&&(e=this.getDecimalForValue(i[0]),s=1===i.length?1-e:(this.getDecimalForValue(i[1])-e)/2,t=this.getDecimalForValue(i[i.length-1]),a=1===i.length?t:(t-this.getDecimalForValue(i[i.length-2]))/2);let r=i.length<3?.5:.25;s=eI(s,0,r),a=eI(a,0,r),this._offsets={start:s,end:a,factor:1/(s+1+a)}}_generate(){let e,t,i=this._adapter,s=this.min,a=this.max,r=this.options,n=r.time,o=n.unit||aP(n.minUnit,s,a,this._getLabelCapacity(s)),l=et(r.ticks.stepSize,1),c="week"===o&&n.isoWeekday,d=eA(c)||!0===c,h={},u=s;if(d&&(u=+i.startOf(u,"isoWeek",c)),u=+i.startOf(u,d?"day":o),i.diff(a,s,o)>1e5*l)throw Error(s+" and "+a+" are too far apart with stepSize of "+l+" "+o);let g="data"===r.ticks.source&&this.getDataTimestamps();for(e=u,t=0;e<a;e=+i.add(e,l,o),t++)aD(h,e,g);return(e===a||"ticks"===r.bounds||1===t)&&aD(h,e,g),Object.keys(h).sort(aC).map(e=>+e)}getLabelForValue(e){let t=this._adapter,i=this.options.time;return i.tooltipFormat?t.format(e,i.tooltipFormat):t.format(e,i.displayFormats.datetime)}format(e,t){let i=this.options.time.displayFormats,s=this._unit,a=t||i[s];return this._adapter.format(e,a)}_tickFormatFunction(e,t,i,s){let a=this.options,r=a.ticks.callback;if(r)return es(r,[e,t,i],this);let n=a.time.displayFormats,o=this._unit,l=this._majorUnit,c=o&&n[o],d=l&&n[l],h=i[t],u=l&&d&&h&&h.major;return this._adapter.format(e,s||(u?d:c))}generateTickLabels(e){let t,i,s;for(t=0,i=e.length;t<i;++t)(s=e[t]).label=this._tickFormatFunction(s.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){let t=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+i)*t.factor)}getValueForPixel(e){let t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){let t=this.options.ticks,i=this.ctx.measureText(e).width,s=eD(this.isHorizontal()?t.maxRotation:t.minRotation),a=Math.cos(s),r=Math.sin(s),n=this._resolveTickFontOptions(0).size;return{w:i*a+n*r,h:i*r+n*a}}_getLabelCapacity(e){let t=this.options.time,i=t.displayFormats,s=i[t.unit]||i.millisecond,a=this._tickFormatFunction(e,0,aT(this,[e],this._majorUnit),s),r=this._getLabelSize(a),n=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return n>0?n:1}getDataTimestamps(){let e,t,i=this._cache.data||[];if(i.length)return i;let s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(e=0,t=s.length;e<t;++e)i=i.concat(s[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(i)}getLabelTimestamps(){let e,t,i=this._cache.labels||[];if(i.length)return i;let s=this.getLabels();for(e=0,t=s.length;e<t;++e)i.push(aA(this,s[e]));return this._cache.labels=this._normalized?i:this.normalize(i)}normalize(e){return eY(e.sort(aC))}constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}}function aL(e,t,i){let s,a,r,n,o=0,l=e.length-1;i?(t>=e[o].pos&&t<=e[l].pos&&({lo:o,hi:l}=eB(e,"pos",t)),{pos:s,time:r}=e[o],{pos:a,time:n}=e[l]):(t>=e[o].time&&t<=e[l].time&&({lo:o,hi:l}=eB(e,"time",t)),{time:s,pos:r}=e[o],{time:a,pos:n}=e[l]);let c=a-s;return c?r+(n-r)*(t-s)/c:r}(0,d._)(aO,"id","time"),(0,d._)(aO,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class aR extends aO{initOffsets(){let e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=aL(t,this.min),this._tableRange=aL(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){let t,i,s,{min:a,max:r}=this,n=[],o=[];for(t=0,i=e.length;t<i;++t)(s=e[t])>=a&&s<=r&&n.push(s);if(n.length<2)return[{time:a,pos:0},{time:r,pos:1}];for(t=0,i=n.length;t<i;++t)Math.round((n[t+1]+n[t-1])/2)!==(s=n[t])&&o.push({time:s,pos:t/(i-1)});return o}_generate(){let e=this.min,t=this.max,i=super.getDataTimestamps();return i.includes(e)&&i.length||i.splice(0,0,e),i.includes(t)&&1!==i.length||i.push(t),i.sort((e,t)=>e-t)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;let t=this.getDataTimestamps(),i=this.getLabelTimestamps();return e=t.length&&i.length?this.normalize(t.concat(i)):t.length?t:i,e=this._cache.all=e}getDecimalForValue(e){return(aL(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){let t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return aL(this._table,i*this._tableRange+this._minPos,!0)}constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}}(0,d._)(aR,"id","timeseries"),(0,d._)(aR,"defaults",aO.defaults);let aq="label";function az(e,t){"function"==typeof e?e(t):e&&(e.current=t)}function aI(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:aq,s=[];e.datasets=t.map(t=>{let a=e.datasets.find(e=>e[i]===t[i]);return!a||!t.data||s.includes(a)?{...t}:(s.push(a),Object.assign(a,t),a)})}let aF=(0,s.forwardRef)(function(e,t){let{height:i=150,width:a=300,redraw:r=!1,datasetIdKey:n,type:o,data:l,options:c,plugins:d=[],fallbackContent:h,updateMode:u,...g}=e,m=(0,s.useRef)(null),p=(0,s.useRef)(null),x=()=>{m.current&&(p.current=new sI(m.current,{type:o,data:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:aq,i={labels:[],datasets:[]};return i.labels=e.labels,aI(i,e.datasets,t),i}(l,n),options:c&&{...c},plugins:d}),az(t,p.current))},f=()=>{az(t,null),p.current&&(p.current.destroy(),p.current=null)};return(0,s.useEffect)(()=>{!r&&p.current&&c&&function(e,t){let i=e.options;i&&t&&Object.assign(i,t)}(p.current,c)},[r,c]),(0,s.useEffect)(()=>{!r&&p.current&&(p.current.config.data.labels=l.labels)},[r,l.labels]),(0,s.useEffect)(()=>{!r&&p.current&&l.datasets&&aI(p.current.config.data,l.datasets,n)},[r,l.datasets]),(0,s.useEffect)(()=>{p.current&&(r?(f(),setTimeout(x)):p.current.update(u))},[r,c,l.labels,l.datasets,u]),(0,s.useEffect)(()=>{p.current&&(f(),setTimeout(x))},[o]),(0,s.useEffect)(()=>(x(),()=>f()),[]),s.default.createElement("canvas",{ref:m,role:"img",height:i,width:a,...g},h)});function aV(e,t){return sI.register(t),(0,s.forwardRef)((t,i)=>s.default.createElement(aF,{...t,ref:i,type:e}))}let aB=aV("line",iD),aH=aV("bar",iC);function aW(e){let{noSerie:t,onVolver:a}=e,[r,n]=(0,s.useState)(null),[o,l]=(0,s.useState)(!0),[c,d]=(0,s.useState)(null),[h,u]=(0,s.useState)(!1),g=async()=>{try{l(!0),d(null);let e=await fetch("/api/equipos/".concat(t)),i=await e.json();i.success?n(i.data):d(i.error||"Error al cargar datos del equipo")}catch(e){console.error("Error cargando datos del equipo:",e),d("Error de conexiÃ³n")}finally{l(!1)}},m=()=>{u(!1)};(0,s.useEffect)(()=>{t&&g()},[t]);let p=e=>{switch(null==e?void 0:e.toLowerCase()){case"disponible":return"bg-green-100 text-green-800";case"en uso":return"bg-blue-100 text-blue-800";case"mantenimiento":case"en reparaciÃ³n":return"bg-yellow-100 text-yellow-800";case"daÃ±ado":case"extraviado":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},x=()=>{if(!(null==r?void 0:r.estadisticas))return null;let{totalTraslados:e,totalMantenimientos:t,totalReparaciones:i}=r.estadisticas;return{labels:["Traslados","Mantenimientos","Reparaciones"],datasets:[{label:"Cantidad",data:[e,t,i],backgroundColor:["#3B82F6","#F59E0B","#EF4444"],borderColor:["#2563EB","#D97706","#DC2626"],borderWidth:1}]}},f=()=>{if(!(null==r?void 0:r.historial))return null;let e={},t=new Date;t.setMonth(t.getMonth()-6),r.historial.forEach(i=>{let s=new Date(i.fecha);if(s>=t){let t=s.toLocaleDateString("es-ES",{year:"numeric",month:"short"});e[t]=(e[t]||0)+1}});let i=Object.keys(e).sort(),s=i.map(t=>e[t]);return{labels:i,datasets:[{label:"Movimientos",data:s,borderColor:"#3B82F6",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!0}]}};if(o)return(0,i.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,i.jsxs)("div",{className:"animate-pulse",children:[(0,i.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-6"}),(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[1,2,3].map(e=>(0,i.jsx)("div",{className:"h-32 bg-gray-200 rounded"},e))})]})});if(c||!r)return(0,i.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,i.jsxs)("div",{className:"text-center text-red-600",children:[(0,i.jsx)("i",{className:"fas fa-exclamation-triangle text-4xl mb-4"}),(0,i.jsx)("p",{className:"text-lg font-semibold mb-2",children:"Error al cargar datos"}),(0,i.jsx)("p",{className:"text-sm mb-4",children:c}),(0,i.jsx)("button",{onClick:g,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"Reintentar"})]})});let{equipo:b,historial:y,estadisticas:_,equiposSimilares:j}=r;return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-4",children:[a&&(0,i.jsx)("button",{onClick:a,className:"text-gray-600 hover:text-gray-900 p-2",title:"Volver",children:(0,i.jsx)("i",{className:"fas fa-arrow-left text-lg"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:b.nombreEquipo}),(0,i.jsxs)("p",{className:"text-gray-600",children:["#",b.no_serie]})]})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("span",{className:"inline-flex px-3 py-1 text-sm font-semibold rounded-full ".concat(p(b.EstatusEquipo)),children:b.EstatusEquipo}),(0,i.jsx)("button",{onClick:()=>{u(!0)},className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors",title:"Editar equipo",children:(0,i.jsx)("i",{className:"fas fa-edit"})}),(0,i.jsx)("button",{onClick:g,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",title:"Actualizar datos",children:(0,i.jsx)("i",{className:"fas fa-sync-alt"})})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,i.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Modelo"}),(0,i.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:b.modelo})]}),(0,i.jsx)("i",{className:"fas fa-laptop text-blue-500 text-xl"})]})}),(0,i.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Tipo"}),(0,i.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:b.TipoEquipo})]}),(0,i.jsx)("i",{className:"fas fa-tag text-green-500 text-xl"})]})}),(0,i.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"DÃ­as en Sistema"}),(0,i.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:b.diasEnSistema})]}),(0,i.jsx)("i",{className:"fas fa-calendar text-orange-500 text-xl"})]})}),(0,i.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"No. Activo"}),(0,i.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:b.numeroActivo})]}),(0,i.jsx)("i",{className:"fas fa-barcode text-purple-500 text-xl"})]})})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,i.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"flex-shrink-0",children:(0,i.jsx)("div",{className:"w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center",children:(0,i.jsx)("i",{className:"fas fa-exchange-alt text-white text-sm"})})}),(0,i.jsxs)("div",{className:"ml-4",children:[(0,i.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Movimientos"}),(0,i.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:_.totalMovimientos})]})]})}),(0,i.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"flex-shrink-0",children:(0,i.jsx)("div",{className:"w-8 h-8 bg-green-600 rounded-md flex items-center justify-center",children:(0,i.jsx)("i",{className:"fas fa-truck text-white text-sm"})})}),(0,i.jsxs)("div",{className:"ml-4",children:[(0,i.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Traslados"}),(0,i.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:_.totalTraslados})]})]})}),(0,i.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"flex-shrink-0",children:(0,i.jsx)("div",{className:"w-8 h-8 bg-yellow-600 rounded-md flex items-center justify-center",children:(0,i.jsx)("i",{className:"fas fa-tools text-white text-sm"})})}),(0,i.jsxs)("div",{className:"ml-4",children:[(0,i.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Mantenimientos"}),(0,i.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:_.totalMantenimientos})]})]})}),(0,i.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"flex-shrink-0",children:(0,i.jsx)("div",{className:"w-8 h-8 bg-red-600 rounded-md flex items-center justify-center",children:(0,i.jsx)("i",{className:"fas fa-wrench text-white text-sm"})})}),(0,i.jsxs)("div",{className:"ml-4",children:[(0,i.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Reparaciones"}),(0,i.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:_.totalReparaciones})]})]})})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,i.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:[(0,i.jsx)("i",{className:"fas fa-map-marker-alt text-red-500 mr-2"}),"UbicaciÃ³n Actual"]}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Sucursal:"}),(0,i.jsx)("span",{className:"font-medium",children:b.SucursalActual})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Ãrea:"}),(0,i.jsx)("span",{className:"font-medium",children:b.AreaActual})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Zona:"}),(0,i.jsx)("span",{className:"font-medium",children:b.ZonaSucursal})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Estado:"}),(0,i.jsx)("span",{className:"font-medium",children:b.EstadoSucursal})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Municipio:"}),(0,i.jsx)("span",{className:"font-medium",children:b.MunicipioSucursal})]})]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,i.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:[(0,i.jsx)("i",{className:"fas fa-user text-blue-500 mr-2"}),"Usuario Asignado"]}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Nombre:"}),(0,i.jsx)("span",{className:"font-medium",children:b.UsuarioAsignado})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Correo:"}),(0,i.jsx)("span",{className:"font-medium",children:b.CorreoUsuario})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Promedio dÃ­as/movimiento:"}),(0,i.jsxs)("span",{className:"font-medium",children:[_.promedioDiasMovimiento," dÃ­as"]})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Ãšltimo movimiento:"}),(0,i.jsx)("span",{className:"font-medium",children:_.ultimoMovimiento?new Date(_.ultimoMovimiento).toLocaleDateString("es-ES"):"Sin movimientos"})]})]})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Movimientos por Tipo"}),(0,i.jsx)("div",{className:"h-64",children:x()?(0,i.jsx)(aH,{data:x(),options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{stepSize:1}}}}}):(0,i.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:"Sin datos de movimientos"})})]}),(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Actividad Mensual (Ãšltimos 6 meses)"}),(0,i.jsx)("div",{className:"h-64",children:f()?(0,i.jsx)(aB,{data:f(),options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{stepSize:1}}}}}):(0,i.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:"Sin actividad reciente"})})]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,i.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:[(0,i.jsx)("i",{className:"fas fa-history text-gray-500 mr-2"}),"Historial de Movimientos (Ãšltimos 10)"]}),y&&y.length>0?(0,i.jsx)("div",{className:"overflow-x-auto",children:(0,i.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,i.jsx)("thead",{className:"bg-gray-50",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estatus"}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Origen"}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Destino"})]})}),(0,i.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:y.slice(0,10).map((e,t)=>(0,i.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.fecha).toLocaleDateString("es-ES")}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.tipoMovimiento}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,i.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("COMPLETADO"===e.estatusMovimiento?"bg-green-100 text-green-800":"ABIERTO"===e.estatusMovimiento?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:e.estatusMovimiento})}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.sucursalOrigen||"-"}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.sucursalDestino||"-"})]},t))})]})}):(0,i.jsxs)("div",{className:"text-center text-gray-500 py-8",children:[(0,i.jsx)("i",{className:"fas fa-inbox text-4xl mb-4"}),(0,i.jsx)("p",{children:"No hay movimientos registrados para este equipo"})]})]}),j&&j.length>0&&(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,i.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:[(0,i.jsx)("i",{className:"fas fa-copy text-blue-500 mr-2"}),"Equipos Similares"]}),(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:j.slice(0,6).map((e,t)=>(0,i.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,i.jsx)("h4",{className:"font-medium text-gray-900",children:e.nombreEquipo}),(0,i.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(p(e.estatus)),children:e.estatus})]}),(0,i.jsxs)("p",{className:"text-sm text-gray-600",children:["#",e.no_serie]}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:e.modelo})]},t))})]}),h&&(null==r?void 0:r.equipo)&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Editar Equipo"}),(0,i.jsx)("button",{onClick:m,className:"text-gray-400 hover:text-gray-600",children:(0,i.jsx)("i",{className:"fas fa-times text-xl"})})]}),(0,i.jsx)(v,{equipoData:r.equipo,onSave:e=>{r&&n({...r,equipo:{...r.equipo,...e}}),u(!1),g()},onCancel:m,isModal:!0})]})})]})}sI.register(am,af,s3,{id:"title",_element:at,start(e,t,i){let s=new at({ctx:e.ctx,options:i,chart:e});i0.configure(e,s,i),i0.addBox(e,s),e.titleBlock=s},stop(e){let t=e.titleBlock;i0.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,i){let s=e.titleBlock;i0.configure(e,s,i),s.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},{id:"tooltip",_element:au,positioners:ai,afterInit(e,t,i){i&&(e.tooltip=new au({chart:e,options:i}))},beforeUpdate(e,t,i){e.tooltip&&e.tooltip.initialize(i)},reset(e,t,i){e.tooltip&&e.tooltip.initialize(i)},afterDraw(e){let t=e.tooltip;if(t&&t._willRender()){let i={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",{...i,cancelable:!0}))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",i)}},afterEvent(e,t){if(e.tooltip){let i=t.replay;e.tooltip.handleEvent(t.event,i,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:ad},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},{id:"legend",_element:s9,start(e,t,i){let s=e.legend=new s9({ctx:e.ctx,options:i,chart:e});i0.configure(e,s,i),i0.addBox(e,s)},stop(e){i0.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,i){let s=e.legend;i0.configure(e,s,i),s.options=i},afterUpdate(e){let t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,i){let s=t.datasetIndex,a=i.chart;a.isDatasetVisible(s)?(a.hide(s),t.hidden=!0):(a.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){let t=e.data.datasets,{labels:{usePointStyle:i,pointStyle:s,textAlign:a,color:r,useBorderRadius:n,borderRadius:o}}=e.legend.options;return e._getSortedDatasetMetas().map(e=>{let l=e.controller.getStyle(i?0:void 0),c=tk(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:r,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:s||l.pointStyle,rotation:l.rotation,textAlign:a||l.textAlign,borderRadius:n&&(o||l.borderRadius),datasetIndex:e.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}},sH,sK,sQ,aO);let aU=e=>{let{equipoData:t,onSave:a,onCancel:r,isModal:n=!1}=e,[o,l]=(0,s.useState)({equipos:t?[t.no_serie]:[],sucursalDestino:"",posicionDestino:"",tipoMovimiento:"TRASLADO",motivo:"",observaciones:"",urgencia:"NORMAL",responsableTraslado:"Sistema",fechaProgramada:""}),[c,d]=(0,s.useState)([]),[h,u]=(0,s.useState)([]),[g,m]=(0,s.useState)([]),[p,x]=(0,s.useState)([]),[f,b]=(0,s.useState)(!1),[y,v]=(0,s.useState)(!1),[_,j]=(0,s.useState)(null),[w,N]=(0,s.useState)(null),[k,M]=(0,s.useState)(""),[E,S]=(0,s.useState)(!t);(0,s.useEffect)(()=>{C(),t&&x([t])},[t]);let C=async()=>{b(!0);try{await Promise.all([A(),P()])}catch(e){console.error("Error cargando datos iniciales:",e),j("Error cargando datos del sistema")}finally{b(!1)}},A=async()=>{try{console.log("ðŸ” Cargando sucursales...");let e=await fetch("/api/sucursales"),t=await e.json();console.log("ðŸ“¡ Respuesta del API sucursales:",t),t.success&&t.data&&0!==t.data.length?(console.log("âœ… Sucursales principales cargadas:",t.data),d(t.data)):(console.log("âš ï¸ Sucursales principales fallaron, intentando endpoint de prueba..."),e=await fetch("/api/catalogos-prueba"),(t=await e.json()).success&&t.data.sucursales&&(console.log("âœ… Sucursales de catalogos-prueba cargadas:",t.data.sucursales),d(t.data.sucursales)))}catch(t){console.error("âŒ Error cargando sucursales:",t);let e=[{id:"SUC001",nombre:"Sucursal Principal",codigo:"PRINCIPAL"},{id:"SUC002",nombre:"Sucursal Norte",codigo:"NORTE"},{id:"SUC003",nombre:"Sucursal Sur",codigo:"SUR"}];console.log("ðŸ”„ Usando sucursales de fallback:",e),d(e)}},P=async()=>{try{let e=await fetch("/api/posiciones"),t=await e.json();t.success&&t.data&&0!==t.data.length?u(t.data):(e=await fetch("/api/catalogos-prueba"),(t=await e.json()).success&&t.data.posiciones&&u(t.data.posiciones))}catch(e){console.error("Error cargando posiciones:",e),u([{id:1,nombre:"RecepciÃ³n",sucursalId:"SUC001"},{id:2,nombre:"Oficina",sucursalId:"SUC001"},{id:3,nombre:"AlmacÃ©n",sucursalId:"SUC001"}])}},D=async e=>{if(!e.trim())return void m([]);try{let t=await fetch("/api/equipos/search?q=".concat(encodeURIComponent(e))),i=await t.json();i.success&&m(i.data)}catch(e){console.error("Error buscando equipos:",e)}},T=e=>{let{name:t,value:i}=e.target;l(e=>({...e,[t]:i})),j(null),N(null)},O=async e=>{if(e.preventDefault(),0===o.equipos.length)return void j("Debe seleccionar al menos un equipo");if(!o.sucursalDestino)return void j("Debe seleccionar una sucursal destino");if(!o.posicionDestino)return void j("Debe seleccionar una posiciÃ³n destino");v(!0),j(null);try{var t;let e={equipos:o.equipos,sucursalOrigen:(null==(t=p[0])?void 0:t.SucursalActual)||"Centro Principal",sucursalDestino:o.sucursalDestino,posicionDestino:o.posicionDestino,tipoMovimiento:o.tipoMovimiento,motivo:o.motivo,observaciones:o.observaciones,responsableTraslado:o.responsableTraslado,fechaProgramada:o.fechaProgramada||null},i=await fetch("/api/equipos/transfer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await i.json();s.success?(N("Transferencia iniciada exitosamente. ID: ".concat(s.data.transferId||"N/A")),a&&a(s.data),n||(l({equipos:[],sucursalDestino:"",posicionDestino:"",tipoMovimiento:"TRASLADO",motivo:"",observaciones:"",urgencia:"NORMAL",responsableTraslado:"Sistema",fechaProgramada:""}),x([]))):j(s.error||"Error procesando la transferencia")}catch(e){console.error("Error enviando transferencia:",e),j("Error de conexiÃ³n. Intente nuevamente.")}finally{v(!1)}},L=h.filter(e=>!o.sucursalDestino||e.sucursalId===o.sucursalDestino);return(console.log("ðŸ¢ Estado de sucursales en render:",c),console.log("ðŸ“ Estado de posiciones en render:",h),console.log("ðŸ” Posiciones filtradas:",L),f)?(0,i.jsxs)("div",{className:"flex justify-center items-center p-8",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,i.jsx)("span",{className:"ml-2",children:"Cargando datos..."})]}):(0,i.jsxs)("div",{className:"".concat(n?"p-6":"max-w-4xl mx-auto p-6"),children:[(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:[(0,i.jsx)("i",{className:"fas fa-exchange-alt text-blue-600 mr-2"}),"Cambio de UbicaciÃ³n"]}),(0,i.jsx)("p",{className:"text-gray-600",children:"Transfiere equipos entre sucursales y ubicaciones"})]}),_&&(0,i.jsx)("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsx)("i",{className:"fas fa-exclamation-circle text-red-500 mr-2 mt-0.5"}),(0,i.jsx)("p",{className:"text-red-700",children:_})]})}),w&&(0,i.jsx)("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsx)("i",{className:"fas fa-check-circle text-green-500 mr-2 mt-0.5"}),(0,i.jsx)("p",{className:"text-green-700",children:w})]})}),(0,i.jsxs)("form",{onSubmit:O,className:"space-y-6",children:[(0,i.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,i.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:[(0,i.jsx)("i",{className:"fas fa-laptop text-blue-500 mr-2"}),"Equipos a Transferir"]}),p.length>0&&(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Equipos Seleccionados (",p.length,")"]}),(0,i.jsx)("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:p.map(e=>(0,i.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("span",{className:"font-medium",children:e.nombreEquipo}),(0,i.jsxs)("span",{className:"text-sm text-gray-500 ml-2",children:["#",e.no_serie]}),e.SucursalActual&&(0,i.jsxs)("span",{className:"text-xs text-blue-600 ml-2",children:["ðŸ“ ",e.SucursalActual]})]}),!t&&(0,i.jsx)("button",{type:"button",onClick:()=>(e=>{x(t=>t.filter(t=>t.no_serie!==e)),l(t=>({...t,equipos:t.equipos.filter(t=>t!==e)}))})(e.no_serie),className:"text-red-500 hover:text-red-700 ml-2",children:(0,i.jsx)("i",{className:"fas fa-times"})})]},e.no_serie))})]}),E&&(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar Equipos"}),(0,i.jsx)("input",{type:"text",value:k,onChange:e=>{let t=e.target.value;M(t),D(t)},placeholder:"Buscar por nÃºmero de serie, nombre o modelo...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg    bg-white text-gray-900   focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),g.length>0&&(0,i.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:g.map(e=>(0,i.jsxs)("button",{type:"button",onClick:()=>(e=>{p.find(t=>t.no_serie===e.no_serie)||(x(t=>[...t,e]),l(t=>({...t,equipos:[...t.equipos,e.no_serie]}))),M(""),m([])})(e),className:"w-full text-left p-3 hover:bg-gray-50 border-b border-gray-200 last:border-b-0",children:[(0,i.jsx)("div",{className:"font-medium",children:e.nombreEquipo}),(0,i.jsxs)("div",{className:"text-sm text-gray-500",children:["#",e.no_serie," â€¢ ",e.modelo]}),e.SucursalActual&&(0,i.jsxs)("div",{className:"text-xs text-blue-600",children:["ðŸ“ ",e.SucursalActual]})]},e.no_serie))})]})]}),(0,i.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,i.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:[(0,i.jsx)("i",{className:"fas fa-map-marker-alt text-green-500 mr-2"}),"UbicaciÃ³n Destino"]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sucursal Destino *"}),(0,i.jsxs)("select",{name:"sucursalDestino",value:o.sucursalDestino,onChange:T,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg    bg-white text-gray-900   focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,i.jsx)("option",{value:"",children:"Seleccionar sucursal..."}),c.map(e=>(0,i.jsxs)("option",{value:e.id,children:[e.nombre," ",e.equiposAsignados?"(".concat(e.equiposAsignados," equipos)"):""]},e.id))]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"PosiciÃ³n/Ãrea Destino *"}),(0,i.jsxs)("select",{name:"posicionDestino",value:o.posicionDestino,onChange:T,required:!0,disabled:!o.sucursalDestino,className:"w-full px-3 py-2 border border-gray-300 rounded-lg    bg-white text-gray-900   focus:ring-2 focus:ring-blue-500 focus:border-blue-500   disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,i.jsx)("option",{value:"",children:"Seleccionar posiciÃ³n..."}),L.map((e,t)=>(0,i.jsx)("option",{value:e.id,children:e.nombre},"posicion-".concat(e.id||t)))]})]})]})]}),(0,i.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,i.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:[(0,i.jsx)("i",{className:"fas fa-clipboard-list text-orange-500 mr-2"}),"Detalles de la Transferencia"]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Movimiento"}),(0,i.jsxs)("select",{name:"tipoMovimiento",value:o.tipoMovimiento,onChange:T,className:"w-full px-3 py-2 border border-gray-300 rounded-lg    bg-white text-gray-900   focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,i.jsx)("option",{value:"TRASLADO",children:"Traslado"}),(0,i.jsx)("option",{value:"REASIGNACION",children:"ReasignaciÃ³n"}),(0,i.jsx)("option",{value:"MANTENIMIENTO",children:"Mantenimiento"}),(0,i.jsx)("option",{value:"REUBICACION",children:"ReubicaciÃ³n"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Urgencia"}),(0,i.jsxs)("select",{name:"urgencia",value:o.urgencia,onChange:T,className:"w-full px-3 py-2 border border-gray-300 rounded-lg    bg-white text-gray-900   focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,i.jsx)("option",{value:"BAJA",children:"Baja"}),(0,i.jsx)("option",{value:"NORMAL",children:"Normal"}),(0,i.jsx)("option",{value:"ALTA",children:"Alta"}),(0,i.jsx)("option",{value:"URGENTE",children:"Urgente"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Responsable del Traslado"}),(0,i.jsx)("input",{type:"text",name:"responsableTraslado",value:o.responsableTraslado,onChange:T,className:"w-full px-3 py-2 border border-gray-300 rounded-lg    bg-white text-gray-900   focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nombre del responsable"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha Programada (Opcional)"}),(0,i.jsx)("input",{type:"datetime-local",name:"fechaProgramada",value:o.fechaProgramada,onChange:T,className:"w-full px-3 py-2 border border-gray-300 rounded-lg    bg-white text-gray-900   focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,i.jsxs)("div",{className:"mt-4",children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Motivo"}),(0,i.jsx)("input",{type:"text",name:"motivo",value:o.motivo,onChange:T,className:"w-full px-3 py-2 border border-gray-300 rounded-lg    bg-white text-gray-900   focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Motivo de la transferencia"})]}),(0,i.jsxs)("div",{className:"mt-4",children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observaciones"}),(0,i.jsx)("textarea",{name:"observaciones",value:o.observaciones,onChange:T,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg    bg-white text-gray-900   focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Observaciones adicionales..."})]})]}),(0,i.jsxs)("div",{className:"flex justify-end space-x-4 pt-6",children:[r&&(0,i.jsx)("button",{type:"button",onClick:()=>{r&&r()},disabled:y,className:"px-6 py-2 border border-gray-300 rounded-lg   text-gray-700 bg-white   hover:bg-gray-50    focus:ring-2 focus:ring-gray-500 focus:border-gray-500   disabled:opacity-50 disabled:cursor-not-allowed   transition-colors duration-200",children:"Cancelar"}),(0,i.jsx)("button",{type:"submit",disabled:y||0===p.length,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg   focus:ring-2 focus:ring-blue-500 focus:border-blue-500   disabled:opacity-50 disabled:cursor-not-allowed   transition-colors duration-200 flex items-center",children:y?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Procesando..."]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("i",{className:"fas fa-paper-plane mr-2"}),"Iniciar Transferencia"]})})]})]})]})},aY=s.forwardRef(function(e,t){let{title:i,titleId:a,...r}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},r),i?s.createElement("title",{id:a},i):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"}))}),a$=s.forwardRef(function(e,t){let{title:i,titleId:a,...r}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},r),i?s.createElement("title",{id:a},i):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17 17.25 21A2.652 2.652 0 0 0 21 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 1 1-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 0 0 4.486-6.336l-3.276 3.277a3.004 3.004 0 0 1-2.25-2.25l3.276-3.276a4.5 4.5 0 0 0-6.336 4.486c.091 1.076-.071 2.264-.904 2.95l-.102.085m-1.745 1.437L5.909 7.5H4.5L2.25 3.75l1.5-1.5L7.5 4.5v1.409l4.26 4.26m-1.745 1.437 1.745-1.437m6.615 8.206L15.75 15.75M4.867 19.125h.008v.008h-.008v-.008Z"}))}),aG=s.forwardRef(function(e,t){let{title:i,titleId:a,...r}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},r),i?s.createElement("title",{id:a},i):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}),aX=s.forwardRef(function(e,t){let{title:i,titleId:a,...r}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},r),i?s.createElement("title",{id:a},i):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}),aZ=()=>{let[e,t]=(0,s.useState)("consultar"),[a,r]=(0,s.useState)([]),[n,o]=(0,s.useState)(null),[l,c]=(0,s.useState)(!1),[d,h]=(0,s.useState)({sucursal:"",tecnico:"",tipo:"",estatus:"ABIERTO",fechaDesde:"",fechaHasta:""}),[u,g]=(0,s.useState)([]),[m,p]=(0,s.useState)([]),[x,f]=(0,s.useState)([]),[b,y]=(0,s.useState)({equipos:[],tipoMantenimiento:"PREVENTIVO",fechaProgramada:"",tecnicoAsignado:"",descripcion:"",prioridad:"NORMAL",estimacionHoras:1,observaciones:""}),[v,_]=(0,s.useState)("");(0,s.useEffect)(()=>{"consultar"===e&&j(),"programar"===e&&w()},[e,d]);let j=async()=>{c(!0);try{let e={mantenimientos:[{id:1,fecha:"2024-11-08",fechaFin:void 0,tipo_mantenimiento:"PREVENTIVO",prioridad_mantenimiento:"NORMAL",estimacion_horas:2,horasReales:void 0,no_serie:"CAM001",nombreEquipo:"CÃ¡mara Principal",tipoEquipo:"CÃ¡mara",sucursal:"Centro Principal",descripcion:"Mantenimiento preventivo mensual",observaciones:"RevisiÃ³n general del sistema",tecnico:"Juan PÃ©rez",estatusMantenimiento:"ABIERTO",diasTranscurridos:2},{id:2,fecha:"2024-11-05",fechaFin:"2024-11-06",tipo_mantenimiento:"CORRECTIVO",prioridad_mantenimiento:"ALTA",estimacion_horas:4,horasReales:3.5,no_serie:"CAM002",nombreEquipo:"CÃ¡mara Entrada",tipoEquipo:"CÃ¡mara",sucursal:"Sucursal Norte",descripcion:"ReparaciÃ³n de lente daÃ±ado",observaciones:"Lente reemplazado exitosamente",tecnico:"MarÃ­a GonzÃ¡lez",estatusMantenimiento:"COMPLETADO",diasTranscurridos:3}],estadisticas:{total:2,porTecnico:[{tecnico:"Juan PÃ©rez",totalMantenimientos:1,horasEstimadas:2,horasReales:0,preventivos:1,correctivos:0,urgentes:0},{tecnico:"MarÃ­a GonzÃ¡lez",totalMantenimientos:1,horasEstimadas:4,horasReales:3.5,preventivos:0,correctivos:1,urgentes:0}],porTipo:{preventivos:1,correctivos:1,urgentes:0},porPrioridad:{critica:0,alta:1,normal:1,baja:0}}};r(e.mantenimientos),o(e.estadisticas)}catch(e){console.error("Error cargando mantenimientos:",e),r([]),o({total:0,porTecnico:[],porTipo:{preventivos:0,correctivos:0,urgentes:0},porPrioridad:{critica:0,alta:0,normal:0,baja:0}})}c(!1)},w=async()=>{try{f([{id:1,nombre:"Juan PÃ©rez - TÃ©cnico Senior",nivel:3},{id:2,nombre:"MarÃ­a GonzÃ¡lez - TÃ©cnico",nivel:2},{id:3,nombre:"Carlos LÃ³pez - TÃ©cnico Junior",nivel:2},{id:4,nombre:"Ana RodrÃ­guez - Especialista",nivel:3}])}catch(e){console.error("Error cargando tÃ©cnicos:",e)}},N=async e=>{if(!e.trim())return void g([]);try{let t=await fetch("/api/equipos/search?q=".concat(encodeURIComponent(e))),i=await t.json();if(i.success){let e=i.data.filter(e=>"Mantenimiento"!==e.EstatusEquipo&&"Fuera de Servicio"!==e.EstatusEquipo);g(e)}}catch(e){console.error("Error buscando equipos:",e)}},k=async()=>{try{alert("Mantenimiento programado exitosamente para ".concat(m.length," equipo(s)")),y({equipos:[],tipoMantenimiento:"PREVENTIVO",fechaProgramada:"",tecnicoAsignado:"",descripcion:"",prioridad:"NORMAL",estimacionHoras:1,observaciones:""}),p([]),j()}catch(e){console.error("Error programando mantenimiento:",e),alert("Error interno del servidor")}};return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsx)("div",{className:"bg-white shadow rounded-lg p-6",children:(0,i.jsx)("div",{className:"flex items-center justify-between",children:(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)(a$,{className:"h-8 w-8 text-blue-600"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Mantenimiento de Equipos"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Gestiona el mantenimiento preventivo y correctivo"})]})]})})}),(0,i.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,i.jsx)("div",{className:"border-b border-gray-200",children:(0,i.jsx)("nav",{className:"-mb-px flex space-x-8 px-6",children:[{id:"consultar",label:"Consultar Mantenimientos",icon:aY},{id:"programar",label:"Programar Mantenimiento",icon:a$},{id:"estadisticas",label:"EstadÃ­sticas",icon:aG}].map(s=>(0,i.jsxs)("button",{onClick:()=>t(s.id),className:"flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm ".concat(e===s.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,i.jsx)(s.icon,{className:"h-5 w-5"}),(0,i.jsx)("span",{children:s.label})]},s.id))})}),(0,i.jsxs)("div",{className:"p-6",children:["consultar"===e&&(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4 p-4 bg-gray-50 rounded-lg",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estatus"}),(0,i.jsxs)("select",{value:d.estatus,onChange:e=>h({...d,estatus:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg    bg-white text-gray-900 text-sm",children:[(0,i.jsx)("option",{value:"ABIERTO",children:"Abierto"}),(0,i.jsx)("option",{value:"EN_PROCESO",children:"En Proceso"}),(0,i.jsx)("option",{value:"COMPLETADO",children:"Completado"}),(0,i.jsx)("option",{value:"CANCELADO",children:"Cancelado"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo"}),(0,i.jsxs)("select",{value:d.tipo,onChange:e=>h({...d,tipo:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg    bg-white text-gray-900 text-sm",children:[(0,i.jsx)("option",{value:"",children:"Todos"}),(0,i.jsx)("option",{value:"PREVENTIVO",children:"Preventivo"}),(0,i.jsx)("option",{value:"CORRECTIVO",children:"Correctivo"}),(0,i.jsx)("option",{value:"URGENTE",children:"Urgente"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Desde"}),(0,i.jsx)("input",{type:"date",value:d.fechaDesde,onChange:e=>h({...d,fechaDesde:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg    bg-white text-gray-900 text-sm"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hasta"}),(0,i.jsx)("input",{type:"date",value:d.fechaHasta,onChange:e=>h({...d,fechaHasta:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg    bg-white text-gray-900 text-sm"})]}),(0,i.jsxs)("div",{className:"md:col-span-2",children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"TÃ©cnico"}),(0,i.jsx)("input",{type:"text",value:d.tecnico,onChange:e=>h({...d,tecnico:e.target.value}),placeholder:"Nombre del tÃ©cnico",className:"w-full px-3 py-2 border border-gray-300 rounded-lg    bg-white text-gray-900 text-sm"})]})]}),l?(0,i.jsxs)("div",{className:"flex justify-center items-center p-8",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,i.jsx)("span",{className:"ml-2",children:"Cargando mantenimientos..."})]}):(0,i.jsxs)("div",{className:"overflow-x-auto",children:[(0,i.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,i.jsx)("thead",{className:"bg-gray-50",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Equipo"}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo/Prioridad"}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"TÃ©cnico"}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fechas"}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Horas"}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"DescripciÃ³n"})]})}),(0,i.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(e=>(0,i.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.no_serie}),(0,i.jsx)("div",{className:"text-sm text-gray-500",children:e.nombreEquipo})]})}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,i.jsxs)("div",{className:"space-y-1",children:[(0,i.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat((e=>{switch(e){case"URGENTE":return"bg-red-100 text-red-800";case"CORRECTIVO":return"bg-yellow-100 text-yellow-800";case"PREVENTIVO":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}})(e.tipo_mantenimiento)),children:e.tipo_mantenimiento}),(0,i.jsx)("br",{}),(0,i.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full border ".concat((e=>{switch(e){case"CRITICA":return"bg-red-100 text-red-800 border-red-200";case"ALTA":return"bg-orange-100 text-orange-800 border-orange-200";case"NORMAL":return"bg-blue-100 text-blue-800 border-blue-200";case"BAJA":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}})(e.prioridad_mantenimiento)),children:e.prioridad_mantenimiento})]})}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.tecnico}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{children:["Programado: ",new Date(e.fecha).toLocaleDateString()]}),e.fechaFin&&(0,i.jsxs)("div",{children:["Finalizado: ",new Date(e.fechaFin).toLocaleDateString()]}),(0,i.jsxs)("div",{className:"text-xs text-gray-500",children:[e.diasTranscurridos," dÃ­as transcurridos"]})]})}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{children:["Est: ",e.estimacion_horas,"h"]}),e.horasReales&&(0,i.jsxs)("div",{children:["Real: ",e.horasReales,"h"]})]})}),(0,i.jsxs)("td",{className:"px-6 py-4 text-sm text-gray-900",children:[(0,i.jsx)("div",{className:"max-w-xs truncate",children:e.descripcion}),e.observaciones&&(0,i.jsxs)("div",{className:"text-xs text-gray-500 max-w-xs truncate",children:["Obs: ",e.observaciones]})]})]},e.id))})]}),0===a.length&&(0,i.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No se encontraron mantenimientos con los filtros aplicados"})]})]}),"programar"===e&&(0,i.jsx)("div",{className:"space-y-6",children:(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Seleccionar Equipos"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("input",{type:"text",value:v,onChange:e=>{_(e.target.value),N(e.target.value)},placeholder:"Buscar equipos por nÃºmero de serie o nombre...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg    bg-white text-gray-900"}),u.length>0&&(0,i.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:u.map(e=>(0,i.jsxs)("button",{onClick:()=>(e=>{m.find(t=>t.no_serie===e.no_serie)||(p([...m,e]),y(t=>({...t,equipos:[...t.equipos,e.no_serie]}))),_(""),g([])})(e),className:"w-full text-left px-4 py-2 hover:bg-gray-50 border-b border-gray-200",children:[(0,i.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.no_serie," - ",e.nombreEquipo]}),(0,i.jsxs)("div",{className:"text-xs text-gray-500",children:[e.TipoEquipo," | ",e.SucursalActual]})]},e.no_serie))})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("h4",{className:"text-sm font-medium text-gray-700",children:["Equipos Seleccionados (",m.length,")"]}),m.map(e=>(0,i.jsxs)("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.no_serie," - ",e.nombreEquipo]}),(0,i.jsx)("div",{className:"text-xs text-gray-500",children:e.TipoEquipo})]}),(0,i.jsx)("button",{onClick:()=>(e=>{p(m.filter(t=>t.no_serie!==e)),y(t=>({...t,equipos:t.equipos.filter(t=>t!==e)}))})(e.no_serie),className:"text-red-600 hover:text-red-800 text-sm",children:"Remover"})]},e.no_serie))]})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Detalles del Mantenimiento"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Mantenimiento *"}),(0,i.jsxs)("select",{value:b.tipoMantenimiento,onChange:e=>y({...b,tipoMantenimiento:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg    bg-white text-gray-900",children:[(0,i.jsx)("option",{value:"PREVENTIVO",children:"Preventivo"}),(0,i.jsx)("option",{value:"CORRECTIVO",children:"Correctivo"}),(0,i.jsx)("option",{value:"URGENTE",children:"Urgente"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prioridad *"}),(0,i.jsxs)("select",{value:b.prioridad,onChange:e=>y({...b,prioridad:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg    bg-white text-gray-900",children:[(0,i.jsx)("option",{value:"BAJA",children:"Baja"}),(0,i.jsx)("option",{value:"NORMAL",children:"Normal"}),(0,i.jsx)("option",{value:"ALTA",children:"Alta"}),(0,i.jsx)("option",{value:"CRITICA",children:"CrÃ­tica"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha Programada *"}),(0,i.jsx)("input",{type:"datetime-local",value:b.fechaProgramada,onChange:e=>y({...b,fechaProgramada:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg    bg-white text-gray-900",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"TÃ©cnico Asignado *"}),(0,i.jsxs)("select",{value:b.tecnicoAsignado,onChange:e=>y({...b,tecnicoAsignado:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg    bg-white text-gray-900",required:!0,children:[(0,i.jsx)("option",{value:"",children:"Seleccionar tÃ©cnico..."}),x.map(e=>(0,i.jsx)("option",{value:e.id,children:e.nombre},e.id))]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"EstimaciÃ³n (horas)"}),(0,i.jsx)("input",{type:"number",min:"0.5",step:"0.5",value:b.estimacionHoras,onChange:e=>y({...b,estimacionHoras:parseFloat(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg    bg-white text-gray-900"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"DescripciÃ³n del Trabajo *"}),(0,i.jsx)("textarea",{value:b.descripcion,onChange:e=>y({...b,descripcion:e.target.value}),rows:3,placeholder:"Describir el trabajo a realizar...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg    bg-white text-gray-900",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observaciones"}),(0,i.jsx)("textarea",{value:b.observaciones,onChange:e=>y({...b,observaciones:e.target.value}),rows:2,placeholder:"Observaciones adicionales...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg    bg-white text-gray-900"})]}),(0,i.jsxs)("button",{onClick:k,disabled:0===m.length||!b.fechaProgramada||!b.tecnicoAsignado||!b.descripcion,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700    disabled:bg-gray-400 disabled:cursor-not-allowed   flex items-center justify-center space-x-2",children:[(0,i.jsx)(a$,{className:"h-5 w-5"}),(0,i.jsx)("span",{children:"Programar Mantenimiento"})]})]})]})}),"estadisticas"===e&&n&&(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,i.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-6 rounded-lg",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm font-medium text-green-600",children:"Preventivos"}),(0,i.jsx)("p",{className:"text-2xl font-bold text-green-900",children:n.porTipo.preventivos})]}),(0,i.jsx)(a$,{className:"h-8 w-8 text-green-600"})]})}),(0,i.jsx)("div",{className:"bg-gradient-to-r from-yellow-50 to-yellow-100 p-6 rounded-lg",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm font-medium text-yellow-600",children:"Correctivos"}),(0,i.jsx)("p",{className:"text-2xl font-bold text-yellow-900",children:n.porTipo.correctivos})]}),(0,i.jsx)(aX,{className:"h-8 w-8 text-yellow-600"})]})}),(0,i.jsx)("div",{className:"bg-gradient-to-r from-red-50 to-red-100 p-6 rounded-lg",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm font-medium text-red-600",children:"Urgentes"}),(0,i.jsx)("p",{className:"text-2xl font-bold text-red-900",children:n.porTipo.urgentes})]}),(0,i.jsx)(aX,{className:"h-8 w-8 text-red-600"})]})}),(0,i.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 p-6 rounded-lg",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm font-medium text-blue-600",children:"Total"}),(0,i.jsx)("p",{className:"text-2xl font-bold text-blue-900",children:n.total})]}),(0,i.jsx)(aG,{className:"h-8 w-8 text-blue-600"})]})})]}),(0,i.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,i.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"DistribuciÃ³n por Prioridad"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"text-2xl font-bold text-red-600",children:n.porPrioridad.critica}),(0,i.jsx)("div",{className:"text-sm text-gray-600",children:"CrÃ­tica"})]}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:n.porPrioridad.alta}),(0,i.jsx)("div",{className:"text-sm text-gray-600",children:"Alta"})]}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:n.porPrioridad.normal}),(0,i.jsx)("div",{className:"text-sm text-gray-600",children:"Normal"})]}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"text-2xl font-bold text-green-600",children:n.porPrioridad.baja}),(0,i.jsx)("div",{className:"text-sm text-gray-600",children:"Baja"})]})]})]}),n.porTecnico.length>0&&(0,i.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,i.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"EstadÃ­sticas por TÃ©cnico"}),(0,i.jsx)("div",{className:"overflow-x-auto",children:(0,i.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"TÃ©cnico"}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Horas Est."}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Horas Reales"}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Prev/Corr/Urg"})]})}),(0,i.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.porTecnico.map((e,t)=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.tecnico}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.totalMantenimientos}),(0,i.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.horasEstimadas.toFixed(1),"h"]}),(0,i.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.horasReales.toFixed(1),"h"]}),(0,i.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.preventivos,"/",e.correctivos,"/",e.urgentes]})]},t))})]})})]})]})]})]})]})},aK=e=>{let{isOpen:t,onClose:s,onConfirm:a,equipoInfo:r,isDeleting:n}=e;return t&&r?(0,i.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,i.jsxs)("div",{className:"flex items-center mb-4",children:[(0,i.jsx)("div",{className:"bg-red-100 rounded-full p-2 mr-3",children:(0,i.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 8.5c-.77.833-.23 2.5 1.732 2.5z"})})}),(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Confirmar EliminaciÃ³n"})]}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"Â¿EstÃ¡s seguro de que deseas eliminar este equipo?"}),(0,i.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 mb-3",children:(0,i.jsx)("p",{className:"text-xs text-green-700 font-medium",children:"Esta acciÃ³n no se puede deshacer."})}),(0,i.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,i.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"No. Serie:"})," ",r.no_serie]}),(0,i.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Nombre:"})," ",r.nombreEquipo]})]})]}),(0,i.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,i.jsx)("button",{onClick:s,disabled:n,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:opacity-50",children:"Cancelar"}),(0,i.jsx)("button",{onClick:a,disabled:n,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 flex items-center",children:n?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,i.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,i.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Eliminando..."]}):"Eliminar"})]})]})}):null},aJ=e=>{let{resultados:t,onEquipoSelect:s,onVerDetalles:a,loading:r=!1}=e;return r?(0,i.jsx)("div",{className:"mt-6",children:(0,i.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,i.jsxs)("div",{className:"text-center py-8",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,i.jsx)("p",{className:"text-gray-600 mt-4",children:"Buscando equipos..."})]})})}):0===t.length?(0,i.jsx)("div",{className:"mt-6",children:(0,i.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,i.jsxs)("div",{className:"text-center py-8",children:[(0,i.jsx)("i",{className:"fas fa-search text-4xl text-gray-400 mb-4"}),(0,i.jsx)("p",{className:"text-gray-600 text-lg",children:"No se encontraron equipos"}),(0,i.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Prueba modificando los filtros de bÃºsqueda"})]})})}):(0,i.jsx)("div",{className:"mt-6",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,i.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Resultados de BÃºsqueda"}),(0,i.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:[t.length," ",1===t.length?"equipo encontrado":"equipos encontrados"]})]}),(0,i.jsx)("div",{className:"space-y-4",children:t.map((e,t)=>(0,i.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors duration-200",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"No. Serie:"}),(0,i.jsx)("p",{className:"text-gray-900 font-medium",children:e.no_serie})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Nombre:"}),(0,i.jsx)("p",{className:"text-gray-900",children:e.nombreEquipo})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Tipo:"}),(0,i.jsx)("p",{className:"text-gray-900",children:e.TipoEquipo})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Estatus:"}),(0,i.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("Activo"===e.EstatusEquipo?"bg-green-100 text-green-800":"Mantenimiento"===e.EstatusEquipo?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:e.EstatusEquipo})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Sucursal:"}),(0,i.jsx)("p",{className:"text-gray-900",children:e.SucursalActual})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Usuario:"}),(0,i.jsx)("p",{className:"text-gray-900",children:e.UsuarioAsignado||"Sin asignar"})]})]})]}),(0,i.jsxs)("div",{className:"flex space-x-2 mt-4 pt-4 border-t border-gray-200",children:[a&&(0,i.jsxs)("button",{onClick:()=>a(e.no_serie),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:[(0,i.jsx)("i",{className:"fas fa-eye mr-1"}),"Ver Detalles"]}),s&&(0,i.jsxs)("button",{onClick:()=>s(e.no_serie),className:"text-green-600 hover:text-green-800 text-sm font-medium",children:[(0,i.jsx)("i",{className:"fas fa-check-circle mr-1"}),"Seleccionar"]})]})]},e.no_serie||t))})]})})},aQ=e=>{let{historial:t,loading:s=!1,onRefresh:a}=e;return s?(0,i.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,i.jsxs)("div",{className:"text-center py-8",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,i.jsx)("p",{className:"text-gray-600 mt-4",children:"Cargando historial..."})]})}):(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("i",{className:"fas fa-history text-2xl text-gray-600 mr-3"}),(0,i.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Historial de Movimientos"})]}),a&&(0,i.jsxs)("button",{onClick:a,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors duration-200",children:[(0,i.jsx)("i",{className:"fas fa-sync-alt mr-2"}),"Actualizar"]})]}),(0,i.jsx)("div",{className:"p-6",children:0===t.length?(0,i.jsxs)("div",{className:"text-center py-12",children:[(0,i.jsx)("i",{className:"fas fa-clock text-4xl text-gray-400 mb-4"}),(0,i.jsx)("p",{className:"text-gray-600 text-lg",children:"No hay historial disponible"}),(0,i.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Los movimientos aparecerÃ¡n aquÃ­ una vez que se realicen acciones"})]}):(0,i.jsx)("div",{className:"space-y-4",children:t.map((e,t)=>(0,i.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors duration-200",children:(0,i.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,i.jsx)("div",{className:"flex-shrink-0 ".concat((e=>{let t=e.toLowerCase();return t.includes("alta")||t.includes("crear")?"text-green-600":t.includes("editar")||t.includes("actualizar")?"text-blue-600":t.includes("traslado")||t.includes("mover")?"text-purple-600":t.includes("mantenimiento")?"text-yellow-600":t.includes("falla")||t.includes("reporte")?"text-red-600":t.includes("eliminar")||t.includes("baja")?"text-red-700":"text-gray-600"})(e.accion)),children:(0,i.jsx)("i",{className:"".concat((e=>{let t=e.toLowerCase();return t.includes("alta")||t.includes("crear")?"fas fa-plus-circle":t.includes("editar")||t.includes("actualizar")?"fas fa-edit":t.includes("traslado")||t.includes("mover")?"fas fa-exchange-alt":t.includes("mantenimiento")?"fas fa-wrench":t.includes("falla")||t.includes("reporte")?"fas fa-exclamation-triangle":t.includes("eliminar")||t.includes("baja")?"fas fa-trash":"fas fa-info-circle"})(e.accion)," text-lg mt-1")})}),(0,i.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:e.accion}),(0,i.jsx)("span",{className:"text-xs text-gray-500",children:(e=>{try{return new Date(e).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(t){return e}})(e.fecha)})]}),(0,i.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.detalles}),(e.usuario||e.sucursal)&&(0,i.jsxs)("div",{className:"flex items-center space-x-4 mt-2",children:[e.usuario&&(0,i.jsxs)("span",{className:"inline-flex items-center text-xs text-gray-500",children:[(0,i.jsx)("i",{className:"fas fa-user mr-1"}),e.usuario]}),e.sucursal&&(0,i.jsxs)("span",{className:"inline-flex items-center text-xs text-gray-500",children:[(0,i.jsx)("i",{className:"fas fa-building mr-1"}),e.sucursal]})]})]})]})},t))})})]})},a0=e=>{let{title:t="GestiÃ³n de Equipos",onCreateNew:s,onRefresh:a,showCreateButton:r=!0,showRefreshButton:n=!0,loading:o=!1,tabs:l=[],activeTab:c="",onTabChange:d}=e;return(0,i.jsx)("div",{className:"bg-white shadow rounded-lg p-4 mb-6",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("i",{className:"fas fa-desktop text-2xl text-blue-600 mr-3"}),(0,i.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:t})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[l.length>0&&(0,i.jsx)(i.Fragment,{children:l.map(e=>(0,i.jsxs)("button",{onClick:()=>null==d?void 0:d(e.id),className:"flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors ".concat(c===e.id?"text-white bg-blue-600 hover:bg-blue-700":"text-white bg-blue-500 hover:bg-blue-600"),children:[(0,i.jsx)("i",{className:"fas ".concat(e.icon," mr-2")}),e.label]},e.id))}),n&&a&&(0,i.jsxs)("button",{onClick:a,disabled:o,className:"flex items-center px-3 py-2 text-sm rounded-md text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50 transition-colors font-medium",children:[(0,i.jsx)("i",{className:"fas fa-sync-alt mr-2 ".concat(o?"animate-spin":"")}),"Actualizar"]})]})]})})},a1={vistaActual:"lista",equipoSeleccionado:"",equipoParaEditar:null,equipoParaCambioUbicacion:null,cargandoEquipo:!1,resultadosBusqueda:[],showDeleteModal:!1,equipoAEliminar:null,eliminandoEquipo:!1,refreshList:0};function a2(e){let{vistaInicial:t="lista"}=e,[r,n]=(0,s.useState)({...a1,vistaActual:t});(0,s.useEffect)(()=>()=>{h.debug("EquiposManager unmounting, cleaning up...")},[h]);let o=(0,s.useCallback)(e=>{n(t=>({...t,...e}))},[]),l=(0,s.useCallback)(e=>{h.userAction("cambiar_vista",void 0,{vista:e}),o({vistaActual:e,equipoSeleccionado:"",equipoParaEditar:null,equipoParaCambioUbicacion:null})},[h,o]),c=(0,s.useCallback)(e=>{setEquipoSeleccionado(e)},[]),d=(0,s.useCallback)(e=>{setResultadosBusqueda([...e])},[]),u=(0,s.useCallback)(e=>{setEquipoSeleccionado(e),setVistaActual("dashboard")},[]),g=(0,s.useCallback)(async e=>{setCargandoEquipo(!0);try{let t=await fetch("/api/equipos/".concat(e)),i=await t.json();i.success?(setEquipoParaEditar(i.data.equipo),setEquipoSeleccionado(e),setVistaActual("editar")):(console.error("Error cargando equipo:",i.error),alert("Error cargando los datos del equipo"))}catch(e){console.error("Error:",e),alert("Error de conexiÃ³n")}finally{setCargandoEquipo(!1)}},[]),p=(0,s.useCallback)(e=>{g(e)},[g]),f=(0,s.useCallback)(()=>{setVistaActual("lista")},[]),y=(0,s.useCallback)(()=>{setVistaActual("lista")},[]),_=async(e,t)=>{setEquipoAEliminar({no_serie:e,nombreEquipo:t||"Equipo sin nombre"}),setShowDeleteModal(!0)},j=async()=>{if(equipoAEliminar){setEliminandoEquipo(!0);try{let e=await a.apiService.delete("/api/equipos/".concat(equipoAEliminar.no_serie));e.success?(setShowDeleteModal(!1),setEquipoAEliminar(null),setRefreshList(e=>e+1),console.log("âœ… Equipo eliminado exitosamente:",e.message)):(console.error("âŒ Error eliminando equipo:",e.error),alert("âŒ Error: "+e.error))}catch(e){console.error("Error eliminando equipo:",e),alert("âŒ Error de conexiÃ³n al eliminar el equipo")}finally{setEliminandoEquipo(!1)}}},w=e=>{setEquipoSeleccionado(e),setVistaActual("historial")},N=e=>{k(e)},k=async e=>{setCargandoEquipo(!0);try{let t=await fetch("/api/equipos/".concat(e)),i=await t.json();i.success?(setEquipoParaCambioUbicacion(i.data.equipo),setEquipoSeleccionado(e),setVistaActual("cambiarUbicacion")):(console.error("Error cargando equipo:",i.error),alert("Error cargando los datos del equipo"))}catch(e){console.error("Error:",e),alert("Error de conexiÃ³n")}finally{setCargandoEquipo(!1)}},M=e=>{setEquipoSeleccionado(e),setVistaActual("mantenimientoEquipo")},E=(0,s.useMemo)(()=>[{id:"lista",label:"Lista de Equipos",icon:"fa-list"},{id:"alta",label:"Nuevo Equipo",icon:"fa-plus"},{id:"busqueda",label:"BÃºsqueda Avanzada",icon:"fa-search"}],[]);return(0,i.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,i.jsx)(a0,{title:"GestiÃ³n de Equipos",onCreateNew:()=>l("alta"),onRefresh:()=>setRefreshList(e=>e+1),showCreateButton:"alta"!==vistaActual,showRefreshButton:"lista"===vistaActual,loading:cargandoEquipo,tabs:E,activeTab:vistaActual,onTabChange:e=>l(e)}),(0,i.jsx)("div",{className:"min-h-[500px]",children:(()=>{switch(vistaActual){case"lista":return(0,i.jsx)(m,{onEquipoSelect:c,onVerDetalles:u,onEditarEquipo:p,onEliminarEquipo:_,onVerHistorial:w,onCambiarUbicacion:N,onMantenimiento:M});case"busqueda":return(0,i.jsxs)("div",{children:[(0,i.jsx)(x,{onResultados:d}),(0,i.jsx)(aJ,{resultados:resultadosBusqueda,onEquipoSelect:c,onVerDetalles:u})]});case"alta":return(0,i.jsx)(b,{onSuccess:f,onCancel:y});case"historial":return(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"mb-6",children:(0,i.jsxs)("button",{onClick:()=>setVistaActual("lista"),className:"flex items-center px-4 py-2 text-sm bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors duration-200",children:[(0,i.jsx)("i",{className:"fas fa-arrow-left mr-2"}),"Volver a Lista"]})}),(0,i.jsx)(aQ,{historial:[],loading:!1,onRefresh:()=>{console.log("Refrescando historial para:",equipoSeleccionado)}})]});case"cambiarUbicacion":if(cargandoEquipo)return(0,i.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,i.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mr-3"}),(0,i.jsx)("span",{children:"Cargando datos del equipo..."})]})});if(!equipoParaCambioUbicacion)return(0,i.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,i.jsxs)("div",{className:"text-center py-8",children:[(0,i.jsx)("i",{className:"fas fa-exclamation-triangle text-4xl text-yellow-400 mb-4"}),(0,i.jsx)("p",{className:"text-gray-600",children:"No se pudieron cargar los datos del equipo"}),(0,i.jsx)("button",{onClick:()=>setVistaActual("lista"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Volver a Lista"})]})});return(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center p-6 border-b",children:[(0,i.jsxs)("h3",{className:"text-lg font-medium text-gray-900",children:["Cambiar UbicaciÃ³n - ",equipoParaCambioUbicacion.nombreEquipo]}),(0,i.jsxs)("button",{onClick:()=>setVistaActual("lista"),className:"px-3 py-2 text-sm bg-gray-600 text-white rounded-md hover:bg-gray-700",children:[(0,i.jsx)("i",{className:"fas fa-arrow-left mr-2"}),"Volver a Lista"]})]}),(0,i.jsx)(aU,{equipoData:equipoParaCambioUbicacion,onSave:e=>{console.log("Transferencia completada:",e),setVistaActual("lista"),setRefreshList(e=>e+1),setEquipoParaCambioUbicacion(null),setEquipoSeleccionado("")},onCancel:()=>{setVistaActual("lista"),setEquipoParaCambioUbicacion(null),setEquipoSeleccionado("")},isModal:!1})]});case"mantenimientoEquipo":return(0,i.jsx)(aZ,{});case"dashboard":return(0,i.jsx)(aW,{noSerie:equipoSeleccionado,onVolver:()=>setVistaActual("lista")});case"editar":if(cargandoEquipo)return(0,i.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,i.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mr-3"}),(0,i.jsx)("span",{children:"Cargando datos del equipo..."})]})});if(!equipoParaEditar)return(0,i.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,i.jsxs)("div",{className:"text-center py-8",children:[(0,i.jsx)("p",{className:"text-gray-600",children:"No se pudieron cargar los datos del equipo"}),(0,i.jsx)("button",{onClick:()=>setVistaActual("lista"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Volver a Lista"})]})});return(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center p-6 border-b",children:[(0,i.jsxs)("h3",{className:"text-lg font-medium text-gray-900",children:["Editar Equipo: ",equipoSeleccionado]}),(0,i.jsxs)("button",{onClick:()=>{setVistaActual("lista"),setEquipoParaEditar(null)},className:"px-3 py-2 text-sm bg-gray-600 text-white rounded-md hover:bg-gray-700",children:[(0,i.jsx)("i",{className:"fas fa-arrow-left mr-2"}),"Volver a Lista"]})]}),(0,i.jsx)(v,{equipoData:equipoParaEditar,onSave:e=>{console.log("Equipo actualizado:",e),setVistaActual("lista"),setEquipoParaEditar(null)},onCancel:()=>{setVistaActual("lista"),setEquipoParaEditar(null)},isModal:!1})]});default:return(0,i.jsx)("div",{className:"bg-white rounded-lg shadow p-6 text-center",children:(0,i.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Vista no encontrada"})})}})()}),(0,i.jsx)(aK,{isOpen:showDeleteModal,onClose:()=>{setShowDeleteModal(!1),setEquipoAEliminar(null)},onConfirm:j,equipoInfo:equipoAEliminar||{no_serie:"",nombreEquipo:""},isDeleting:eliminandoEquipo})]})}}]);